{"version":3,"sources":["webpack:///./src/gtw-map.js","webpack:///./src/gtw-lang.js","webpack:///./src/gtw-citydata-transit-stops.js","webpack:///./src/gtw-settings.js","webpack:///./src/gtw-misc.js","webpack:///./src/gtw-citydata-transit-routes.js","webpack:///./src/gtw-pluginloader.js","webpack:///./src/gtw-db.js","webpack:///./src/gtw-citydata-transit-eta.js","webpack:///./src/gtw-location.js","webpack:///./src/gtw-requestlimiter.js","webpack:///./src/gtw-cors.js","webpack:///./src/gtw-citydata-transit.js","webpack:///./src/gtw-ui.js","webpack:///./src/gtw-config.js","webpack:///./src/app.js","webpack:///./node_modules/@wikimedia/jquery.i18n/src sync ^\\.\\/.*$","webpack:///./src/style.css?9819","webpack:///./src/style.css","webpack:///./src/timeline.css?025a","webpack:///./src/timeline.css","webpack:///./src/plugins lazy ^\\.\\/.*$ namespace object","webpack:///./src lazy ^\\.\\/gtw\\-map\\-.*$ namespace object","webpack:///./src/ui lazy ^\\.\\/.*\\-header\\.html$ namespace object","webpack:///./src/ui lazy ^\\.\\/.*\\-body\\.html$ namespace object","webpack:///./src/ui lazy ^\\.\\/.*\\-footer\\.html$ namespace object","webpack:///./src/gtw-log.js"],"names":["map","init","Promise","resolve","reject","mapApi","then","m","setCenter","coords","setZoom","zoom","addMarker","position","title","label","removeAllMarkers","addPolyline","strokeColor","strokeWeight","strokeOpacity","geodesic","removeAllPolylines","fitBounds","bounds","languages","localizedKey","localizedObject","key","langKey","getLanguage","localeKey","getLocale","enKey","split","changeLanguage","locale","found","x","$","i18n","load","done","providers","registerProvider","type","id","name","provider","fetchDatabase","isDatabaseUpdateNeeded","Error","db","getStop","stopId","this","i","stops","length","getStopById","getStops","stop","push","unregisterProvider","splice","getProviders","getProvider","fetchAllDatabase","pc","proms","catch","all","p","needs","version","needed","console","error","data","getAllStops","allStops","concat","getAllStopsNearby","lat","lng","range","sorted","d","distance","sort","a","b","SETTINGS_STORAGE_KEY","getDefaultSettings","desc","def","checkfunc","val","locales","parseInt","Number","isNaN","startsWith","endsWith","json","get","set","localStorage","t","getItem","save","j","JSON","parse","setItem","stringify","geoDistance","lat1","lon1","lat2","lon2","c","Math","cos","asin","sqrt","allProgress","progress_cb","fillZero","number","similarity","s1","s2","longer","shorter","longerLength","toLowerCase","costs","Array","lastValue","newValue","charAt","min","editDistance","parseFloat","getRoute","routeId","routes","getRouteById","getRoutes","route","getAllRoutes","allRoutes","plugins","installedPlugins","install","pkg","autoSave","plugin","isInstalled","uninstall","getPlugin","window","pluginsStr","warn","installedPlugin","info","status","msg","mod","onload","dbPromise","open","log","request","indexedDB","onupgradeneeded","event","target","result","objectStoreNames","contains","createObjectStore","keyPath","onsuccess","onerror","putPluginStorage","tx","transaction","store","objectStore","clone","Object","assign","put","package","complete","getPluginStorage","getTransitRoutesByProvider","putTransitRoutes","routeName","etaProviders","paths","getTransitStopsByProvider","putTransitStops","stopName","addr","getTransitReferenceByProvider","putTransitReference","undefined","cache","clearCache","timeDifference","hr","fetchEta","opt","count","providerId","selectedPath","cached","now","Date","lastFetched","scheObj","schedules","options","sche","serverTime","time","out","getTime","err","values","value","code","getCache","ERROR_NOT_SUPPORTED","ERROR_NO_ACCESS","currentPosition","requestLocationAccess","successFunc","errorFunc","navigator","geolocation","getCurrentPosition","latitude","longitude","watchPosition","onPositionChangeSuccess","onPositionChangeError","enableHighAccuracy","timeout","maximumAge","alert","requests","duration","running","queue","func","args","TypeError","start","dispatch","next","shift","apply","setTimeout","clear","CORS_PROTOCOL","domains","register","domain","allowCors","config","extractHost","url","includes","indexOf","last","substring","isCors","host","location","before","callback","Cors","Settings","statusText","headers","proxy","index","sindex","first","second","third","getStopIndex","path","searchRoutesOfStop","bound","TransitType","BUS","MINIBUS","TRAM","TRAIN","FERRY","document","ready","on","showModal","hasClass","removeClass","tab","attr","addClass","showTab","clearInterval","timers","showPanel","searchTimeout","vars","modalTimers","adjustMargin","keys","css","smartWizard","useURLhash","showStepURLhash","html","lang","byRegion","region","regionOptionsHtml","removeAttr","byCategory","pluginKey","category","calcInstallCount","categoryCount","node","totalCount","allCount","categoryKey","each","prop","installCountNode","pluginHtml","closedApi","fullName","change","checked","pkgs","errors","reload","gettingStarted","layout","timer","modalClearUp","backdrop","keyboard","default","modal","loadModalLayout","scripts","hideModal","clearUp","drawRouteOnMap","pos","dbStop","showRouteList","scroll","lastStopId","parent","screen","width","icon","children","scrollIntoView","targetPos","content","h","active","schedule","eta","floor","colspan","isLive","getHours","getMinutes","showStopEta","setInterval","errorPlugins","errSummary","checksum","packageJson","pkey","author","github","statusMsg","categoryTabHtml","categoryTabContentHtml","allHtml","tabNode","tabContentNode","total","pluginJson","append","setting","requestLen","fadeIn","max","fadeOut","allNearbyRoutes","text","badgeClass","calcEta","badge","buttonScroll","iprovider","image","searchField","allNearbyStops","testRange","ceil","maxNearbyBusDisplay","stopResult","routeResults","routeResult","round","sstop","latlngs","clearTimeout","providerName","lastStop","rp","pp","sp","list","parentNode","appendChild","mouseenter","googleMapApiKey","jQuery","req","forEach","module","__headerTexts","__stopHeaderAnimation","__headerAnimation","resize","hh","height","dh","defs","promise","progress","errPlugins","animate","opacity","webpackContext","webpackContextResolve","__webpack_require__","o","e","exports","locals","webpackAsyncContext","ids","slice","maxEntries","logEntries","jsTrace","trace","jsDebug","debug","jsInfo","jsWarn","jsError","printObject","toConsole","level","toLogger","tag","lastMsg","lastTag","lastLevel","lastTime","levelName","className","toLocaleString","toast","prepend","remove","animation","autohide","delay","showToast","pmsg"],"mappings":"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","file":"app.a952d56a8a02cadf037e.js","sourcesContent":["//GTW Map source code\r\n\r\nimport config from './gtw-config';\r\n\r\nexport var map = false;\r\n\r\nexport function init() {\r\n    return new Promise((resolve, reject) => {\r\n        import(\"./gtw-map-\" + config.mapApi).then(function (m) {\r\n            map = m;\r\n            map.init().then(function () {\r\n                resolve();\r\n            });\r\n        });\r\n    });\r\n}\r\n\r\nexport function setCenter(coords) {\r\n    return map.setCenter(coords);\r\n}\r\n\r\nexport function setZoom(zoom) {\r\n    return map.setZoom(zoom);\r\n}\r\n\r\nexport function addMarker(position, title, label) {\r\n    return map.addMarker(position, title, label);\r\n}\r\n\r\nexport function removeMarker(markerId) {\r\n    return map.removeMarker(markerId);\r\n}\r\n\r\nexport function removeAllMarkers() {\r\n    return map.removeAllMarkers();\r\n}\r\n\r\nexport function addInfoWindow(markerId, content, open = false) {\r\n    return map.addInfoWindow(markerId, content, open);\r\n}\r\n\r\nexport function addPolyline(coords, strokeColor, strokeWeight, strokeOpacity = 1.0, geodesic = true) {\r\n    return map.addPolyline(coords, strokeColor, strokeWeight, strokeOpacity, geodesic);\r\n}\r\n\r\nexport function removePolyline(polylineId) {\r\n    return map.removePolyline(polylineId);\r\n}\r\n\r\nexport function removeAllPolylines() {\r\n    return map.removeAllPolylines();\r\n}\r\n\r\nexport function fitBounds(bounds) {\r\n    return map.fitBounds(bounds);\r\n}","// GTW Language\r\n\r\nimport * as Settings from './gtw-settings';\r\n\r\nexport const languages = {\r\n    \"en\": \"English\",\r\n    \"zh\": \"\\u7e41\\u9ad4\\u4e2d\\u6587\"\r\n};\r\n\r\nexport function localizedKey(localizedObject, key) {\r\n    var lang = getLanguage();\r\n    var locale = getLocale();\r\n\r\n    var langKey = key + \"_\" + lang;\r\n    var localeKey = key + \"_\" + locale;\r\n    var enKey = key + \"_en\";\r\n\r\n    if (localizedObject[langKey]) {\r\n        return localizedObject[langKey];\r\n    }\r\n\r\n    if (localizedObject[localeKey]) {\r\n        return localizedObject[localeKey];\r\n    }\r\n\r\n    if (localizedObject[enKey]) {\r\n        return localizedObject[enKey];\r\n    }\r\n\r\n    if (localizedObject[key]) {\r\n        return localizedObject[key];\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\nexport function getLanguage() {\r\n    return Settings.get(\"preferred_language\", \"en\");\r\n};\r\n\r\nexport function getLocale() {\r\n    return Settings.get(\"preferred_language\", \"en\").split(\"-\")[0];\r\n};\r\n\r\nexport function changeLanguage(locale) {\r\n    var found = false;\r\n    for (var x in languages) {\r\n        if (locale === x) {\r\n            found = true;\r\n            break;\r\n        }\r\n    }\r\n    if (!found) {\r\n        return false;\r\n    }\r\n\r\n    Settings.set(\"preferred_language\", locale);\r\n    Settings.save();\r\n    $.i18n().locale = locale;\r\n    return $.i18n().load(\"i18n/\" + locale + \".json\", locale).done(function () {\r\n        $(\"body\").i18n();\r\n    });\r\n}","//City Data: Transit Stops\r\n\r\nimport * as Misc from './gtw-misc';\r\nimport * as Database from './gtw-db';\r\n\r\nvar providers = [];\r\n\r\nexport function registerProvider(type, id, name, provider) {\r\n    if (!provider.fetchDatabase || typeof provider.fetchDatabase !== \"function\" ||\r\n        !provider.isDatabaseUpdateNeeded || typeof provider.isDatabaseUpdateNeeded !== \"function\") {\r\n        throw new Error(\"Error: \" + name + \" does not contain fetchDatabase or isDatabaseUpdateNeeded function!\");\r\n    }\r\n\r\n    provider.type = type;\r\n    provider.id = id;\r\n\r\n    if (typeof name === \"object\") {\r\n        provider[\"name\"] = name[\"default\"];\r\n        for (var key in name) {\r\n            provider[\"name_\" + key] = name[key];\r\n        }\r\n    } else {\r\n        provider.name = name;\r\n    }\r\n\r\n    provider.db = false;\r\n\r\n    provider.getStop = function (stopId) {\r\n        if (!this.db) {\r\n            return false;\r\n        }\r\n        var i;\r\n        for (i = 0; i < this.db.stops.length; i++) {\r\n            if (this.db.stops[i].stopId === stopId) {\r\n                return this.db.stops[i];\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n\r\n    provider.getStopById = function (stopId) {\r\n        var stops = this.getStops();\r\n        for (var stop of stops) {\r\n            if (stop.stopId === stopId) {\r\n                return stop;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n\r\n    provider.getStops = function () {\r\n        return this.db ? this.db.stops : [];\r\n    };\r\n\r\n    providers.push(provider);\r\n}\r\n\r\nexport function unregisterProvider(id) {\r\n    var found = -1;\r\n    for (var i = 0; i < providers.length; i++) {\r\n        if (providers[i].id === id) {\r\n            found = i;\r\n        }\r\n    }\r\n    providers.splice(found, 1);\r\n}\r\n\r\nexport function getProviders() {\r\n    return providers;\r\n}\r\n\r\nexport function getProvider(id) {\r\n    for (var provider of providers) {\r\n        if (provider.id === id) {\r\n            return provider;\r\n        }\r\n    }\r\n    return false;\r\n}\r\n\r\nexport function fetchAllDatabase(pc) {\r\n    return new Promise((resolve, reject) => {\r\n        var proms = [];\r\n        for (var provider of providers) {\r\n            proms.push(Database.getTransitStopsByProvider(provider.id).then(function (db) {\r\n                if (!db) {\r\n                    return;\r\n                }\r\n                var TransitStops = require(\"./gtw-citydata-transit-stops\");\r\n                var provider = TransitStops.getProvider(db.provider);\r\n                if (provider) {\r\n                    provider.db = db;\r\n                }\r\n            }).catch(reject));\r\n        }\r\n        Promise.all(proms).then(function () {\r\n            var needs = {};\r\n            var proms = [];\r\n            var p;\r\n            for (var provider of providers) {\r\n                if (provider.db) {\r\n                    p = new Promise((resolve, reject) => {\r\n                        provider.isDatabaseUpdateNeeded(resolve, reject, provider.db.version);\r\n                    });\r\n                    p.then(function (needed) {\r\n                        needs[provider.id] = needed;\r\n                    }).catch(function () {\r\n                        console.error(\"Error: Database check update for \" + provider.id + \" failed!\");\r\n                        needs[provider.id] = false;\r\n                    });\r\n                    proms.push(p);\r\n                } else {\r\n                    needs[provider.id] = true;\r\n                }\r\n            }\r\n            Promise.all(proms).then(function () {\r\n                var proms = [];\r\n                var p;\r\n                for (var provider of providers) {\r\n                    if (needs[provider.id]) {\r\n                        p = new Promise((resolve, reject) => {\r\n                            provider.fetchDatabase(resolve, reject);\r\n                        });\r\n                        p.then(function (data) {\r\n                            const { type, provider, stops, version } = data;\r\n\r\n                            if (!type || !provider || !stops || !version) {\r\n                                console.error(\"Error: Returned stops database is in wrong structure for \" + (provider ? provider : \"unknown provider\") + \".\");\r\n                                return;\r\n                            }\r\n\r\n                            var db = {\r\n                                type: type,\r\n                                provider: provider,\r\n                                stops: stops,\r\n                                version: version\r\n                            };\r\n\r\n                            var TransitStops = require(\"./gtw-citydata-transit-stops\");\r\n                            var providerObj = TransitStops.getProvider(data.provider);\r\n                            providerObj.db = db;\r\n\r\n                            return Database.putTransitStops(db);\r\n                        });\r\n                        proms.push(p);\r\n                    }\r\n                }\r\n                Misc.allProgress(proms, pc).then(resolve).catch(reject);\r\n            });\r\n        }).catch(reject);\r\n    });\r\n}\r\n\r\nexport function getAllStops() {\r\n    var allStops = [];\r\n    for (var provider of providers) {\r\n        if (provider) {\r\n            var stops = provider.getStops();\r\n            if (stops && stops.length > 0) {\r\n                allStops = allStops.concat(stops);\r\n            }\r\n        }\r\n    }\r\n    return allStops;\r\n}\r\n\r\nexport function getAllStopsNearby(lat, lng, range, sorted = true) {\r\n    var allStops = getAllStops();\r\n    var stops = [];\r\n    var stop;\r\n    var d;\r\n    for (var i = 0; i < allStops.length; i++) {\r\n        stop = allStops[i];\r\n        d = Misc.geoDistance(lat, lng, stop.lat, stop.lng);\r\n        if (d <= range) {\r\n            stops.push({\r\n                stop: stop,\r\n                distance: d\r\n            });\r\n        }\r\n    }\r\n\r\n    if (sorted) {\r\n        stops.sort(function (a, b) {\r\n            if (a.distance < b.distance) {\r\n                return -1;\r\n            } else if (a.distance > b.distance) {\r\n                return 1;\r\n            } else {\r\n                return 0;\r\n            }\r\n        });\r\n    }\r\n\r\n    return stops;\r\n}\r\n\r\nexport function getStopById(stopId) {\r\n    var allStops = getAllStops();\r\n    var i;\r\n    for (i = 0; i < allStops.length; i++) {\r\n        if (stopId === allStops[i].stopId) {\r\n            return allStops[i];\r\n        }\r\n    }\r\n    return false;\r\n}","//GTW Settings\r\n\r\nconst SETTINGS_STORAGE_KEY = \"gtw-settings\";\r\n\r\nconst VALUE_TYPES = {\r\n    number: \"number\",\r\n    string: \"string\",\r\n    boolean: \"boolean\"\r\n};\r\n\r\nexport function getDefaultSettings() {\r\n    return [\r\n        {\r\n            key: \"preferred_language\",\r\n            type: \"string\",\r\n            name: $.i18n(\"settings-key-preferred-language\"),\r\n            desc: $.i18n(\"settings-key-preferred-language-desc\"),\r\n            def: \"en\",\r\n            checkfunc: function (val) {\r\n                var locales = require(\"./gtw-lang\").languages;\r\n                var found = false;\r\n                for (var locale in locales) {\r\n                    if (locale === val) {\r\n                        found = true;\r\n                        break;\r\n                    }\r\n                }\r\n                return found;\r\n            }\r\n        },\r\n        {\r\n            key: \"min_nearby_transit_range\",\r\n            type: \"number\",\r\n            name: $.i18n(\"settings-key-min-nearby-transit-search-range\"),\r\n            desc: $.i18n(\"settings-key-min-nearby-transit-search-range-desc\"),\r\n            def: 200,\r\n            checkfunc: function (val) {\r\n                var x = parseInt(val);\r\n                return !Number.isNaN(x) && x < 10000;\r\n            }\r\n        },\r\n        {\r\n            key: \"max_nearby_transit_to_display\",\r\n            type: \"number\",\r\n            name: $.i18n(\"settings-key-max-nearby-transit-to-be-displayed\"),\r\n            desc: $.i18n(\"settings-key-max-nearby-transit-to-be-displayed-desc\"),\r\n            def: 20,\r\n            checkfunc: function (val) {\r\n                var x = parseInt(val);\r\n                return !Number.isNaN(x) && x < 100;\r\n            }\r\n        },\r\n        {\r\n            key: \"use_cors_proxy\",\r\n            type: \"boolean\",\r\n            name: $.i18n(\"settings-key-use-cors-proxy\"),\r\n            desc: $.i18n(\"settings-key-use-cors-proxy-desc\"),\r\n            def: true\r\n        },\r\n        {\r\n            key: \"cors_proxy_server\",\r\n            type: \"string\",\r\n            name: $.i18n(\"settings-key-cors-proxy-server\"),\r\n            desc: $.i18n(\"settings-key-cors-proxy-server-desc\"),\r\n            def: \"https://cp1.gotowhere.ga/\",\r\n            checkfunc: function (val) {\r\n                return val.startsWith(\"https://\") && val.endsWith(\"/\")\r\n            }\r\n        },\r\n        {\r\n            key: \"cors_check_bypass\",\r\n            type: \"boolean\",\r\n            name: $.i18n(\"settings-key-cors-check-bypass\"),\r\n            desc: $.i18n(\"settings-key-cors-check-bypass-desc\"),\r\n            def: false\r\n        }\r\n    ];\r\n}\r\n\r\nexport var json = {};\r\n\r\nexport function get(key, def = false) {\r\n    var val = json[key];\r\n    if (typeof val === 'undefined') {\r\n        return def;\r\n    }\r\n    return val;\r\n}\r\n\r\nexport function set(key, val) {\r\n    json[key] = val;\r\n    return true;\r\n}\r\n\r\nexport function load() {\r\n    if (!localStorage) {\r\n        return false;\r\n    }\r\n    var t = localStorage.getItem(SETTINGS_STORAGE_KEY);\r\n\r\n    if (!t) {\r\n        return save();\r\n    }\r\n\r\n    var j = JSON.parse(t);\r\n\r\n    if (!j) {\r\n        return false;\r\n    }\r\n\r\n    json = j;\r\n    return true;\r\n}\r\n\r\nexport function save() {\r\n    if (!localStorage) {\r\n        return false;\r\n    }\r\n    localStorage.setItem(SETTINGS_STORAGE_KEY, JSON.stringify(json));\r\n    return true;\r\n}","//GTW Misc\r\n\r\nexport function geoDistance(lat1, lon1, lat2, lon2) {\r\n    var p = 0.017453292519943295;    // Math.PI / 180\r\n    var c = Math.cos;\r\n    var a = 0.5 - c((lat2 - lat1) * p) / 2 +\r\n        c(lat1 * p) * c(lat2 * p) *\r\n        (1 - c((lon2 - lon1) * p)) / 2;\r\n\r\n    return 12742 * Math.asin(Math.sqrt(a)); // 2 * R; R = 6371 km\r\n}\r\n\r\nexport function allProgress(proms, progress_cb) {\r\n    let d = 0;\r\n    progress_cb(0);\r\n    for (const p of proms) {\r\n        p.then(() => {\r\n            d++;\r\n            progress_cb((d * 100) / proms.length);\r\n        });\r\n    }\r\n    return Promise.all(proms);\r\n}\r\n\r\nexport function isSamePropertyValueInArray(array, name, value) {\r\n    for (var object of array) {\r\n        if (object[name] === value) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\n\r\nexport function fillZero(number) {\r\n    return number < 10 ? (\"0\" + number) : number;\r\n}\r\n\r\nexport function similarity(s1, s2) {\r\n    var longer = s1;\r\n    var shorter = s2;\r\n    if (s1.length < s2.length) {\r\n        longer = s2;\r\n        shorter = s1;\r\n    }\r\n    var longerLength = longer.length;\r\n    if (longerLength == 0) {\r\n        return 1.0;\r\n    }\r\n    return (longerLength - editDistance(longer, shorter)) / parseFloat(longerLength);\r\n}\r\n\r\nexport function editDistance(s1, s2) {\r\n    s1 = s1.toLowerCase();\r\n    s2 = s2.toLowerCase();\r\n\r\n    var costs = new Array();\r\n    for (var i = 0; i <= s1.length; i++) {\r\n        var lastValue = i;\r\n        for (var j = 0; j <= s2.length; j++) {\r\n            if (i == 0)\r\n                costs[j] = j;\r\n            else {\r\n                if (j > 0) {\r\n                    var newValue = costs[j - 1];\r\n                    if (s1.charAt(i - 1) != s2.charAt(j - 1))\r\n                        newValue = Math.min(Math.min(newValue, lastValue),\r\n                            costs[j]) + 1;\r\n                    costs[j - 1] = lastValue;\r\n                    lastValue = newValue;\r\n                }\r\n            }\r\n        }\r\n        if (i > 0)\r\n            costs[s2.length] = lastValue;\r\n    }\r\n    return costs[s2.length];\r\n}","//City Data: Transit Routes\r\n\r\nimport * as Misc from './gtw-misc';\r\nimport * as Database from './gtw-db';\r\n\r\nvar providers = [];\r\n\r\nexport function registerProvider(type, id, name, provider) {\r\n    if (!provider.fetchDatabase || typeof provider.fetchDatabase !== \"function\" ||\r\n        !provider.isDatabaseUpdateNeeded || typeof provider.isDatabaseUpdateNeeded !== \"function\") {\r\n        throw new Error(\"Error: \" + name + \" does not contain fetchDatabase or isDatabaseUpdateNeeded function!\");\r\n    }\r\n\r\n    provider.type = type;\r\n    provider.id = id;\r\n\r\n    if (typeof name === \"object\") {\r\n        provider[\"name\"] = name[\"default\"];\r\n        for (var key in name) {\r\n            provider[\"name_\" + key] = name[key];\r\n        }\r\n    } else {\r\n        provider.name = name;\r\n    }\r\n\r\n    provider.db = false;\r\n\r\n    provider.getRoute = function (routeId) {\r\n        if (!this.db) {\r\n            return false;\r\n        }\r\n        var i;\r\n        for (i = 0; i < this.db.routes.length; i++) {\r\n            if (this.db.routes[i].routeId === routeId) {\r\n                return this.db.routes[i];\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n\r\n    provider.getRouteById = function (routeId) {\r\n        var routes = this.getRoutes();\r\n        for (var route of routes) {\r\n            if (route.routeId === routeId) {\r\n                return route;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n\r\n    provider.getRoutes = function () {\r\n        return this.db ? this.db.routes : [];\r\n    };\r\n\r\n    providers.push(provider);\r\n}\r\n\r\nexport function unregisterProvider(id) {\r\n    var found = -1;\r\n    for (var i = 0; i < providers.length; i++) {\r\n        if (providers[i].id === id) {\r\n            found = i;\r\n        }\r\n    }\r\n    providers.splice(found, 1);\r\n}\r\n\r\nexport function getProviders() {\r\n    return providers;\r\n}\r\n\r\nexport function getProvider(id) {\r\n    for (var provider of providers) {\r\n        if (provider.id === id) {\r\n            return provider;\r\n        }\r\n    }\r\n    return false;\r\n}\r\n\r\nexport function fetchAllDatabase(pc) {\r\n    return new Promise((resolve, reject) => {\r\n        var proms = [];\r\n        for (var provider of providers) {\r\n            proms.push(Database.getTransitRoutesByProvider(provider.id).then(function (db) {\r\n                if (!db) {\r\n                    return;\r\n                }\r\n                var TransitRoutes = require(\"./gtw-citydata-transit-routes\");\r\n                var provider = TransitRoutes.getProvider(db.provider);\r\n                if (provider) {\r\n                    provider.db = db;\r\n                }\r\n            }).catch(reject));\r\n        }\r\n        Promise.all(proms).then(function () {\r\n            var needs = {};\r\n            var proms = [];\r\n            var p;\r\n            for (var provider of providers) {\r\n                if (provider.db) {\r\n                    p = new Promise((resolve, reject) => {\r\n                        provider.isDatabaseUpdateNeeded(resolve, reject, provider.db.version);\r\n                    });\r\n                    p.then(function (needed) {\r\n                        needs[provider.id] = needed;\r\n                    }).catch(function () {\r\n                        console.error(\"Error: Database check update for \" + provider.id + \" failed!\");\r\n                        needs[provider.id] = false;\r\n                    });\r\n                    proms.push(p);\r\n                } else {\r\n                    needs[provider.id] = true;\r\n                }\r\n            }\r\n            Promise.all(proms).then(function () {\r\n                var proms = [];\r\n                var p;\r\n                for (var provider of providers) {\r\n                    if (needs[provider.id]) {\r\n                        p = new Promise((resolve, reject) => {\r\n                            provider.fetchDatabase(resolve, reject);\r\n                        });\r\n                        p.then(function (data) {\r\n                            const { type, provider, routes, version } = data;\r\n\r\n                            if (!type || !provider || !routes || !version) {\r\n                                console.error(\"Error: Returned routes database is in wrong structure for \" + (provider ? provider : \"unknown provider\") + \".\");\r\n                                return;\r\n                            }\r\n\r\n                            var db = {\r\n                                type: type,\r\n                                provider: provider,\r\n                                routes: routes,\r\n                                version: version\r\n                            };\r\n\r\n                            var TransitRoutes = require(\"./gtw-citydata-transit-routes\");\r\n                            var providerObj = TransitRoutes.getProvider(data.provider);\r\n                            providerObj.db = db;\r\n\r\n                            return Database.putTransitRoutes(db);\r\n                        });\r\n                        proms.push(p);\r\n                    }\r\n                }\r\n                Misc.allProgress(proms, pc).then(resolve).catch(reject);\r\n            });\r\n        }).catch(reject);\r\n    });\r\n}\r\n\r\nexport function getAllRoutes() {\r\n    var allRoutes = [];\r\n    for (var provider of providers) {\r\n        if (provider) {\r\n            var routes = provider.getRoutes();\r\n            if (routes && routes.length > 0) {\r\n                allRoutes = allRoutes.concat(routes);\r\n            }\r\n        }\r\n    }\r\n    return allRoutes;\r\n}\r\n\r\nexport function getRouteById(routeId) {\r\n    var allRoutes = getAllRoutes();\r\n    var i;\r\n    for (i = 0; i < allRoutes.length; i++) {\r\n        if (routeId === allRoutes[i].routeId) {\r\n            return allRoutes[i];\r\n        }\r\n    }\r\n    return false;\r\n}","// GTW Plugin Loader\r\n\r\nimport * as Misc from './gtw-misc';\r\nimport repos from './plugins/repository.json';\r\n\r\nexport var plugins = {};\r\n\r\nexport var installedPlugins = [];\r\n\r\nexport function install(pkg, autoSave) {\r\n    if (isInstalled(pkg)) {\r\n        return false;\r\n    }\r\n    installedPlugins.push(pkg);\r\n    if (autoSave !== false){\r\n        save();\r\n    }\r\n    return true;\r\n}\r\n\r\nexport function uninstall(pkg, autoSave){\r\n    var i;\r\n    for (i = 0; i < installedPlugins.length; i++){\r\n        if (installedPlugins[i] === pkg){\r\n            installedPlugins.splice(i, 1);\r\n            if (autoSave !== false) {\r\n                save();\r\n            }\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\n\r\nexport function getPlugin(pkg) {\r\n    return plugins[pkg];\r\n}\r\n\r\nexport function isInstalled(pkg) {\r\n    for (var plugin of installedPlugins){\r\n        if (plugin === pkg){\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\n\r\nexport function save() {\r\n    var localStorage = window.localStorage;\r\n    localStorage.setItem(\"gtw-plugins\", JSON.stringify(installedPlugins));\r\n    return true;\r\n}\r\n\r\nexport function load(pc) {\r\n    if (!localStorage){\r\n        console.error(\"Error: LocalStorage is not supported in this browser.\");\r\n        return;\r\n    }\r\n\r\n    var pluginsStr = localStorage.getItem(\"gtw-plugins\");\r\n\r\n    if (pluginsStr) {\r\n        installedPlugins = JSON.parse(pluginsStr);\r\n    }\r\n    \r\n    if (!installedPlugins || typeof installedPlugins.length !== \"number\"){\r\n        console.warn(\"Warning: Installed plugins JSON string is invalid. Resetting as empty.\");\r\n        save();\r\n    }\r\n    \r\n    var p;\r\n    var proms = [];\r\n    for (var installedPlugin of installedPlugins) {\r\n        const info = {\r\n            \"package\": installedPlugin,\r\n            status: 1,\r\n            msg: \"Not Enabled\"\r\n        };\r\n\r\n        if (repos[installedPlugin]){\r\n            proms.push(new Promise((resolve, reject) => {\r\n                import(\"./plugins/\" + installedPlugin).then(function(mod) {\r\n                    var msg;\r\n                    if (!mod) {\r\n                        msg = $.i18n(\"plugin-error-no-module-returned\", pkg);\r\n                        console.error(msg);\r\n                        info.status = -2;\r\n                        info.msg = msg;\r\n                    } else if (!mod.onload || typeof mod.onload !== \"function\") {\r\n                        msg = $.i18n(\"plugin-error-no-onload-function\", pkg);\r\n                        console.error(msg);\r\n                        info.status = -3;\r\n                        info.msg = msg;\r\n                    } else {\r\n                        var promise = new Promise((resolve, reject) => {\r\n                            var status = mod.onload();\r\n                            if (status instanceof Promise) {\r\n                                status.then(resolve).catch(reject);\r\n                            } else {\r\n                                resolve(status);\r\n                            }\r\n                        });\r\n                        promise.then(function (status) {\r\n                            if (status) {\r\n                                info.status = 0;\r\n                                delete info.msg;\r\n                            } else {\r\n                                var msg = $.i18n(\"plugin-error-onload-function-error\", pkg);\r\n                                console.error(msg);\r\n                                info.status = -4;\r\n                                info.msg = msg;\r\n                            }\r\n                            resolve();\r\n                        }).catch(reject);\r\n                    }\r\n                });\r\n            }));\r\n        } else {\r\n            info.status = -1;\r\n            info.msg = \"This plugin is not available in this version of GoToWhere.\";\r\n        }\r\n        plugins[installedPlugin] = info;\r\n    }\r\n    return Misc.allProgress(proms, pc);\r\n}","//GTW Database\r\n\r\nvar dbPromise = false;\r\n\r\nexport function open() {\r\n    return dbPromise = new Promise((resolve, reject) => {\r\n        if (!('indexedDB' in window)) {\r\n            console.log('This browser doesn\\'t support IndexedDB');\r\n            return false;\r\n        }\r\n        var request = indexedDB.open(\"gotowhere-db\", 1);\r\n        request.onupgradeneeded = function (event) {\r\n            var db = event.target.result;\r\n            //Schema v1\r\n            console.log(\"Creating DB schema\");\r\n            if (!db.objectStoreNames.contains(\"transitRoutes\")) {\r\n                db.createObjectStore(\"transitRoutes\", { keyPath: 'provider' });\r\n            }\r\n            if (!db.objectStoreNames.contains(\"transitStops\")) {\r\n                db.createObjectStore(\"transitStops\", { keyPath: 'provider' });\r\n            }\r\n            if (!db.objectStoreNames.contains(\"transitReference\")) {\r\n                db.createObjectStore(\"transitReference\", { keyPath: 'provider' });\r\n            }\r\n            if (!db.objectStoreNames.contains(\"pluginStorage\")) {\r\n                db.createObjectStore(\"pluginStorage\", { keyPath: 'package' });\r\n            }\r\n        };\r\n        request.onsuccess = function (event) {\r\n            resolve(request.result);\r\n        };\r\n        request.onerror = reject;\r\n    });\r\n};\r\n\r\nexport function query(func) {\r\n    if (typeof func === \"function\") {\r\n        return dbPromise.then(func);\r\n    }\r\n};\r\n\r\nexport function putPluginStorage(pkg, data) {\r\n    return dbPromise.then(function (db) {\r\n        var tx = db.transaction(\"pluginStorage\", \"readwrite\");\r\n        var store = tx.objectStore(\"pluginStorage\");\r\n        var clone = Object.assign({}, data);\r\n        store.put({\r\n            package: pkg,\r\n            data: clone\r\n        });\r\n        return tx.complete;\r\n    });\r\n};\r\n\r\nexport function getPluginStorage(pkg) {\r\n    return new Promise((resolve, reject) => {\r\n        dbPromise.then(function (db) {\r\n            var tx = db.transaction(\"pluginStorage\", \"readonly\");\r\n            var store = tx.objectStore(\"pluginStorage\");\r\n            var request = store.get(pkg);\r\n            request.onsuccess = function () {\r\n                resolve(request.result ? request.result.data : false);\r\n            };\r\n            request.onerror = reject;\r\n        });\r\n    });\r\n}\r\n\r\nexport function getTransitRoutesByProvider(provider) {\r\n    return new Promise((resolve, reject) => {\r\n        dbPromise.then(function (db) {\r\n            var tx = db.transaction(\"transitRoutes\", \"readonly\");\r\n            var store = tx.objectStore(\"transitRoutes\");\r\n            var request = store.get(provider);\r\n            request.onsuccess = function () {\r\n                resolve(request.result);\r\n            };\r\n            request.onerror = reject;\r\n        });\r\n    });\r\n}\r\n\r\nexport function putTransitRoutes(db) {\r\n    const { type, provider, routes, version } = db;\r\n    if (!type || !provider || !routes || !version) {\r\n        console.error(\"Error: Invalid routes database structure from \" + (provider ? provider : \"unknown provider\") + \".\");\r\n        return false;\r\n    }\r\n    for (var route of routes) {\r\n        const { type, provider, routeId, routeName, etaProviders, paths } = route;\r\n        if (!type || !provider || !routeId || !routeName || !etaProviders || !paths || !etaProviders.length || !paths.length) {\r\n            console.error(\"Error: Invalid database route structure from \" + (db.provider ? db.provider : \"unknown provider\") + \".\");\r\n            return false;\r\n        }\r\n    }\r\n    var clone = Object.assign({}, db);\r\n    return dbPromise.then(function (db) {\r\n        var tx = db.transaction(\"transitRoutes\", \"readwrite\");\r\n        var store = tx.objectStore(\"transitRoutes\");\r\n        store.put(clone);\r\n        return tx.complete;\r\n    });\r\n}\r\n\r\nexport function getTransitStopsByProvider(provider) {\r\n    return new Promise((resolve, reject) => {\r\n        dbPromise.then(function (db) {\r\n            var tx = db.transaction(\"transitStops\", \"readonly\");\r\n            var store = tx.objectStore(\"transitStops\");\r\n            var request = store.get(provider);\r\n            request.onsuccess = function () {\r\n                resolve(request.result);\r\n            };\r\n            request.onerror = reject;\r\n        });\r\n    });\r\n}\r\n\r\nexport function putTransitStops(db) {\r\n    const { type, provider, stops, version } = db;\r\n    if (!type || !provider || !stops || !version) {\r\n        console.error(\"Error: Invalid stops database structure from \" + (provider ? provider : \"unknown provider\") + \".\");\r\n        return false;\r\n    }\r\n    for (var stop of stops) {\r\n        const { type, provider, stopId, stopName, addr, lat, lng } = stop;\r\n        if (!type || !provider || !stopId || !stopName || !addr || !lat || !lng || typeof lat !== \"number\" || typeof lng !== \"number\") {\r\n            console.error(\"Error: Invalid database stop structure from \" + (db.provider ? db.provider : \"unknown provider\") + \".\");\r\n            return false;\r\n        }\r\n    }\r\n    var clone = Object.assign({}, db);\r\n    return dbPromise.then(function (db) {\r\n        var tx = db.transaction(\"transitStops\", \"readwrite\");\r\n        var store = tx.objectStore(\"transitStops\");\r\n        store.put(clone);\r\n        return tx.complete;\r\n    });\r\n}\r\n\r\nexport function getTransitReferenceByProvider(provider) {\r\n    return new Promise((resolve, reject) => {\r\n        dbPromise.then(function (db) {\r\n            var tx = db.transaction(\"transitReference\", \"readonly\");\r\n            var store = tx.objectStore(\"transitReference\");\r\n            var request = store.get(provider);\r\n            request.onsuccess = function () {\r\n                resolve(request.result);\r\n            };\r\n            request.onerror = reject;\r\n        });\r\n    });\r\n}\r\n\r\nexport function putTransitReference(db) {\r\n    const { type, provider, routes, stops, version } = db;\r\n    if (!type || !provider || !routes || !stops || !version) {\r\n        console.error(\"Error: Invalid reference database structure from \" + (provider ? provider : \"unknown provider\") + \".\");\r\n        return false;\r\n    }\r\n    for (var route of routes) {\r\n        const { type, provider, routeId, routeName, etaProviders, paths } = route;\r\n        if (!type || !provider || !routeId || !routeName || !etaProviders || !paths || !etaProviders.length) { //|| !paths.length) {\r\n            console.error(\"Error: Invalid reference database route structure from \" + (db.provider ? db.provider : \"unknown provider\") + \".\");\r\n            return false;\r\n        }\r\n    }\r\n    for (var stop of stops) {\r\n        const { type, provider, stopId, stopName, addr, lat, lng } = stop;\r\n        if (!type || !provider || !stopId || !stopName || !addr || lat === undefined || lng === undefined || typeof lat !== \"number\" || typeof lng !== \"number\") {\r\n            console.error(\"Error: Invalid reference database stop structure from \" + (db.provider ? db.provider : \"unknown provider\") + \".\");\r\n            return false;\r\n        }\r\n    }\r\n    var clone = Object.assign({}, db);\r\n    return dbPromise.then(function (db) {\r\n        var tx = db.transaction(\"transitReference\", \"readwrite\");\r\n        var store = tx.objectStore(\"transitReference\");\r\n        store.put(clone);\r\n        return tx.complete;\r\n    });\r\n}","//City Data: Transit ETA\r\nimport * as Misc from './gtw-misc';\r\nimport * as Database from './gtw-db';\r\n\r\nvar providers = [];\r\n\r\nvar cache = {};\r\n\r\nexport function clearCache() {\r\n    cache = {};\r\n}\r\n\r\nexport function timeDifference(a, b) {\r\n    var x = a.hr * 60 + a.min;\r\n    var y = b.hr * 60 + b.min;\r\n    return x - y;\r\n}\r\n\r\nexport function registerProvider(type, id, name, provider) {\r\n    if (!provider.fetchEta || typeof provider.fetchEta !== \"function\" ||\r\n        !provider.fetchDatabase || typeof provider.fetchDatabase !== \"function\" ||\r\n        !provider.isDatabaseUpdateNeeded || typeof provider.isDatabaseUpdateNeeded !== \"function\") {\r\n        throw new Error(\"Error: \" + id + \" does not contain fetchEta, fetchDatabase or isDatabaseUpdateNeeded function!\");\r\n    }\r\n\r\n    provider.type = type;\r\n    provider.id = id;\r\n    provider.db = false;\r\n\r\n    if (typeof name === \"object\") {\r\n        provider[\"name\"] = name[\"default\"];\r\n        for (var key in name) {\r\n            provider[\"name_\" + key] = name[key];\r\n        }\r\n    } else {\r\n        provider.name = name;\r\n    }\r\n\r\n    provider.getRoute = function (routeId) {\r\n        if (!this.db) {\r\n            return false;\r\n        }\r\n        var i;\r\n        for (i = 0; i < this.db.routes.length; i++) {\r\n            if (this.db.routes[i].routeId === routeId) {\r\n                return this.db.routes[i];\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n\r\n    provider.getRouteById = function (routeId) {\r\n        var routes = this.getRoutes();\r\n        for (var route of routes) {\r\n            if (route.routeId === routeId) {\r\n                return route;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n\r\n    provider.getRoutes = function () {\r\n        return this.db ? this.db.routes : [];\r\n    };\r\n\r\n    provider.getStop = function (stopId) {\r\n        if (!this.db) {\r\n            return false;\r\n        }\r\n        var i;\r\n        for (i = 0; i < this.db.stops.length; i++) {\r\n            if (this.db.stops[i].stopId === stopId) {\r\n                return this.db.stops[i];\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n\r\n    provider.getStopById = function (stopId) {\r\n        var stops = this.getStops();\r\n        for (var stop of stops) {\r\n            if (stop.stopId === stopId) {\r\n                return stop;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n\r\n    provider.getStops = function () {\r\n        return this.db ? this.db.stops : [];\r\n    };\r\n\r\n    providers.push(provider);\r\n}\r\n\r\nexport function unregisterProvider(id) {\r\n    var found = -1;\r\n    for (var i = 0; i < providers.length; i++) {\r\n        if (providers[i].id === id) {\r\n            found = i;\r\n        }\r\n    }\r\n    providers.splice(found, 1);\r\n}\r\n\r\nexport function getProviders() {\r\n    return providers;\r\n}\r\n\r\nexport function getProvider(id) {\r\n    for (var provider of providers) {\r\n        if (provider.id === id) {\r\n            return provider;\r\n        }\r\n    }\r\n    return false;\r\n}\r\n\r\nexport function fetchAllDatabase(pc) {\r\n    return new Promise((resolve, reject) => {\r\n        var proms = [];\r\n        for (var provider of providers) {\r\n            proms.push(Database.getTransitReferenceByProvider(provider.id).then(function (db) {\r\n                if (!db) {\r\n                    return;\r\n                }\r\n                var TransitEta = require('./gtw-citydata-transit-eta.js');\r\n                var provider = TransitEta.getProvider(db.provider);\r\n                if (provider) {\r\n                    provider.db = db;\r\n                }\r\n            }).catch(reject));\r\n        }\r\n        Promise.all(proms).then(function () {\r\n            var needs = {};\r\n            var proms = [];\r\n            var p;\r\n            for (var provider of providers) {\r\n                if (provider.db) {\r\n                    p = new Promise((resolve, reject) => {\r\n                        provider.isDatabaseUpdateNeeded(resolve, reject, provider.db.version);\r\n                    });\r\n                    p.then(function (needed) {\r\n                        needs[provider.id] = needed;\r\n                    }).catch(function () {\r\n                        console.error(\"Error: Database check update for \" + provider.id + \" failed!\");\r\n                        needs[provider.id] = false;\r\n                    });\r\n                    proms.push(p);\r\n                } else {\r\n                    needs[provider.id] = true;\r\n                }\r\n            }\r\n            Promise.all(proms).then(function () {\r\n                var proms = [];\r\n                var p;\r\n                console.log(needs);\r\n                for (var provider of providers) {\r\n                    if (needs[provider.id]) {\r\n                        p = new Promise((resolve, reject) => {\r\n                            provider.fetchDatabase(resolve, reject);\r\n                        });\r\n                        p.then(function (data) {\r\n                            const { type, provider, routes, stops, version } = data;\r\n\r\n                            if (!type || !provider || !routes || !stops || !version) {\r\n                                console.error(\"Error: Returned reference database is in wrong structure for \" + (provider ? provider : \"unknown provider\") + \".\");\r\n                                return;\r\n                            }\r\n\r\n                            var db = {\r\n                                type: type,\r\n                                provider: provider,\r\n                                routes: routes,\r\n                                stops: stops,\r\n                                version: version\r\n                            };\r\n\r\n                            var TransitEta = require('./gtw-citydata-transit-eta.js');\r\n                            var providerObj = TransitEta.getProvider(data.provider);\r\n                            providerObj.db = db;\r\n\r\n                            return Database.putTransitReference(db);\r\n                        });\r\n                        proms.push(p);\r\n                    }\r\n                }\r\n                Misc.allProgress(proms, pc).then(resolve).catch(reject);\r\n            });\r\n        }).catch(reject);\r\n    });\r\n}\r\n\r\nexport function fetchEta(opt) {\r\n    return new Promise((resolve, reject) => {\r\n        var proms = [];\r\n        var count = 0;\r\n        for (var providerId of opt.etaProviders) {\r\n            proms.push(new Promise((resolve, reject) => {\r\n                var provider = getProvider(providerId);\r\n\r\n                if (!provider) {\r\n                    resolve();\r\n                    console.log(\"Could not find registered Transit ETA provider with name \\\"\" + providerId + \"\\\"\");\r\n                    return;\r\n                }\r\n\r\n                count++;\r\n\r\n                var key = providerId + \"-\" + opt.routeId + \"-\" + opt.selectedPath + \"-\" + opt.stopId;\r\n                var cached = cache[key];\r\n                var now = new Date();\r\n\r\n                if (cached && (now - cached.lastFetched) > 30000) {\r\n                    cached = false;\r\n                    delete cache[key];\r\n                }\r\n\r\n                if (!cached) {\r\n                    var global = this;\r\n                    var p = new Promise((resolve, reject) => {\r\n                        provider.fetchEta(resolve, reject, opt);\r\n                    });\r\n                    p.then(function (scheObj) {\r\n                        if (!scheObj) {\r\n                            resolve(false);\r\n                            return;\r\n                        }\r\n\r\n                        const { schedules, options } = scheObj;\r\n                        if (!schedules || !options) {\r\n                            console.error(\"Error: Plugin returned a TransitSchedule object with invalid structure.\");\r\n                            reject(opt, \"Invalid TransitSchedule structure\");\r\n                            return;\r\n                        }\r\n\r\n                        for (var sche of schedules) {\r\n                            if (sche.type === undefined || sche.provider === undefined || sche.serverTime === undefined || sche.msg === undefined && sche.time === undefined || isNaN(parseInt(sche.serverTime))) {\r\n                                console.error(\"Error: Plugin returned a TransitSchedule object with invalid schedules.\");\r\n                                reject(opt, \"Invalid TransitSchedule schedules\");\r\n                                return;\r\n                            }\r\n                        }\r\n\r\n                        var time = new Date();\r\n\r\n                        var out = {\r\n                            schedules: schedules,\r\n                            options: options\r\n                        };\r\n\r\n                        cache[key] = {\r\n                            lastFetched: time.getTime(),\r\n                            data: out\r\n                        };\r\n\r\n                        resolve(out);\r\n                    }).catch(function (err) {\r\n                        if (err) {\r\n                            console.error(err);\r\n                        }\r\n                        reject(opt, err);\r\n                    });\r\n                } else {\r\n                    resolve(cached.data);\r\n                }\r\n            }));\r\n        }\r\n        Promise.all(proms).then(function (values) {\r\n            if (count > 0) {\r\n                var schedules = [];\r\n                for (var value of values) {\r\n                    if (value && value.schedules) {\r\n                        schedules = schedules.concat(value.schedules);\r\n                    }\r\n                }\r\n                schedules.sort(function (a, b) {\r\n                    if (!a.time) {\r\n                        return 1;\r\n                    } else if (!b.time) {\r\n                        return -1;\r\n                    }\r\n                    return a.time - b.time;\r\n                });\r\n                resolve({\r\n                    schedules: schedules,\r\n                    options: opt,\r\n                    code: 0\r\n                })\r\n            } else if (opt.etaProviders && opt.etaProviders.length > 0) {\r\n                resolve({\r\n                    code: -2,\r\n                    options: opt\r\n                });\r\n            } else {\r\n                resolve({\r\n                    code: -1,\r\n                    options: opt\r\n                });\r\n            }\r\n        }).catch(reject);\r\n    });\r\n}\r\n\r\nexport function getCache() {\r\n    return cache;\r\n}","//GTW Location Manager\r\n\r\nimport * as Map from './gtw-map';\r\n\r\nconst LOCATION_MANAGER_CONVENTION_KEY = \"openeta-location-convention\";\r\n\r\nconst CONVENTION_ASK_EVERYTIME = \"CONVENTION_ASK_EVERYTIME\";\r\nconst CONVENTION_CUSTOM_LOCATION = \"CONVENTION_CUSTOM_LOCATION\";\r\nconst CONVENTION_ASK_LOCATION_ACCESS = \"CONVENTION_ASK_LOCATION_ACCESS\";\r\nconst CONVENTION_DIRECT_LOCATION_ACCESS = \"CONVENTION_DIRECT_LOCATION_ACCESS\";\r\nconst ERROR_NOT_SUPPORTED = 0;\r\nconst ERROR_NO_ACCESS = 1;\r\n\r\nexport var watchId = 0;\r\n\r\nexport var currentPosition = { lat: 22.2952296, lng: 114.1766577 };\r\n\r\nexport function getConvention() {\r\n    var localStorage = window.localStorage;\r\n    if (!localStorage || !localStorage.getItem(LOCATION_MANAGER_CONVENTION_KEY)) {\r\n        return CONVENTION_ASK_EVERYTIME;\r\n    }\r\n    return localStorage.getItem(LOCATION_MANAGER_CONVENTION_KEY);\r\n}\r\n\r\nexport function setConvention(convention) {\r\n    var localStorage = window.localStorage;\r\n    if (!localStorage) {\r\n        return;\r\n    }\r\n    localStorage.setItem(LOCATION_MANAGER_CONVENTION_KEY, convention);\r\n}\r\n\r\nexport function requestLocationAccess(successFunc = function () { }, errorFunc = function () { }) {\r\n    if (!navigator.geolocation) {\r\n        errorFunc(ERROR_NOT_SUPPORTED);\r\n        return;\r\n    }\r\n\r\n    var global = this;\r\n\r\n    navigator.geolocation.getCurrentPosition(function (position) {\r\n        currentPosition = {\r\n            lat: position.coords.latitude,\r\n            lng: position.coords.longitude\r\n        };\r\n\r\n        Map.setCenter(currentPosition);\r\n        Map.setZoom(16);\r\n\r\n        watchId = navigator.geolocation.watchPosition(\r\n            onPositionChangeSuccess,\r\n            onPositionChangeError,\r\n            {\r\n                enableHighAccuracy: false,\r\n                timeout: 5000,\r\n                maximumAge: 0\r\n            }\r\n        );\r\n        successFunc(currentPosition);\r\n    }, function () {\r\n        errorFunc(ERROR_NO_ACCESS);\r\n    }, { timeout: 5000 });\r\n}\r\n\r\nexport function getCurrentPosition() {\r\n    return currentPosition;\r\n}\r\n\r\nexport function onPositionChangeSuccess(position) {\r\n    currentPosition = {\r\n        lat: position.coords.latitude,\r\n        lng: position.coords.longitude\r\n    };\r\n}\r\n\r\nexport function onPositionChangeError(error) {\r\n    alert(\"TODO: Handle Position error!\")\r\n}","//GTW Request Limiter\r\n\r\nexport var requests = [];\r\n\r\nexport var duration = 500;\r\n\r\nexport var running = false;\r\n\r\nexport function queue(func, args) {\r\n    if (typeof func !== \"function\") {\r\n        throw new TypeError(\"The variable must be a 'function'.\");\r\n    }\r\n    requests.push([func, args]);\r\n    return func;\r\n}\r\n\r\nexport function stack(func, args) {\r\n    if (typeof func !== \"function\") {\r\n        throw new TypeError(\"The variable must be a 'function'.\");\r\n    }\r\n    requests.unshift([func, args]);\r\n    return func;\r\n}\r\n\r\nexport function start() {\r\n    if (running) {\r\n        return;\r\n    }\r\n\r\n    running = true;\r\n    dispatch();\r\n}\r\n\r\nexport function dispatch() {\r\n    var next = requests.shift();\r\n    var global = this;\r\n\r\n    if (next && typeof next[0] === 'function') {\r\n        next[0].apply(null, next[1]);\r\n    }\r\n\r\n    if (running) {\r\n        setTimeout(function () {\r\n            dispatch();\r\n        }, duration);\r\n    }\r\n}\r\n\r\nexport function stop() {\r\n    running = false;\r\n}\r\n\r\nexport function clear() {\r\n    requests = [];\r\n}","//GTW CORS Handling\r\n\r\nimport xhook from 'xhook';\r\n\r\nconst CORS_PROTOCOL = \"https://\";\r\n\r\nexport var domains = {};\r\n\r\nexport function register(domain, allowCors = false) {\r\n    var config = {};\r\n    config.allowCors = allowCors;\r\n    domains[domain] = config;\r\n}\r\n\r\nxhook.before(function (request, callback) {\r\n    var Cors = require(\"./gtw-cors\");\r\n    var Settings = require(\"./gtw-settings\");\r\n\r\n    if (Settings.get(\"cors_check_bypass\", false)) {\r\n        callback();\r\n        return;\r\n    }\r\n\r\n    var cors = Cors.isCors(request.url);\r\n\r\n    if (cors) {\r\n        var host = Cors.extractHost(request.url);\r\n\r\n        if (!host || host === \"\" || host === \"___local___\") {\r\n            callback();\r\n            return;\r\n        }\r\n\r\n        var config = Cors.domains[host];\r\n        if (!config) {\r\n            console.error(\"gtw-cors: The request to \\\"\" + host + \"\\\" was dropped, because this cross-domain host was not registered before performing AJAX.\");\r\n            callback({\r\n                status: 403,\r\n                statusText: 'The request is dropped by GoToWhere because this host was not registered before performing AJAX.',\r\n                headers: {}\r\n            });\r\n            return;\r\n        }\r\n\r\n        if (config.allowCors) {\r\n            callback();\r\n            return;\r\n        }\r\n\r\n        if (Settings.get(\"use_cors_proxy\", true)) {\r\n            var proxy = Settings.get(\"cors_proxy_server\", \"https://cp1.gotowhere.ga/\");\r\n            if (proxy.startsWith(\"https://\") && proxy.endsWith(\"/\")) {\r\n                var index = request.url.indexOf(\"http://\");\r\n                var sindex = request.url.indexOf(\"https://\");\r\n                if (index !== -1 && sindex === -1) {\r\n                    request.url = proxy + request.url.substring(index + 7);\r\n                } else if (index === -1 && sindex !== -1) {\r\n                    request.url = proxy + request.url.substring(sindex + 8);\r\n                } else {\r\n                    console.error(\"gtw-cors: Invalid URL: \" + request.url);\r\n                    callback({\r\n                        status: 403,\r\n                        statusText: 'Invalid URL: ' + request.url,\r\n                        headers: {}\r\n                    });\r\n                    return;\r\n                }\r\n            } else {\r\n                console.error(\"gtw-cors: The provided CORS Proxy server is invalid! Please check if the server URL in the settings is correct!\");\r\n                callback({\r\n                    status: 403,\r\n                    statusText: 'The provided CORS Proxy server is invalid! Please check if the server URL in the settings is correct!.',\r\n                    headers: {}\r\n                });\r\n                return;\r\n            }\r\n        } else {\r\n            console.error(\"gtw-cors: The request was dropped because there are no proxy available to handle CORS requests.\");\r\n            callback({\r\n                status: 403,\r\n                statusText: 'The request was dropped because there are no proxy available to handle CORS requests.',\r\n                headers: {}\r\n            });\r\n            return;\r\n        }\r\n    }\r\n\r\n    callback();\r\n});\r\n\r\nexport function extractHost(url) {\r\n    if (!url.includes(\"://\")) {\r\n        return \"___local___\";\r\n    } else if (url.startsWith(\"file://\")) {\r\n        return \"___file___\";\r\n    }\r\n    var i = url.indexOf(\"://\");\r\n    var last = url.substring(i + 3);\r\n\r\n    i = last.indexOf(\"/\");\r\n    if (i === -1) {\r\n        i = last.length();\r\n    }\r\n    return last.substring(0, i);\r\n}\r\n\r\nexport function isCors(url) {\r\n    if (!url.startsWith(CORS_PROTOCOL)) {\r\n        return true;\r\n    }\r\n\r\n    var host = extractHost(url);\r\n\r\n    if (domains[host]) {\r\n        var config = domains[host];\r\n        if (config.allowCors) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    return window.location.host !== host;\r\n}","//City Data: Transit (Misc functions)\r\nimport * as TransitRoutes from './gtw-citydata-transit-routes';\r\nimport * as TransitStops from './gtw-citydata-transit-stops';\r\nimport * as TransitEta from './gtw-citydata-transit-eta';\r\n\r\nwindow.TransitType = {\r\n    BUS: \"bus\",\r\n    MINIBUS: \"minibus\",\r\n    TRAM: \"tram\",\r\n    TRAIN: \"train\",\r\n    FERRY: \"ferry\"\r\n};\r\n\r\nexport function getAllRoutes() {\r\n    return TransitRoutes.getAllRoutes();\r\n}\r\n\r\nexport function getAllStops() {\r\n    return TransitStops.getAllStops();\r\n}\r\n\r\nexport function fetchAllDatabase (pc) {\r\n    var proms = [];\r\n    var first = 0;\r\n    var second = 0;\r\n    var third = 0;\r\n    proms.push(TransitRoutes.fetchAllDatabase(function (p) {\r\n        first = p;\r\n        pc((first + second + third) / 3);\r\n    }));\r\n    proms.push(TransitStops.fetchAllDatabase(function (p) {\r\n        second = p;\r\n        pc((first + second + third) / 3);\r\n    }));\r\n    proms.push(TransitEta.fetchAllDatabase(function (p) {\r\n        third = p;\r\n        pc((first + second + third) / 3);\r\n    }));\r\n    return Promise.all(proms);\r\n}\r\n\r\nexport function getStopIndex(route, stop, selectedPath) {\r\n    if (selectedPath < 0 || selectedPath >= route.paths.length) {\r\n        return -1;\r\n    }\r\n    var path = route.paths[selectedPath];\r\n    for (var i = 0; i < path.length; i++) {\r\n        var stopId = path[i];\r\n        if (stop.stopId === stopId) {\r\n            return i;\r\n        }\r\n    }\r\n    return -1;\r\n}\r\n\r\nexport function searchRoutesOfStop(stop) {\r\n    var out = [];\r\n\r\n    var allRoutes = getAllRoutes();\r\n    for (var route of allRoutes) {\r\n        var paths = route.paths;\r\n        for (var i = 0; i < paths.length; i++) {\r\n            var path = paths[i];\r\n            for (var stopId of path) {\r\n                if (stop.stopId === stopId) {\r\n                    out.push({\r\n                        route: route,\r\n                        bound: i\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    return out;\r\n}\r\n\r\nexport function getRoutesOfStop(stop) {\r\n    var result = searchRoutesOfStop(stop);\r\n\r\n    return result.map(function (value, index) {\r\n        return value[0];\r\n    });\r\n}","//GTW UI\r\n\r\nimport * as Transit from './gtw-citydata-transit';\r\nimport * as TransitRoutes from './gtw-citydata-transit-routes';\r\nimport * as TransitStops from './gtw-citydata-transit-stops';\r\nimport * as TransitEta from './gtw-citydata-transit-eta';\r\nimport * as Map from './gtw-map';\r\nimport * as Settings from './gtw-settings';\r\nimport * as RequestLimiter from './gtw-requestlimiter';\r\nimport * as PluginLoader from './gtw-pluginloader';\r\nimport * as Loc from './gtw-location';\r\nimport * as Misc from './gtw-misc';\r\nimport * as Lang from './gtw-lang';\r\nimport repos from './plugins/repository.json';\r\nimport cates from './plugins/categories.json';\r\n\r\n$(document).ready(function () {\r\n    $(\".header-links-plugins\").on(\"click\", function () {\r\n        showModal(\"pluginmanager\");\r\n    });\r\n    $(\".header-links-settings\").on(\"click\", function () {\r\n        showModal(\"settings\");\r\n    });\r\n    $(\".header-links-about\").on(\"click\", function () {\r\n        showModal(\"about\");\r\n    });\r\n});\r\n\r\n$(\".ui-tab\").on(\"click\", function () {\r\n    if ($(this).hasClass(\"btn-primary\")) {\r\n        return;\r\n    }\r\n    $(\".ui-tab\").removeClass(\"btn-primary\");\r\n    $(\".ui-tab\").removeClass(\"btn-link\");\r\n\r\n    var tab = $(this).attr(\"gtw-tab\");\r\n    $(this).addClass(\"btn-primary\");\r\n\r\n    $(\".ui-tab:not([gtw-tab='\" + tab + \"'])\").addClass(\"btn-link\");\r\n\r\n    showTab(tab);\r\n});\r\n\r\n$(\".ui-half-map-back-btn\").on(\"click\", function () {\r\n    clearInterval(timers[\"stopEtaUpdate\"]);\r\n    Map.setCenter(Loc.getCurrentPosition());\r\n    Map.setZoom(16);\r\n    Map.removeAllMarkers();\r\n    Map.removeAllPolylines();\r\n    showPanel();\r\n});\r\n\r\nvar currentTab = \"transitEta\";\r\n\r\nvar vars = {};\r\n\r\nvar modalVars = {};\r\n\r\nvar timers = {};\r\n \r\nvar modalTimers = [];\r\n\r\nvar searchTimeout;\r\n\r\nvar installCount = 0;\r\n\r\nexport function init() {\r\n    showTab(\"transitEta\");\r\n    adjustMargin();\r\n    showPanel();\r\n\r\n    if (Object.keys(PluginLoader.plugins).length === 0) {\r\n        gettingStarted();\r\n    }\r\n}\r\n\r\nvar gettingStarted_reposJson = {};\r\n\r\nexport function gettingStarted() {\r\n    $(\".header nav\").css(\"display\", \"none\");\r\n    $(\"#gettingStartedWizard\").smartWizard({\r\n        useURLhash: false,\r\n        showStepURLhash: false\r\n    });\r\n    $(\".top-panel\").css(\"display\", \"none\");\r\n    $(\".content-panel-container\").css(\"display\", \"none\");\r\n    $(\".getting-started-panel\").css(\"display\", \"block\");\r\n\r\n    var html = \"\";\r\n    for (var lang in Lang.languages) {\r\n        html += \"<option value=\\\"\" + lang + \"\\\">\" + Lang.languages[lang] + \" (\" + lang + \")</option>\";\r\n    }\r\n    $(\"#langSelect\").html(html);\r\n    $(\"#langSelect\").on(\"change\", function () {\r\n        Lang.changeLanguage($(this).val());\r\n    });\r\n\r\n    var byRegion = {};\r\n    for (var key in repos) {\r\n        if (!byRegion[repos[key].region]) {\r\n            byRegion[repos[key].region] = [];\r\n        }\r\n        byRegion[repos[key].region].push(repos[key]);\r\n    }\r\n\r\n    $(\"#regionSelect\").html(\"\");\r\n    var regionOptionsHtml = \"<option value=\\\"notselected\\\">-- \" + $.i18n(\"getting-started-wizard-step-plugins-select\") + \" --</option>\";\r\n    for (var region in byRegion) {\r\n        regionOptionsHtml += \"<option value=\\\"\" + region + \"\\\"> \" + region + \"</option>\";\r\n    }\r\n    $(\"#regionSelect\").removeAttr(\"disabled\");\r\n    $(\"#regionSelect\").html(regionOptionsHtml);\r\n\r\n    var byCategory = {};\r\n    for (var pluginKey in repos) {\r\n        if (!byCategory[repos[pluginKey].category]) {\r\n            byCategory[repos[pluginKey].category] = [];\r\n        }\r\n        byCategory[repos[pluginKey].category].push(repos[pluginKey]);\r\n    }\r\n\r\n    var calcInstallCount = function () {\r\n        var totalCount = 0;\r\n        var categoryCount;\r\n        var node;\r\n        var allCount = 0;\r\n        var category;\r\n\r\n        for (var categoryKey in byCategory) {\r\n            category = cates[categoryKey];\r\n\r\n            categoryCount = 0;\r\n            $(\".plugin-switch[category-id='\" + category.id + \"']\").each(function () {\r\n                if ($(this).prop(\"checked\")) {\r\n                    categoryCount++;\r\n                }\r\n            });\r\n            node = $(\".category-btn[category-id='\" + category.id + \"']\");\r\n            node.html(node.attr(\"category-name\") + \" (\" + categoryCount + \"/\" + byCategory[categoryKey].length + \")\");\r\n            totalCount += categoryCount;\r\n            allCount += byCategory[categoryKey].length;\r\n        }\r\n\r\n        $(\"#pluginsToInstallCount\").html($.i18n(\"getting-started-wizard-step-plugins-install-count\", totalCount, allCount));\r\n        $(\"#installCount\").html($.i18n(\"getting-started-wizard-step-finish-press-button\", totalCount));\r\n        $(\".need-to-install\").css(\"display\", totalCount > 0 ? \"none\" : \"block\");\r\n        if (totalCount > 0) {\r\n            $(\"#getStartedBtn\").removeClass(\"disabled\");\r\n        } else {\r\n            $(\"#getStartedBtn\").addClass(\"disabled\");\r\n        }\r\n    };\r\n\r\n    $(\"#regionSelect\").on(\"change\", function () {\r\n        var val = $(this).val();\r\n        var node = $(\"#pluginsToInstallAccordion\");\r\n        var installCountNode = $(\"#pluginsToInstallCount\");\r\n        if (val === \"notselected\") {\r\n            node.html(\"\");\r\n            installCountNode.html(\"\");\r\n            calcInstallCount();\r\n            return;\r\n        }\r\n\r\n        var html = \"\";\r\n        var pluginHtml;\r\n        var category;\r\n        for (var categoryKey in byCategory) {\r\n            category = cates[categoryKey];\r\n\r\n            installCount = 0;\r\n            pluginHtml = \"\";\r\n            for (var plugin of byCategory[categoryKey]) {\r\n                pluginHtml +=\r\n                    \"            <div class=\\\"custom-control custom-switch\\\">\" +\r\n                    \"                <input type=\\\"checkbox\\\" class=\\\"custom-control-input plugin-switch\" + (plugin.closedApi ? \" plugin-closed-api\" : \"\") + \"\\\" category-id=\\\"\" + category.id + \"\\\" package=\\\"\" + plugin.package + \"\\\" id=\\\"switch-\" + plugin.package + \"\\\"\" + (plugin.closedApi ? \"\" : \"checked\") + \">\" +\r\n                    \"                <label class=\\\"custom-control-label\\\" for=\\\"switch-\" + plugin.package + \"\\\">\" + plugin.fullName;\r\n                if (plugin.closedApi) {\r\n                    pluginHtml +=\r\n                        \"<br /><i class=\\\"fas fa-exclamation-triangle\\\"></i> \" + $.i18n(\"getting-started-wizard-step-plugins-closed-api\");\r\n                }\r\n                pluginHtml +=\r\n                    \"</label>\" +\r\n                    \"            </div>\"\r\n                    ;\r\n            }\r\n\r\n            html +=\r\n                \"<div class=\\\"card\\\">\" +\r\n                \"    <div class=\\\"card-header\\\" id=\\\"category-\" + category.id + \"-heading\\\">\" +\r\n                \"        <h2 class=\\\"mb-0\\\">\" +\r\n                \"            <button class=\\\"btn btn-link category-btn\\\" type=\\\"button\\\" data-toggle=\\\"collapse\\\" data-target=\\\"#collapse-category-\" + category.id + \"\\\" aria-expanded=\\\"true\\\" aria-controls=\\\"collapse-category-\" + category.id + \"\\\" category-id=\\\"\" + category.id + \"\\\" category-name=\\\"\" + category.name + \"\\\">\" + category.name + \"</button>\" +\r\n                \"        </h2>\" +\r\n                \"    </div>\" +\r\n                \"    <div id=\\\"collapse-category-\" + category.id + \"\\\" class=\\\"collapse\\\" aria-labelledby=\\\"category-\" + category.id + \"-heading\\\" data-parent=\\\"#pluginsToInstallAccordion\\\">\" +\r\n                \"        <div class=\\\"card-body\\\">\" + pluginHtml +\r\n                \"        </div>\" +\r\n                \"    </div>\" +\r\n                \"</div>\"\r\n                ;\r\n        }\r\n        node.html(html);\r\n        calcInstallCount();\r\n\r\n        $(\".plugin-closed-api\").change(function () {\r\n            if (this.checked) {\r\n                showModal(\"pluginclosedapi\", $(this), calcInstallCount);\r\n                //$(this).prop(\"checked\", returnVal);\r\n            }\r\n        });\r\n\r\n        $(\".plugin-switch\").change(function () {\r\n            calcInstallCount();\r\n        });\r\n\r\n        $(\"#getStartedBtn\").on(\"click\", function () {\r\n            if ($(this).hasClass(\"disabled\")) {\r\n                return;\r\n            }\r\n\r\n            $(\"#gettingStartedWizard\").css(\"display\", \"none\");\r\n            $(\".getting-started-progress-panel\").css(\"display\", \"block\");\r\n\r\n            var pkgs = [];\r\n            $(\".plugin-switch\").each(function () {\r\n                if ($(this).prop(\"checked\")) {\r\n                    var pkg = $(this).attr(\"package\");\r\n                    pkgs.push(pkg);\r\n                }\r\n            });\r\n            var errors = [];\r\n            var p;\r\n            for (var pkg of pkgs) {\r\n                PluginLoader.install(pkg);\r\n            }\r\n            $(\"#gs-plugin-progress\").css(\"width\", \"100%\");\r\n\r\n            if (errors.length === 0) {\r\n                setTimeout(function () {\r\n                    window.location.reload();\r\n                }, 500);\r\n                return;\r\n            }\r\n\r\n            $(\".getting-started-progress-panel\").css(\"display\", \"none\");\r\n            $(\".getting-started-plugin-error-panel\").css(\"display\", \"block\");\r\n\r\n            var html = \"<p>\" + $.i18n(\"getting-started-error-plugin-network-error\") + \"</p><button class=\\\"btn btn-block btn-warning\\\" onclick=\\\"window.location.reload()\\\" type=\\\"button\\\">\" + $.i18n(\"getting-started-error-refresh-btn\") + \"</button><hr /><p><b>\" + $.i18n(\"getting-started-error-affected-plugins\") + \"</b><br />\";\r\n            var i;\r\n            for (i = 0; i < errors.length; i++) {\r\n                html += errors[i];\r\n                if (i !== errors.length - 1) {\r\n                    html += \", \";\r\n                }\r\n            }\r\n            html += \"</p>\";\r\n\r\n            $(\".getting-started-plugin-error-panel .desc\").html(html);\r\n        });\r\n    });\r\n}\r\n\r\nexport function clearUp() {\r\n    Map.setCenter(Loc.getCurrentPosition());\r\n    Map.setZoom(16);\r\n    Map.removeAllMarkers();\r\n    Map.removeAllPolylines();\r\n\r\n    vars = {};\r\n    for (var key in timers) {\r\n        clearInterval(timers[key]);\r\n    }\r\n    timers = [];\r\n    $(\".tab-panel\").html(\"\");\r\n    $(\".content-panel-container\").html(\"\");\r\n}\r\n\r\nexport function modalClearUp() {\r\n    modalVars = {};\r\n    for (var timer of modalTimers) {\r\n        clearInterval(timer);\r\n    }\r\n}\r\n\r\nexport function showModal(layout, ...args) {\r\n    //nowUi = layout;\r\n    //previousUi = 0;\r\n    modalClearUp();\r\n    modalVars = {};\r\n\r\n    loadModalLayout(layout, true).then(function () {\r\n        $(\".modal\").i18n();\r\n        if (typeof scripts[layout] === \"function\") {\r\n            scripts[layout].apply(this, args);\r\n        }\r\n    });\r\n}\r\n\r\nexport function loadModalLayout(layout, options = {}) {\r\n    const key = \"modal-\" + layout;\r\n\r\n    if (options === true) {\r\n        options = {};\r\n        options.backdrop = \"static\";\r\n        options.keyboard = false;\r\n    }\r\n    \r\n    var proms = [];\r\n    proms.push(import(`./ui/${key}-header.html`).then(function (mod) {\r\n        $(\".modal-header\").html(mod.default);\r\n    }));\r\n    proms.push(import(`./ui/${key}-body.html`).then(function (mod) {\r\n        $(\".modal-body\").html(mod.default);\r\n    }));\r\n    proms.push(import(`./ui/${key}-footer.html`).then(function (mod) {\r\n        $(\".modal-footer\").html(mod.default);\r\n    }));\r\n\r\n    var p = Promise.all(proms);\r\n    p.then(function () {\r\n        $(\".modal\").modal(options);\r\n    });\r\n    return p;\r\n}\r\n\r\nexport function hideModal() {\r\n    $(\".modal\").modal(\"hide\");\r\n}\r\n\r\nexport function isModalShown() {\r\n    return ($(\".modal\").data('bs.modal') || {})._isShown;\r\n}\r\n\r\nexport function showTab(tab) {\r\n    clearUp();\r\n    currentTab = tab;\r\n    scripts[tab]();\r\n}\r\n\r\nexport function showPanel() {\r\n    $(\".content-panel-container\").css(\"display\", \"inline-block\");\r\n    $(\".top-panel\").css(\"display\", \"block\");\r\n    $(\".header nav\").removeClass(\"gtw-half-map\");\r\n\r\n    $(\"body\").removeClass(\"gtw-half-map\");\r\n    $(\"#gtw-map\").removeClass(\"gtw-half-map\");\r\n    $(\".map-overlay\").removeClass(\"gtw-half-map\");\r\n    $(\".half-map-panel\").removeClass(\"gtw-half-map\");\r\n    $(\".half-map-container\").removeClass(\"gtw-half-map\");\r\n\r\n    //$(\".header nav\").addClass(\"bg-dark\");\r\n    //$(\".half-map-panel\").css(\"display\", \"none\");\r\n    //$(\".top-panel\").css(\"display\", \"block\");\r\n    //$(\".half-map-container\").css(\"display\", \"none\");\r\n    //$(\".map-overlay\").fadeIn(500);\r\n    adjustMargin();\r\n}\r\n\r\nexport function hidePanel() {\r\n    $(\".top-panel\").css(\"display\", \"none\");\r\n    $(\".content-panel-container\").css(\"display\", \"none\");\r\n    $(\".header nav\").addClass(\"gtw-half-map\");\r\n\r\n    //$(\"body\").addClass(\"gtw-half-map\");\r\n    $(\"#gtw-map\").addClass(\"gtw-half-map\");\r\n    $(\".map-overlay\").addClass(\"gtw-half-map\");\r\n    $(\".half-map-panel\").addClass(\"gtw-half-map\");\r\n    $(\".half-map-container\").addClass(\"gtw-half-map\");\r\n\r\n    //$(\".half-map-panel\").css(\"display\", \"block\");\r\n    //$(\".half-map-container\").css(\"display\", \"block\");\r\n    //$(\".header nav\").removeClass(\"bg-dark\");\r\n    //$(\".map-overlay\").fadeOut(500);\r\n    adjustMargin();\r\n}\r\n\r\nexport function drawRouteOnMap(route, bound) {\r\n    var path = route.paths[bound];\r\n\r\n    var coords = [];\r\n    var pos;\r\n    var dbStop;\r\n    var i;\r\n    for (i = 0; i < path.length; i++) {\r\n        dbStop = TransitStops.getStopById(path[i]);\r\n        pos = { lat: dbStop.lat, lng: dbStop.lng };\r\n        coords.push(pos);\r\n        Map.addMarker(pos, dbStop.stopName, \"\" + (i + 1));\r\n    }\r\n\r\n    Map.addPolyline(coords, \"#FF0000\", 2);\r\n}\r\n\r\nexport function showRouteList(route, bound, stop = false, scroll = false) {\r\n    var html = \"<div class=\\\"row\\\" style=\\\"padding: 2%;\\\"><div class=\\\"timeline-centered\\\">\";\r\n    var path = route.paths[bound];\r\n    var dbStop;\r\n    var i;\r\n    for (i = 0; i < path.length; i++) {\r\n        dbStop = TransitStops.getStopById(path[i]);\r\n        html +=\r\n            \"<article class=\\\"timeline-entry\\\" stop-id=\\\"\" + dbStop.stopId + \"\\\" stop-index=\\\"\" + i + \"\\\">\" +\r\n            \"    <div class=\\\"timeline-entry-inner\\\">\" +\r\n            \"        <div class=\\\"timeline-icon bg-light\\\">\" +\r\n            \"            \" + (i + 1) +\r\n            \"        </div>\" +\r\n            \"        <div class=\\\"timeline-label\\\">\" +\r\n            \"            <h2><button style=\\\"padding: 0px;\\\" class=\\\"btn btn-link\\\" stop-id=\\\"\" + dbStop.stopId + \"\\\">\" + Lang.localizedKey(dbStop, \"stopName\") + \"</button></h2>\" +\r\n            \"            <p></p>\" +\r\n            \"        </div>\" +\r\n            \"    </div>\" +\r\n            \"</article>\"\r\n            ;\r\n    }\r\n    html += \"</div></div>\";\r\n    $(\".half-map-container\").html(html);\r\n\r\n    $(\".half-map-container button\").on(\"click\", function () {\r\n        var x = TransitStops.getStopById($(this).attr(\"stop-id\"));\r\n        if (x) {\r\n            showRouteList(route, bound, x);\r\n        }\r\n    });\r\n\r\n    var provider = TransitRoutes.getProvider(route.provider);\r\n    var lastStopId = path[path.length - 1];\r\n    html =\r\n        \"<ul class=\\\"list-group\\\"><li class=\\\"list-group-item d-flex align-items-center route-selection\\\">\" +\r\n        \"    <div class=\\\"d-flex flex-column route-id\\\">\" +\r\n        \"        <div>\" + Lang.localizedKey(provider, \"name\") + \"</div>\" +\r\n        \"        <div>\" + Lang.localizedKey(route, \"routeName\") + \"</div>\" +\r\n        \"    </div>\" +\r\n        \"    <div><b>\" + $.i18n(\"transit-eta-to\") + \":</b> \" + Lang.localizedKey(TransitStops.getStopById(lastStopId), \"stopName\") + \"</div>\" +\r\n        \"</li></ul>\"\r\n        ;\r\n    $(\".half-map-tab-panel\").html(html);\r\n\r\n    adjustMargin();\r\n    if (stop) {\r\n        var parent = screen.width >= 768 ? \".desktop\" : \".mobile\";\r\n\r\n        var node = $(parent + \" .timeline-entry[stop-id='\" + stop.stopId + \"']\");\r\n\r\n        var icon = node.children().children(\".timeline-icon\");\r\n        icon.removeClass(\"bg-light\");\r\n        icon.addClass(\"bg-primary\");\r\n\r\n        if (scroll) {\r\n            node[0].scrollIntoView();\r\n        }\r\n\r\n        var targetPos = { lat: stop.lat, lng: stop.lng };\r\n\r\n        Map.setCenter(targetPos);\r\n        Map.setZoom(18);\r\n\r\n        clearInterval(timers[\"stopEtaUpdate\"]);\r\n        var func = function () {\r\n            showStopEta(route, bound, stop);\r\n        };\r\n        func();\r\n        timers[\"stopEtaUpdate\"] = setInterval(func, 30000);\r\n    }\r\n}\r\n\r\nexport function showStopEta(route, bound, stop) {\r\n    var node = $(\".timeline-entry[stop-id='\" + stop.stopId + \"'] p\");\r\n\r\n    var content =\r\n        \"<p><u>\" + $.i18n(\"transit-eta\") + \"</u></p>\" +\r\n        \"<table class=\\\"table stop-eta\\\">\"\r\n        ;\r\n\r\n    var p = TransitEta.fetchEta({\r\n        provider: route.provider,\r\n        etaProviders: route.etaProviders,\r\n        routeId: route.routeId,\r\n        selectedPath: parseInt(bound),\r\n        stopId: stop.stopId\r\n    });\r\n    if (!p) {\r\n        content +=\r\n            \"<tr class=\\\"table-dark\\\">\" +\r\n            \"    <td colspan=\\\"3\\\">\" + $.i18n(\"transit-eta-route-not-available\") + \"</td>\" +\r\n            //\"    <td>---</td>\" +\r\n            \"</tr>\"\r\n            ;\r\n    } else {\r\n        content +=\r\n            \"<tr class=\\\"table-dark\\\">\" +\r\n            \"    <td colspan=\\\"3\\\"><div class=\\\"spinner-border spinner-border-sm\\\" role=\\\"status\\\"></div> \" + $.i18n(\"transit-eta-retrieving-data\") + \"</td>\" +\r\n            \"</tr>\";\r\n        p.then(function (data) {\r\n            var h = data.options;\r\n            var content = \"\";\r\n            var node = $(\".timeline-entry[stop-id='\" + h.stopId + \"'] p table tbody\");\r\n            if (data.code && data.code === -2) {\r\n                content +=\r\n                    \"<tr class=\\\"table-dark\\\">\" +\r\n                    \"    <td colspan=\\\"3\\\">\" + $.i18n(\"transit-eta-no-eta-providers\") + \"</td>\" +\r\n                    //\"    <td>---</td>\" +\r\n                    \"</tr>\"\r\n                    ;\r\n            } else if (!data.schedules || data.code && data.code === -1) {\r\n                content +=\r\n                    \"<tr class=\\\"table-dark\\\">\" +\r\n                    \"    <td colspan=\\\"3\\\">\" + $.i18n(\"transit-eta-no-data-received\") + \"</td>\" +\r\n                    //\"    <td>---</td>\" +\r\n                    \"</tr>\"\r\n                    ;\r\n            } else if (data.schedules.length === 0) {\r\n                content +=\r\n                    \"<tr class=\\\"table-dark\\\">\" +\r\n                    \"    <td colspan=\\\"3\\\">\" + $.i18n(\"transit-eta-no-schedules-pending\") + \"</td>\" +\r\n                    //\"    <td>---</td>\" +\r\n                    \"</tr>\"\r\n                    ;\r\n            } else {\r\n                var active = false;\r\n                for (var schedule of data.schedules) {\r\n                    var eta = Math.floor((schedule.time - schedule.serverTime) / 1000 / 60);\r\n\r\n                    var html = \"<tr class=\\\"table-\";\r\n\r\n                    if (eta >= 20) {\r\n                        html += \"secondary\";\r\n                    } else if (eta >= 15) {\r\n                        html += \"info\";\r\n                    } else if (eta >= 10) {\r\n                        html += \"success\";\r\n                    } else if (eta >= 5) {\r\n                        html += \"warning\";\r\n                    } else if (eta >= 1) {\r\n                        html += \"danger\";\r\n                    } else {\r\n                        html += \"dark\";\r\n                    }\r\n\r\n                    if (!active && eta > 0) {\r\n                        active = true;\r\n                        html += \" active\";\r\n                    }\r\n\r\n                    html += \"\\\">\";\r\n\r\n                    //TODO: isOutdated\r\n\r\n                    var provider = TransitEta.getProvider(schedule.provider);\r\n                    if (!provider) {\r\n                        console.error(\"Error: Could not find TransitEta provider to get localized names: \" + schedule.provider);\r\n                        return;\r\n                    }\r\n\r\n                    var colspan = 3;\r\n\r\n                    if (h.etaProviders.length > 1) {\r\n                        html += \"<td>\" + Lang.localizedKey(provider, \"name\") + \"</td>\";\r\n                        colspan--;\r\n                    }\r\n\r\n                    if (schedule.msg !== undefined && schedule.time === undefined) {\r\n                        html += \"<td colspan=\\\"\" + colspan + \"\\\">\" + schedule.msg + \"</td>\";\r\n                    } else {\r\n                        html += \"<td>\";\r\n                        if (schedule.msg !== undefined) {\r\n                            html += schedule.msg;\r\n                        }\r\n                        if (schedule.time !== undefined) {\r\n                            if (schedule.msg !== undefined) {\r\n                                html += \"<br />\";\r\n                            }\r\n                            if (eta > 0) {\r\n                                html += $.i18n(\"transit-eta-minutes\", eta);\r\n                            } else {\r\n                                html += $.i18n(\"transit-eta-arrived-left\");\r\n                            }\r\n\r\n                            if (schedule.isLive !== undefined) {\r\n                                if (schedule.isLive) {\r\n                                    html += \" <span style=\\\"color: red; float: right; font-size: 10px;\\\"><i class=\\\"fa fa-circle\\\"></i> \" + $.i18n(\"transit-eta-live\") + \"</span>\";\r\n                                } else {\r\n                                    html += \" <span style=\\\"font-size: 10px; float: right; font-style: italic;\\\">\" + $.i18n(\"transit-eta-scheduled\") + \"</span>\";\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                        html += \"</td><td>\";\r\n\r\n                        var time = new Date(schedule.time);\r\n\r\n                        if (schedule.time !== undefined) {\r\n                            html += Misc.fillZero(time.getHours()) + \":\" + Misc.fillZero(time.getMinutes());\r\n                        } else {\r\n                            html += \"---\";\r\n                        }\r\n\r\n                        html += \"</td>\";\r\n                    }\r\n\r\n                    //TODO: Features\r\n\r\n                    html += \"</tr>\";\r\n                    content += html;\r\n                }\r\n            }\r\n            node.html(content);\r\n        }).catch(function (options, err) {\r\n            var node = $(\".timeline-entry[stop-id='\" + options.stopId + \"'] p table tbody\");\r\n            node.html(\"<tr class=\\\"table-danger\\\"><td colspan=\\\"3\\\">\" + $.i18n(\"transit-eta-error-fetching-eta\") + \"</td></tr>\");\r\n        });\r\n    }\r\n\r\n    content += \"</table>\";\r\n\r\n    node.html(content);\r\n}\r\n\r\nexport var scripts = {\r\n    \"pluginclosedapi\": function (node, func) {\r\n        $(\"#plugin-closed-api-confirm-yes\").on(\"click\", function () {\r\n            func();\r\n            hideModal();\r\n        });\r\n        $(\"#plugin-closed-api-confirm-no\").on(\"click\", function () {\r\n            node.prop(\"checked\", false);\r\n            func();\r\n            hideModal();\r\n        });\r\n    },\r\n    \"errorplugins\": function (errorPlugins) {\r\n        var node = $(\"#errorPluginsAccordion\");\r\n        var html = \"\";\r\n        var errSummary;\r\n        for (var plugin of errorPlugins) {\r\n            if (plugin.status === -1) {\r\n                errSummary = $.i18n(\"error-plugins-summary-plugin-not-available\") + \" (\" + plugin.status + \")\";\r\n            } else if (plugin.status >= -2 && plugin.status <= -4) {\r\n                errSummary = $.i18n(\"error-plugins-summary-plugin-load\") + \" (\" + plugin.status + \")\";\r\n            } else {\r\n                errSummary = $.i18n(\"error-plugins-summary-unknown-status-code\") + \" (\" + plugin.status + \")\";\r\n            }\r\n            html +=\r\n                \"<div class=\\\"card\\\">\" +\r\n                \"    <div class=\\\"card-header\\\" id=\\\"err-\" + plugin.package + \"-heading\\\">\" +\r\n                \"        <h2 class=\\\"mb-0\\\">\" +\r\n                \"            <button class=\\\"btn btn-link\\\" type=\\\"button\\\" data-toggle=\\\"collapse\\\" data-target=\\\"#collapse-err-\" + plugin.package + \"\\\" aria-expanded=\\\"true\\\" aria-controls=\\\"collapse-err-\" + plugin.package + \"\\\">\" + plugin.package + \": \" + errSummary + \"</button>\" +\r\n                \"        </h2>\" +\r\n                \"    </div>\" +\r\n                \"    <div id=\\\"collapse-err-\" + plugin.package + \"\\\" class=\\\"collapse\\\" aria-labelledby=\\\"err-\" + plugin.package + \"-heading\\\" data-parent=\\\"#errorPluginsAccordion\\\">\" +\r\n                \"        <div class=\\\"card-body\\\">\"\r\n                ;\r\n\r\n            html += \"<p><b>\" + $.i18n(\"error-plugins-message\") + \"</b><br/>\" + plugin.msg + \"</p>\";\r\n            html += \"<p><b>\" + $.i18n(\"error-plugins-solutions\") + \"</b><br/>\";\r\n\r\n            if (plugin.status === -1) {\r\n                html += $.i18n(\"error-plugins-solution-plugin-not-available\");\r\n            } else if (plugin.status >= -4 && plugin.status <= -2) {\r\n                html += $.i18n(\"error-plugins-solution-plugin-load\", plugin.status);\r\n            } else {\r\n                html += $.i18n(\"error-plugins-solution-unknown-status-code\", plugin.status);\r\n            }\r\n            html += \"</p>\";\r\n\r\n            html +=\r\n                \"        </div>\" +\r\n                \"    </div>\" +\r\n                \"</div>\"\r\n                ;\r\n        }\r\n        node.html(html);\r\n\r\n        $(\".error-plugin-accept-checksum-btn\").on(\"click\", function () {\r\n            var pkg = $(this).attr(\"package\");\r\n\r\n            var plugin = PluginLoader.plugins[pkg];\r\n            if (!pkg) {\r\n                console.error(\"Error: Accept checksum failed! Plugin \\\"\" + pkg + \"\\\" not found!\");\r\n                return;\r\n            }\r\n\r\n            var info = plugin.info;\r\n            PluginLoader.install(info.package, info.checksum, info.version);\r\n            window.location.reload();\r\n        });\r\n    },\r\n    \"viewplugin\": function (pkg) {\r\n        $(\".modal .close\").on(\"click\", function () {\r\n            showModal(\"pluginmanager\");\r\n        });\r\n\r\n        var packageJson = 0;\r\n        for (var pkey in repos) {\r\n            if (pkey === pkg) {\r\n                packageJson = repos[pkey];\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (!packageJson) {\r\n            $(\".modal-body\").html($.i18n(\"view-plugin-repos-cannot-find-package\"));\r\n            return;\r\n        }\r\n\r\n        var html = \"\";\r\n\r\n        if (packageJson.closedApi) {\r\n            html += \"<div class=\\\"alert alert-warning\\\" role=\\\"alert\\\"><i class=\\\"fas fa-exclamation-triangle\\\"></i> \" + $.i18n(\"plugin-closed-api-warning\") + \"</div>\";\r\n        }\r\n\r\n        html += \"<h3>\" + $.i18n(\"view-plugin-details\") + \"</h3>\";\r\n        html += \"<hr />\";\r\n        html += \"<p>\" + $.i18n(\"view-plugin-details-name\") + \": \" + packageJson.name + \"<br />\";\r\n        html += $.i18n(\"view-plugin-details-fullname\") + \": \" + packageJson.fullName + \"<br />\";\r\n        html += $.i18n(\"view-plugin-details-author\") + \": \" + packageJson.author + \"<br />\";\r\n        html += $.i18n(\"view-plugin-details-version\") + \": \" + packageJson.version + \"<br />\";\r\n        html += $.i18n(\"view-plugin-details-github\") + \": <a href=\\\"\" + packageJson.github + \"\\\" target=\\\"_blank\\\">\" + packageJson.github + \"</a><br />\";\r\n        html += $.i18n(\"view-plugin-details-package\") + \": \" + packageJson.package + \"<br />\";\r\n        html += $.i18n(\"view-plugin-details-description\") + \": \" + packageJson.desc + \"</p>\";\r\n\r\n        html += \"<h3>\" + $.i18n(\"view-plugin-installation\") + \"</h3>\";\r\n        html += \"<hr />\";\r\n\r\n        var json = PluginLoader.getPlugin(packageJson.package);\r\n\r\n        var statusMsg = \"<span class=\\\"font-weight-bold \";\r\n        if (!json) {\r\n            statusMsg += \"text-info\\\">\" + $.i18n(\"view-plugin-installation-not-installed\");\r\n        } else if (json.status === -1) {\r\n            statusMsg += \"text-danger\\\">\" + $.i18n(\"view-plugin-installation-plugin-not-available\");\r\n        } else if (json.status === 0) {\r\n            statusMsg += \"text-success\\\">\" + $.i18n(\"view-plugin-installation-installed-running\");\r\n        } else if (json.status === 1) {\r\n            statusMsg += \"text-secondary\\\">\" + $.i18n(\"view-plugin-installation-not-enabled\");\r\n        } else if (json.status <= -2 && json.status >= -4) {\r\n            statusMsg += \"text-danger\\\">\" + $.i18n(\"view-plugin-installation-plugin-load-errors\", json.status);\r\n        } else {\r\n            statusMsg += \"text-secondary\\\">\" + $.i18n(\"view-plugin-installation-unknown-status-code\", json.status);\r\n        }\r\n        statusMsg += \"</span>\";\r\n\r\n        html += \"<p>\" + $.i18n(\"view-plugin-installation-status\") + \": \" + statusMsg + \"<br />\";\r\n\r\n        if (json && json.msg) {\r\n            html += $.i18n(\"view-plugin-installation-message\") + \": \" + json.msg + \"</p>\";\r\n        }\r\n\r\n        html += \"<hr />\";\r\n\r\n        if (json) {\r\n            html += \"<button type=\\\"button\\\" class=\\\"btn btn-danger ui-btn-viewplugin-uninstall\\\">\" + $.i18n(\"view-plugin-installation-uninstall-and-restart-btn\") + \"</button>\";\r\n        } else {\r\n            html += \"<button type=\\\"button\\\" class=\\\"btn btn-success ui-btn-viewplugin-install\\\">\" + $.i18n(\"view-plugin-installation-install-and-restart-btn\") + \"</button>\";\r\n        }\r\n\r\n        $(\".modal-body\").html(html);\r\n\r\n        $(\".ui-btn-viewplugin-install\").on(\"click\", function () {\r\n            PluginLoader.install(packageJson.package);\r\n            window.location.reload();\r\n        });\r\n\r\n        $(\".ui-btn-viewplugin-uninstall\").on(\"click\", function () {\r\n            PluginLoader.uninstall(packageJson.package);\r\n            window.location.reload();\r\n        });\r\n    },\r\n\r\n    \"pluginmanager\": function () {\r\n        var html = \"<p>\" + $.i18n(\"plugin-manager-loading\") + \"</p>\";\r\n\r\n        $(\"#nav-all\").html(html);\r\n        $(\"#nav-installed\").html(html);\r\n        $(\"#nav-transit\").html(html);\r\n        $(\"#nav-libraries\").html(html);\r\n        $(\"#nav-others\").html(html);\r\n\r\n        var byCategory = {};\r\n        for (var pluginKey in repos) {\r\n            if (!byCategory[repos[pluginKey].category]) {\r\n                byCategory[repos[pluginKey].category] = [];\r\n            }\r\n            byCategory[repos[pluginKey].category].push(repos[pluginKey]);\r\n        }\r\n\r\n        var allHtml = \"<div class=\\\"list-group\\\">\";\r\n        var tabNode = $(\"#nav-tab\");\r\n        var tabContentNode = $(\"#nav-tabContent\");\r\n        var pluginHtml;\r\n        var categoryTabHtml;\r\n        var categoryTabContentHtml;\r\n        var category;\r\n        var total = 0;\r\n        for (var categoryKey in byCategory) {\r\n            category = cates[categoryKey];\r\n\r\n            total += byCategory[categoryKey].length;\r\n            categoryTabHtml = \"<a class=\\\"nav-item nav-link\\\" id=\\\"nav-\" + category.id + \"-tab\\\" data-toggle=\\\"tab\\\" href=\\\"#nav-\" + category.id + \"\\\" role=\\\"tab\\\" aria-controls=\\\"nav-\" + category.id + \"\\\" aria-selected=\\\"true\\\">\" + category.name + \" (\" + byCategory[categoryKey].length + \")</a>\";\r\n            categoryTabContentHtml = \"<div class=\\\"tab-pane fade\\\" id=\\\"nav-\" + category.id + \"\\\" role=\\\"tabpanel\\\" aria-labelledby=\\\"nav-\" + category.id + \"-tab\\\"><div class=\\\"list-group\\\">\";\r\n\r\n            for (var pluginJson of byCategory[categoryKey]) {\r\n                pluginHtml = \"<a href=\\\"#\\\" class=\\\"list-group-item list-group-item-action ui-pluginmanager-view-plugin\\\" package=\\\"\" + pluginJson.package + \"\\\">\";\r\n                pluginHtml += \"    <div class=\\\"d-flex w-100 justify-content-between\\\">\";\r\n                pluginHtml += \"        <h5 class=\\\"mb-1\\\">\" + pluginJson.fullName + \"</h5>\";\r\n                pluginHtml += \"        <small>\" + pluginJson.version + \"</small>\";\r\n                pluginHtml += \"    </div>\";\r\n                pluginHtml += \"    <p class=\\\"mb-1\\\">\" + pluginJson.desc + \"</p>\";\r\n                pluginHtml += \"    <small>By \" + pluginJson.author + \"</small>\";\r\n                pluginHtml += \"</a>\";\r\n                categoryTabContentHtml += pluginHtml;\r\n                allHtml += pluginHtml;\r\n            }\r\n            categoryTabContentHtml += \"</div></div>\";\r\n            tabNode.append(categoryTabHtml);\r\n            tabContentNode.append(categoryTabContentHtml);\r\n        }\r\n\r\n        $(\"#nav-all-tab\").html($.i18n(\"plugin-manager-tab-all\") + \" (\" + total + \")\");\r\n        $(\"#nav-all\").html(allHtml);\r\n\r\n        $(\".ui-pluginmanager-view-plugin\").on(\"click\", function () {\r\n            showModal(\"viewplugin\", $(this).attr(\"package\"));\r\n        });\r\n    },\r\n\r\n    \"settings\": function () {\r\n        var html = \"\";\r\n\r\n        var val;\r\n        for (var setting of Settings.getDefaultSettings()) {\r\n            val = Settings.get(setting.key, setting.def);\r\n            html +=\r\n                \"<div class=\\\"form-group\\\">\" +\r\n                \"    <label><b>\" + setting.name + \":</b><p>\" + setting.desc + \"</p></label>\";\r\n            if (setting.type === \"boolean\") {\r\n                html += \"    <select class=\\\"form-control\\\" id=\\\"gtw-settings-\" + setting.key + \"\\\">\";\r\n                if (val) {\r\n                    html +=\r\n                        \"        <option value=\\\"yes\\\" selected>\" + $.i18n(\"settings-option-yes\") + \"</option>\" +\r\n                        \"        <option value=\\\"no\\\">\" + $.i18n(\"settings-option-no\") + \"</option>\";\r\n                } else {\r\n                    html +=\r\n                        \"        <option value=\\\"yes\\\">\" + $.i18n(\"settings-option-yes\") + \"</option>\" +\r\n                        \"        <option value=\\\"no\\\" selected>\" + $.i18n(\"settings-option-no\") + \"</option>\";\r\n                }\r\n                html += \"    </select>\";\r\n            } else {\r\n                html += \"    <input class=\\\"form-control\\\" id=\\\"gtw-settings-\" + setting.key + \"\\\" type=\\\"\";\r\n                if (setting.type === \"number\") {\r\n                    html += \"number\";\r\n                } else {\r\n                    html += \"text\";\r\n                }\r\n                html += \"\\\" value=\\\"\" + val + \"\\\"/>\";\r\n            }\r\n            html += \"</div>\";\r\n\r\n        }\r\n\r\n        html +=\r\n            \"<input type=\\\"button\\\" class=\\\"btn btn-success ui-btn-settings-save ui-btn-settings-save-close\\\" value=\\\"\" + $.i18n(\"settings-save-and-close-btn\") + \"\\\"/> \" +\r\n            \"<input type=\\\"button\\\" class=\\\"btn btn-default ui-btn-settings-save\\\" value=\\\"\" + $.i18n(\"settings-apply-btn\") + \"\\\"/>\";\r\n\r\n        $(\".modal-body\").html(html);\r\n\r\n        $(\".ui-btn-settings-save\").on(\"click\", function () {\r\n            var val;\r\n            var out;\r\n            for (var setting of Settings.getDefaultSettings()) {\r\n                val = $(\"#gtw-settings-\" + setting.key).val();\r\n                if (setting.type === \"boolean\") {\r\n                    out = val === \"yes\";\r\n                } else if (setting.type === \"number\") {\r\n                    out = parseInt(val);\r\n                } else {\r\n                    out = val;\r\n                }\r\n                if (setting.checkfunc && !setting.checkfunc(out)) {\r\n                    alert($.i18n(\"settings-invalid-value\", setting.name));\r\n                    return;\r\n                }\r\n                Settings.set(setting.key, out);\r\n            }\r\n            Settings.save();\r\n\r\n            if ($(this).hasClass(\"ui-btn-settings-save-close\")) {\r\n                hideModal();\r\n            }\r\n        });\r\n    },\r\n\r\n    \"transitEtaUpdateUi\": function () {\r\n        var requestLen = RequestLimiter.requests.length;\r\n        if (requestLen > 0) {\r\n            $(\".request-progress-panel\").fadeIn(500);\r\n\r\n            var max = vars[\"maxRequest\"];\r\n            if (!max || requestLen > max) {\r\n                max = vars[\"maxRequest\"] = requestLen;\r\n            }\r\n\r\n            $(\".request-progress-panel .progress-bar\").html($.i18n(\"transit-eta-requesting-data\", max - requestLen, max));\r\n            //$(\".request-progress-panel .progress-bar\").html(Math.floor((max - requestLen) / max * 100) + \"%\");\r\n            $(\".request-progress-panel .progress-bar\").css(\"width\", Math.floor((max - requestLen) / max * 100) + \"%\");\r\n        } else {\r\n            vars[\"maxRequest\"] = 0;\r\n            $(\".request-progress-panel .progress-bar\").css(\"width\", \"100%\");\r\n            $(\".request-progress-panel\").fadeOut(500, function () {\r\n                $(\".request-progress-panel .progress-bar\").css(\"width\", \"0%\");\r\n            });\r\n        }\r\n        var allNearbyRoutes = vars[\"allNearbyRoutes\"];\r\n        //var h;\r\n        for (var result of allNearbyRoutes) {\r\n            var p = TransitEta.fetchEta({\r\n                provider: result.route.provider,\r\n                etaProviders: result.route.etaProviders,\r\n                routeId: result.route.routeId,\r\n                selectedPath: result.bound,\r\n                stopId: result.stop.stopId\r\n            });\r\n            p.then(function (eta) {\r\n                var text = \"\";\r\n                var h = eta.options;\r\n\r\n                var node = $(\".nearby-route-list .route-selection[gtw-provider=\\\"\" + h.provider + \"\\\"][gtw-route-id=\\\"\" + h.routeId + \"\\\"][gtw-bound=\\\"\" + h.selectedPath + \"\\\"][gtw-stop-id=\\\"\" + h.stopId + \"\\\"]\");\r\n\r\n                node.removeClass(\"list-group-item-secondary\");\r\n                node.removeClass(\"list-group-item-info\");\r\n                node.removeClass(\"list-group-item-success\");\r\n                node.removeClass(\"list-group-item-warning\");\r\n                node.removeClass(\"list-group-item-danger\");\r\n                node.removeClass(\"list-group-item-light\");\r\n                node.removeClass(\"list-group-item-dark\");\r\n\r\n                var badgeClass = \"btn-secondary\";\r\n\r\n                if (!eta || !eta.schedules || eta.code && eta.code < 0) {\r\n                    text = $.i18n(\"transit-eta-route-not-available-short\");\r\n                    node.addClass(\"list-group-item-light\");\r\n                } else if (eta.schedules.length === 0) {\r\n                    text = $.i18n(\"transit-eta-no-schedules-pending-short\");\r\n                    node.addClass(\"list-group-item-light\");\r\n                } else {\r\n                    var schedule = eta.schedules[0];\r\n\r\n                    var calcEta = Math.floor((schedule.time - schedule.serverTime) / 1000 / 60);\r\n\r\n                    var css = \"\";\r\n\r\n                    if (calcEta >= 20) {\r\n                        css = \"secondary\";\r\n                    } else if (calcEta >= 15) {\r\n                        css = \"info\";\r\n                    } else if (calcEta >= 10) {\r\n                        css = \"success\";\r\n                    } else if (calcEta >= 5) {\r\n                        css = \"warning\";\r\n                    } else if (calcEta >= 1) {\r\n                        css = \"danger\";\r\n                    } else {\r\n                        css = \"dark\";\r\n                    }\r\n                    node.addClass(\"list-group-item-\" + css);\r\n\r\n                    //TODO: isOutdated\r\n\r\n                    if (schedule.msg !== undefined) {\r\n                        var msg = schedule.msg;\r\n                        if (msg.length > 20) {\r\n                            text = $.i18n(\"transit-eta-transit-notice\");\r\n                        } else {\r\n                            text = schedule.msg;\r\n                        }\r\n                        badgeClass = \"badge-warning\";\r\n                    } else if (schedule.time !== undefined) {\r\n                        if (schedule.msg !== undefined) {\r\n                            text += \"<br />\";\r\n                        }\r\n\r\n                        badgeClass = \"badge-primary\";\r\n                        if (eta > 0) {\r\n                            text += $.i18n(\"transit-eta-minutes\", eta);\r\n                        } else {\r\n                            text += $.i18n(\"transit-eta-arrived-left\", eta);\r\n                            badgeClass = \"badge-dark\";\r\n                        }\r\n\r\n                        if (schedule.isLive !== undefined) {\r\n                            text += \"<br /><span style=\\\"font-size: 10px; position: absolute; top: 16px; right: 16px; \";\r\n                            if (schedule.isLive) {\r\n                                text += \"color: red;\\\"><i class=\\\"fa fa-circle\\\"></i> \" + $.i18n(\"transit-eta-live\") + \"</span>\";\r\n                            } else {\r\n                                text += \"color: black; font-style: italic;\\\">\" + $.i18n(\"transit-eta-scheduled\") + \"</span>\";\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    /*\r\n                    if (schedule.hasTime) {\r\n                        text += Misc.fillZero(schedule.time.hr) + \":\" + Misc.fillZero(schedule.time.min);\r\n                    } else {\r\n                        text += \"---\";\r\n                    }\r\n                    */\r\n\r\n                    //TODO: Features\r\n                }\r\n                var badge = node.children(\".transit-eta\");\r\n\r\n                badge.removeClass(\"badge-primary\");\r\n                badge.removeClass(\"badge-secondary\");\r\n                badge.removeClass(\"badge-warning\");\r\n                badge.removeClass(\"badge-danger\");\r\n                badge.removeClass(\"badge-dark\");\r\n                badge.addClass(badgeClass);\r\n\r\n                badge.html(text);\r\n            }).catch(function (options, err) {\r\n                var node = $(\".nearby-route-list .route-selection[gtw-provider=\\\"\" + options.provider + \"\\\"][gtw-route-id=\\\"\" + options.routeId + \"\\\"][gtw-bound=\\\"\" + options.selectedPath + \"\\\"][gtw-stop-id=\\\"\" + options.stopId + \"\\\"]\");\r\n\r\n                node.removeClass(\"list-group-item-secondary\");\r\n                node.removeClass(\"list-group-item-info\");\r\n                node.removeClass(\"list-group-item-success\");\r\n                node.removeClass(\"list-group-item-warning\");\r\n                node.removeClass(\"list-group-item-danger\");\r\n                node.removeClass(\"list-group-item-light\");\r\n                node.removeClass(\"list-group-item-dark\");\r\n                node.addClass(\"list-group-item-light\");\r\n\r\n                var badge = node.children(\".transit-eta\");\r\n\r\n                badge.removeClass(\"badge-primary\");\r\n                badge.removeClass(\"badge-secondary\");\r\n                badge.removeClass(\"badge-warning\");\r\n                badge.removeClass(\"badge-danger\");\r\n                badge.removeClass(\"badge-dark\");\r\n                badge.addClass(\"badge-danger\");\r\n\r\n                badge.html($.i18n(\"transit-eta-error-fetching-eta-short\"));\r\n            });\r\n        }\r\n    },\r\n    \"transitEta\": function () {\r\n        RequestLimiter.clear();\r\n        TransitEta.clearCache();\r\n\r\n        var pos = Loc.getCurrentPosition();\r\n        var providers = TransitRoutes.getProviders();\r\n\r\n        if (providers.length > 0) {\r\n            var buttonScroll =\r\n                \"<div class=\\\"hori-scroll btn-group\\\">\" +\r\n                \"    <button type=\\\"button\\\" class=\\\"btn btn-primary gtw-providersort gtw-providersort-all\\\"><i class=\\\"fa fa-reply-all\\\"></i><br />\" + $.i18n(\"transit-eta-sort-all\") + \"</button>\";\r\n\r\n            for (var iprovider of providers) {\r\n                var image = \"\";\r\n                if (iprovider.type === TransitType.BUS) {\r\n                    image = \"fa-bus\";\r\n                } else if (iprovider.type === TransitType.TRAIN) {\r\n                    image = \"fa-train\";\r\n                } else {\r\n                    image = \"fa-question\";\r\n                }\r\n                buttonScroll += \" <button type=\\\"button\\\" class=\\\"btn btn-default gtw-providersort gtw-providersort-provider\\\" gtw-provider=\\\"\" + iprovider.id + \"\\\"><i class=\\\"fa \" + image + \"\\\"></i><br />\" + Lang.localizedKey(iprovider, \"name\") + \"</button>\";\r\n            }\r\n\r\n            buttonScroll += \"</div>\";\r\n\r\n            $(\".tab-panel\").append(buttonScroll);\r\n\r\n            var searchField =\r\n                \"<div class=\\\"input-group mb-3\\\" style=\\\"margin-top: 16px;\\\">\" +\r\n                \"    <input type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"\" + $.i18n(\"transit-eta-placeholder-search-for-transit\") + \"\\\" aria-label=\\\"\" + $.i18n(\"transit-eta-placeholder-search-for-transit\") + \"\\\" aria-describedby=\\\"search-transit-icon\\\" id=\\\"search-transit-text\\\"/>\" +\r\n                \"    <div class=\\\"input-group-append\\\">\" +\r\n                //\"        <span class=\\\"input-group-text\\\" id=\\\"search-transit-icon\\\"><i class=\\\"fas fa-search\\\"></i></span>\" +\r\n                \"        <button class=\\\"btn btn-light disabled\\\" type=\\\"button\\\" id=\\\"button-cancel-search\\\"><i class=\\\"fas fa-search\\\"></i></button>\" +\r\n                \"    </div>\" +\r\n                \"</div>\"\r\n                ;\r\n\r\n            $(\".tab-panel\").append(searchField);\r\n\r\n            var requestProgressBar =\r\n                \"<div class=\\\"request-progress-panel\\\">\" +\r\n                \"    <div class=\\\"progress bg-white\\\">\" +\r\n                \"        <div class=\\\"progress-bar progress-bar-striped progress-bar-animated\\\" role=\\\"progressbar\\\" style=\\\"width: 0%;\\\"></div>\" +\r\n                \"    </div>\" +\r\n                \"</div>\"\r\n                ;\r\n\r\n            $(\".tab-panel\").append(requestProgressBar);\r\n\r\n            $(\".gtw-providersort\").on(\"click\", function () {\r\n                if ($(this).hasClass(\"btn-primary\")) {\r\n                    return;\r\n                }\r\n                $(\".gtw-providersort\").removeClass(\"btn-primary\");\r\n                //$(\".gtw-providersort\").removeClass(\"btn-default\");\r\n\r\n                if ($(this).hasClass(\"gtw-providersort-all\")) {\r\n                    $(this).addClass(\"btn-primary\");\r\n\r\n                    //$(\".gtw-providersort-provider\").addClass(\"btn-default\");\r\n                    $(\".route-selection\").attr(\"style\", \"\");\r\n                } else {\r\n                    var provider = $(this).attr(\"gtw-provider\");\r\n                    $(this).addClass(\"btn-primary\");\r\n\r\n                    $(\".gtw-providersort-provider:not([gtw-provider='\" + provider + \"'])\").addClass(\"btn-default\");\r\n                    $(\".route-selection[gtw-provider='\" + provider + \"']\").attr(\"style\", \"\");\r\n                    $(\".route-selection:not([gtw-provider='\" + provider + \"'])\").attr(\"style\", \"display: none!important\");\r\n                }\r\n            });\r\n\r\n            var lat = pos.lat;\r\n            var lng = pos.lng;\r\n            var range = Settings.get(\"min_nearby_transit_range\", 200) / 1000.0;\r\n\r\n            var allNearbyStops = TransitStops.getAllStopsNearby(lat, lng, range, true, true);\r\n\r\n            if (allNearbyStops.length === 0) {\r\n                var testRange = range;\r\n                do {\r\n                    testRange += 0.05;\r\n                    allNearbyStops = TransitStops.getAllStopsNearby(lat, lng, testRange, true, true);\r\n                } while (allNearbyStops.length === 0 && testRange < 10);\r\n\r\n                if (testRange >= 10) {\r\n                    $(\".tab-panel\").append(\r\n                        \"<div class=\\\"alert alert-danger alert-dismissable\\\">\" +\r\n                        \"<button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"alert\\\" aria-hidden=\\\"true\\\" >&#215;</button>\" +\r\n                        \"No routes are found in 10 km range.\" +\r\n                        \"</div>\"\r\n                    );\r\n                } else {\r\n                    $(\".tab-panel\").append(\r\n                        \"<div class=\\\"alert alert-warning alert-dismissable\\\">\" +\r\n                        \"<button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"alert\\\" aria-hidden=\\\"true\\\" >&#215;</button>\" +\r\n                        $.i18n(\"transit-eta-no-routes-found-nearby-extended-range\", range * 1000, Math.ceil(testRange * 1000)) +\r\n                        \"</div>\"\r\n                    );\r\n                }\r\n            }\r\n\r\n            var maxNearbyBusDisplay = Settings.get(\"max_nearby_transit_to_display\", 20);\r\n            var allNearbyRoutes = [];\r\n            for (var stopResult of allNearbyStops) {\r\n                if (allNearbyRoutes.length >= maxNearbyBusDisplay) {\r\n                    break;\r\n                }\r\n\r\n                var routeResults = Transit.searchRoutesOfStop(stopResult.stop);\r\n\r\n                for (var routeResult of routeResults) {\r\n                    allNearbyRoutes.push({\r\n                        route: routeResult.route,\r\n                        bound: routeResult.bound,\r\n                        stop: stopResult.stop,\r\n                        distance: stopResult.distance\r\n                    });\r\n                }\r\n            }\r\n\r\n            var html;\r\n            var distance;\r\n            var paths;\r\n            var stopId;\r\n            var provider;\r\n            html = \"<div class=\\\"row item-list nearby-route-list\\\"><ul class=\\\"list-group\\\">\";\r\n            for (var result of allNearbyRoutes) {\r\n                paths = result.route.paths[result.bound];\r\n                stopId = paths[paths.length - 1];\r\n                distance = Math.round(result.distance * 1000);\r\n                provider = TransitRoutes.getProvider(result.route.provider);\r\n                html +=\r\n                    \"    <li class=\\\"list-group-item list-group-item-action d-flex justify-content-between align-items-center route-selection\\\" gtw-provider=\\\"\" + result.route.provider + \"\\\" gtw-route-id=\\\"\" + result.route.routeId + \"\\\" gtw-stop-id=\\\"\" + result.stop.stopId + \"\\\" gtw-bound=\\\"\" + result.bound + \"\\\">\" +\r\n                    \"        <div class=\\\"d-flex flex-column route-id\\\">\" +\r\n                    \"            <div>\" + Lang.localizedKey(provider, \"name\") + \"</div>\" +\r\n                    \"            <div>\" + Lang.localizedKey(result.route, \"routeName\") + \"</div>\" +\r\n                    \"        </div>\" +\r\n                    \"        <div class=\\\"d-flex flex-column stop-info mr-auto\\\">\" +\r\n                    \"            <div>\" +\r\n                    \"                <b>\" + $.i18n(\"transit-eta-to\") + \":</b> <small>\" + Lang.localizedKey(TransitStops.getStopById(stopId), \"stopName\") +\r\n                    \"</small></div>\" +\r\n                    \"            <div>\" +\r\n                    \"                \" + Lang.localizedKey(result.stop, \"stopName\") + \" (\" + distance + $.i18n(\"transit-eta-metres\") + \")\" +\r\n                    \"            </div>\" +\r\n                    \"        </div>\" +\r\n                    \"        <span class=\\\"badge badge-primary badge-pill transit-eta\\\">\" + $.i18n(\"transit-eta-retrieving\") + \"</span>\" +\r\n                    \"    </li>\";\r\n            }\r\n            html += \"</ul></div>\";\r\n\r\n            var routes = TransitRoutes.getAllRoutes();\r\n            var path;\r\n            var i;\r\n\r\n            html += \"<div class=\\\"row item-list all-route-list\\\"><ul class=\\\"list-group\\\">\";\r\n\r\n            for (var route of routes) {\r\n                for (i = 0; i < route.paths.length; i++) {\r\n                    path = route.paths[i];\r\n                    stopId = path[path.length - 1];\r\n                    provider = TransitRoutes.getProvider(route.provider);\r\n                    html +=\r\n                        \"<li class=\\\"list-group-item list-group-item-action d-flex align-items-center route-selection\\\" gtw-provider=\\\"\" + route.provider + \"\\\" gtw-route-id=\\\"\" + route.routeId + \"\\\" gtw-bound=\\\"\" + i + \"\\\">\" +\r\n                        \"    <div class=\\\"d-flex flex-column route-id\\\">\" +\r\n                        \"        <div>\" + Lang.localizedKey(provider, \"name\") + \"</div>\" +\r\n                        \"        <div>\" + Lang.localizedKey(route, \"routeName\") + \"</div>\" +\r\n                        \"    </div>\" +\r\n                        \"    <div><b>\" + $.i18n(\"transit-eta-to\") + \"</b> \" + Lang.localizedKey(TransitStops.getStopById(stopId), \"stopName\") + \"</div>\" +\r\n                        \"</li>\";\r\n                }\r\n            }\r\n            html += \"</ul></div>\";\r\n\r\n            $(\".content-panel-container\").html(html);\r\n\r\n            $(\".route-selection\").on(\"mouseenter\", function () {\r\n                Map.removeAllMarkers();\r\n                Map.removeAllPolylines();\r\n                var provider = TransitRoutes.getProvider($(this).attr(\"gtw-provider\"));\r\n                var route = provider.getRouteById($(this).attr(\"gtw-route-id\"));\r\n                var sstop = TransitStops.getStopById($(this).attr(\"gtw-stop-id\"));\r\n                var bound = $(this).attr(\"gtw-bound\");\r\n                drawRouteOnMap(route, bound);\r\n\r\n                if (sstop) {\r\n                    var targetPos = { lat: sstop.lat, lng: sstop.lng };\r\n                    Map.setCenter(targetPos);\r\n                    Map.setZoom(18);\r\n                } else {\r\n                    var path = route.paths[bound];\r\n\r\n                    var latlngs = [];\r\n                    var stop;\r\n                    for (var stopId of path) {\r\n                        stop = TransitStops.getStopById(stopId);\r\n                        latlngs.push({ lat: parseFloat(stop.lat), lng: parseFloat(stop.lng) });\r\n                    }\r\n                    Map.fitBounds(latlngs);\r\n                }\r\n            });\r\n\r\n            $(\".route-selection\").on(\"mouseleave\", function () {\r\n                //Map.setCenter(Loc.getCurrentPosition());\r\n                //Map.setZoom(16);\r\n                //Map.removeAllMarkers();\r\n                //Map.removeAllPolylines();\r\n            });\r\n\r\n            $(\".route-selection\").on(\"click\", function () {\r\n                hidePanel();\r\n\r\n                Map.removeAllMarkers();\r\n                Map.removeAllPolylines();\r\n\r\n                var provider = TransitRoutes.getProvider($(this).attr(\"gtw-provider\"));\r\n                var route = provider.getRouteById($(this).attr(\"gtw-route-id\"));\r\n                var stop = TransitStops.getStopById($(this).attr(\"gtw-stop-id\"));\r\n                var bound = $(this).attr(\"gtw-bound\");\r\n\r\n                showRouteList(route, bound, stop, true);\r\n                drawRouteOnMap(route, bound);\r\n            });\r\n\r\n            $(\"#button-cancel-search\").on(\"click\", function () {\r\n                if (!$(this).hasClass(\"disabled\")) {\r\n                    $(\"#search-transit-text\").val(\"\");\r\n                    $(\"#button-cancel-search\").addClass(\"btn-light\");\r\n                    $(\"#button-cancel-search\").addClass(\"disabled\");\r\n                    $(\"#button-cancel-search\").removeClass(\"btn-danger\");\r\n                    $(\"#button-cancel-search\").html(\"<i class=\\\"fas fa-search\\\"></i>\");\r\n\r\n                    $(\".nearby-route-list\").css(\"display\", \"flex\");\r\n                    $(\".all-route-list\").css(\"display\", \"none\");\r\n                    Map.setCenter(Loc.getCurrentPosition());\r\n                    Map.setZoom(16);\r\n                    Map.removeAllMarkers();\r\n                    Map.removeAllPolylines();\r\n                }\r\n            });\r\n\r\n            $(\"#search-transit-text\").on(\"input\", function () {\r\n                clearTimeout(searchTimeout);\r\n                searchTimeout = setTimeout(function () {\r\n                    var val = $(\"#search-transit-text\").val();\r\n                    if (val && val !== \"\") {\r\n                        $(\"#button-cancel-search\").removeClass(\"btn-light\");\r\n                        $(\"#button-cancel-search\").removeClass(\"disabled\");\r\n                        $(\"#button-cancel-search\").addClass(\"btn-danger\");\r\n                        $(\"#button-cancel-search\").html(\"<i class=\\\"fas fa-times\\\"></i>\");\r\n\r\n                        $(\".nearby-route-list\").css(\"display\", \"none\");\r\n                        $(\".all-route-list\").css(\"display\", \"flex\");\r\n                        Map.setCenter(Loc.getCurrentPosition());\r\n                        Map.setZoom(16);\r\n                        Map.removeAllMarkers();\r\n                        Map.removeAllPolylines();\r\n                    } else {\r\n                        $(\"#button-cancel-search\").addClass(\"btn-light\");\r\n                        $(\"#button-cancel-search\").addClass(\"disabled\");\r\n                        $(\"#button-cancel-search\").removeClass(\"btn-danger\");\r\n                        $(\"#button-cancel-search\").html(\"<i class=\\\"fas fa-search\\\"></i>\");\r\n\r\n                        $(\".nearby-route-list\").css(\"display\", \"flex\");\r\n                        $(\".all-route-list\").css(\"display\", \"none\");\r\n                    }\r\n\r\n                    $(\".all-route-list .route-selection\").each(function () {\r\n                        var routeId = $(this).attr(\"gtw-route-id\");\r\n                        var providerName = $(this).attr(\"gtw-provider\");\r\n                        var bound = $(this).attr(\"gtw-bound\");\r\n\r\n                        var provider = TransitRoutes.getProvider(providerName);\r\n                        var route = provider.getRouteById(routeId);\r\n                        var paths = route.paths[bound];\r\n                        var lastStop = TransitStops.getStopById(paths[paths.length - 1]);\r\n\r\n                        var rp = Misc.similarity(Lang.localizedKey(route, \"routeName\"), val);\r\n                        var pp = Misc.similarity(providerName, val);\r\n                        var sp = Misc.similarity(lastStop.stopName, val);\r\n\r\n                        if (rp < 0.3 && pp < 0.3 && sp < 0.3) {\r\n                            $(this).attr(\"style\", \"display: none!important\");\r\n                            $(this).attr(\"sim\", \"0.0\");\r\n                        } else {\r\n                            $(this).attr(\"style\", \"display: block\");\r\n                            $(this).attr(\"sim\", Math.round(Math.max(rp, pp, sp) * 1000) / 1000);\r\n                        }\r\n                    });\r\n\r\n                    var list = $(\".all-route-list .route-selection\").get();\r\n                    list.sort(function (a, b) {\r\n                        return $(b).attr(\"sim\") - $(a).attr(\"sim\");\r\n                    });\r\n                    for (var i = 0; i < list.length; i++) {\r\n                        list[i].parentNode.appendChild(list[i]);\r\n                    }\r\n                    $(\".all-route-list .route-selection:nth-child(1)\").mouseenter();\r\n                }, 500);\r\n            });\r\n\r\n            vars[\"allNearbyRoutes\"] = allNearbyRoutes;\r\n            scripts[\"transitEtaUpdateUi\"]();\r\n            timers[\"nearbyRoutesUpdate\"] = (setInterval(function () {\r\n                scripts[\"transitEtaUpdateUi\"]();\r\n            }, 30000));\r\n        } else {\r\n            //TODO: better message or auto add plugins according to region\r\n            $(\".tab-panel\").html(\"<br /><div class=\\\"alert alert-danger\\\" role=\\\"alert\\\"><i class=\\\"fas fa-exclamation-triangle\\\"></i> \" + $.i18n(\"transit-eta-no-plugins-providing-transit-data\") + \"</div>\");\r\n        }\r\n    }\r\n};","//GTW Platform Configuration\r\n\r\nexport default {\r\n    //\r\n    // Default Map API\r\n    //\r\n    // The map to be used in the UI, you can use:\r\n    //   - auto (Experimental. Prefers Google Map, fallback to Open Street Map)\r\n    //   - googlemap (Recommended)\r\n    //   - openstreetmap\r\n    mapApi: \"googlemap\",\r\n\r\n    //\r\n    // Google Map API Key\r\n    //\r\n    // You have to create an API key from the Google Cloud Console to\r\n    // use Google Map features. The default one only works on the\r\n    // official server.\r\n    googleMapApiKey: \"AIzaSyAhU7FqH46IdF4RaHrBlABfkoFlHZeudFg\"\r\n};","// GoToWhere startup script\r\n\r\nimport $ from 'jquery';\r\nwindow.jQuery = $;\r\nwindow.$ = $;\r\n\r\nvar req = require.context(\"@wikimedia/jquery.i18n/src\");\r\n\r\nvar files = [\"js\", \"messagestore\", \"fallbacks\", \"parser\", \"emitter\", \"language\"];\r\nfiles.forEach(function (module) {\r\n    req(\"./jquery.i18n.\" + module);\r\n});\r\n\r\nimport 'bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport './style.css';\r\nimport './timeline.css';\r\n\r\nimport 'smartwizard';\r\nimport 'smartwizard/dist/css/smart_wizard.css';\r\n\r\nimport '@fortawesome/fontawesome-free/js/fontawesome';\r\nimport '@fortawesome/fontawesome-free/js/solid';\r\nimport '@fortawesome/fontawesome-free/js/regular';\r\nimport '@fortawesome/fontawesome-free/js/brands';\r\n\r\n//Strict mode\r\n'use strict';\r\n\r\n/*\r\nconst _allModules = [\r\n\t\"gtw-app\",\r\n\t\"gtw-settings\",\r\n\t\"gtw-cors\",\r\n\t\"gtw-misc\",\r\n\t\"gtw-map\",\r\n\t\"gtw-event\",\r\n\t\"gtw-eta\",\r\n\t\"gtw-ui\",\r\n\t\"gtw-func\",\r\n\t\"gtw-location\",\r\n\t\"gtw-requestlimiter\",\r\n\t\"gtw-plugin\",\r\n\t\"gtw-pluginloader\"\r\n];\r\n*/\r\n\r\nvar __headerTexts = [\"<i class=\\\"fas fa-map-marked-alt\\\"></i> \\u53bb\\u908a\\u35ce GoToWhere\", \"<i class=\\\"fas fa-map-marked-alt\\\"></i> GoToWhere<small>.ga</small>\", \"<i class=\\\"fas fa-map-marked-alt\\\"></i> HeuiBin<small>.ga</small>\"];\r\nvar __stopHeaderAnimation = false;\r\n\r\nfunction __headerAnimation(i) {\r\n    if (__stopHeaderAnimation) {\r\n        return;\r\n    }\r\n\r\n    if (i === undefined || i > 2) {\r\n        i = 0;\r\n    }\r\n    $(\".startup h1\").html(__headerTexts[i]);\r\n    $(\".startup h1\").fadeIn(2000, function () {\r\n        $(\".startup h1\").fadeOut(2000, function () {\r\n            __headerAnimation(i + 1);\r\n        });\r\n    });\r\n}\r\n\r\n$(document).ready(function () {\r\n    adjustMargin();\r\n    $(\".startup .progress-panel\").fadeIn(5000);\r\n    $(\".startup .container\").fadeIn(2000, function () {\r\n        __headerAnimation();\r\n    });\r\n    console.log(\"GoToWhere (c) 2019. Licensed under the MIT License.\");\r\n    $(\"#startup-status\").html(\"Loading GoToWhere scripts...\");\r\n});\r\n\r\n$(window).resize(function () {\r\n    adjustMargin();\r\n});\r\n\r\nwindow.adjustMargin = function () {\r\n    var hh = $(\".header\").height();\r\n    var dh = $(window).height();\r\n    $(\".desktop.half-map-container\").css(\"height\", dh - hh);\r\n    $(\".content-panel-container\").css(\"height\", dh - hh);\r\n};\r\n\r\n/*\r\nrequirejs.config({\r\n    baseUrl: 'js/lib',\r\n    paths: {\r\n        \"xhook\": \"../xhook.min\",\r\n        \"crypto-js\": \"../../vendor/crypto-js-3.1.9-1/crypto-js\",\r\n        \"proj4\": \"../../vendor/proj4js-2.5.0/dist/proj4\"\r\n    }\r\n});\r\n*/\r\n\r\nimport * as Cors from './gtw-cors';\r\nimport * as PluginLoader from './gtw-pluginloader';\r\nimport * as Transit from './gtw-citydata-transit';\r\nimport * as TransitEta from './gtw-citydata-transit-eta';\r\nimport * as Map from './gtw-map';\r\nimport * as loc from './gtw-location';\r\nimport * as ui from './gtw-ui';\r\nimport * as settings from './gtw-settings';\r\nimport * as RequestLimiter from './gtw-requestlimiter';\r\nimport * as log from './gtw-log';\r\nimport * as lang from './gtw-lang';\r\nimport * as Database from './gtw-db';\r\nimport proj4 from 'proj4';\r\n\r\nproj4.defs(\"EPSG:2326\", \"+proj=tmerc +lat_0=22.31213333333334 +lon_0=114.1785555555556 +k=1 +x_0=836694.05 +y_0=819069.8 +ellps=intl +towgs84=-162.619,-276.959,-161.764,0.067753,-2.24365,-1.15883,-1.09425 +units=m +no_defs\");\r\nproj4.defs(\"EPSG:4326\", \"+proj=longlat +datum=WGS84 +no_defs\");\r\n\r\nsettings.load();\r\n\r\nlang.changeLanguage(settings.get(\"preferred_language\", \"en\"));\r\n\r\nRequestLimiter.start();\r\n\r\nCors.register(\"www.gotowhere.ga\", true);\r\nCors.register(\"plugins.gotowhere.ga\", true);\r\n\r\n$(\"#startup-status\").html($.i18n(\"startup-status-downloading-plugins\"));\r\n\r\n\r\n$(\"#startup-progress\").css(\"width\", \"12.5%\");\r\n$(\"#startup-status\").html($.i18n(\"startup-status-open-db\"));\r\nvar promise = Database.open();\r\n\r\nif (!promise) {\r\n    $(\"#startup-status\").attr(\"style\", \"color: red\");\r\n    $(\"#startup-status\").html($.i18n(\"startup-status-not-supported\"));\r\n} else {\r\n    promise.then(function () {\r\n        $(\"#startup-progress\").css(\"width\", \"25%\");\r\n        $(\"#startup-status\").html($.i18n(\"startup-status-loading-plugins\"));\r\n        promise = PluginLoader.load(function (progress) {\r\n            $(\"#startup-progress\").css(\"width\", 25 + (progress / 8) + \"%\");\r\n        });\r\n        promise.then(function () {\r\n            $(\"#startup-status\").html($.i18n(\"startup-status-init-db\"));\r\n            promise = Transit.fetchAllDatabase(function (progress) {\r\n                $(\"#startup-progress\").css(\"width\", (25 + progress / 4 * 3) + \"%\");\r\n            });\r\n            promise.then(function () {\r\n                $(\"#startup-progress\").css(\"width\", \"100%\");\r\n                $(\"#startup-status\").html($.i18n(\"startup-status-init-map\"));\r\n                promise = Map.init();\r\n                promise.then(function () {\r\n                    $(\"#startup-status\").html($.i18n(\"startup-status-finish\"));\r\n\r\n                    ui.init();\r\n                    //TransitManager.start();\r\n                    //TransitManager.forceUpdate();\r\n\r\n                    var errPlugins = [];\r\n                    var plugin;\r\n                    for (var pluginKey in PluginLoader.plugins) {\r\n                        plugin = PluginLoader.plugins[pluginKey];\r\n                        if (plugin.status < 0) {\r\n                            errPlugins.push(plugin);\r\n                        }\r\n                    }\r\n                    console.log(errPlugins);\r\n\r\n                    if (errPlugins.length) {\r\n                        ui.showModal(\"errorplugins\", errPlugins);\r\n                    }\r\n\r\n                    loc.requestLocationAccess(function () {\r\n                        ui.init();\r\n                        //TransitManager.forceUpdate();\r\n                        $(\"#loc-status-btn\").addClass(\"btn-success\");\r\n                        $(\"#loc-status-btn\").removeClass(\"btn-warning\");\r\n                        setTimeout(function () {\r\n                            $(\"#loc-status-btn\").fadeOut(500);\r\n                        }, 2000);\r\n                    }, function () {\r\n                        $(\"#loc-status-btn\").addClass(\"btn-danger\");\r\n                        $(\"#loc-status-btn\").removeClass(\"btn-warning\");\r\n                        $(\"#loc-status-btn\").append(\" <span>Failed!</span>\");\r\n                        setTimeout(function () {\r\n                            $(\"#loc-status-btn span\").fadeOut(500);\r\n                        }, 5000);\r\n                    });\r\n\r\n                    setTimeout(function () {\r\n                        $(\".footer\").animate({ height: 0, opacity: 0 }, 1000, function () {\r\n                            $(\".footer\").css(\"display\", \"none\");\r\n                        });\r\n                    }, 2000);\r\n                    $(\".startup\").fadeOut(1000, function () {\r\n                        __stopHeaderAnimation = true;\r\n                    });\r\n                });\r\n            });\r\n        });\r\n    });\r\n}","var map = {\n\t\"./jquery.i18n\": 24,\n\t\"./jquery.i18n.emitter\": 25,\n\t\"./jquery.i18n.emitter.bidi\": 26,\n\t\"./jquery.i18n.emitter.bidi.js\": 26,\n\t\"./jquery.i18n.emitter.js\": 25,\n\t\"./jquery.i18n.fallbacks\": 27,\n\t\"./jquery.i18n.fallbacks.js\": 27,\n\t\"./jquery.i18n.js\": 24,\n\t\"./jquery.i18n.language\": 28,\n\t\"./jquery.i18n.language.js\": 28,\n\t\"./jquery.i18n.messagestore\": 29,\n\t\"./jquery.i18n.messagestore.js\": 29,\n\t\"./jquery.i18n.parser\": 30,\n\t\"./jquery.i18n.parser.js\": 30,\n\t\"./languages/bs\": 31,\n\t\"./languages/bs.js\": 31,\n\t\"./languages/dsb\": 32,\n\t\"./languages/dsb.js\": 32,\n\t\"./languages/fi\": 33,\n\t\"./languages/fi.js\": 33,\n\t\"./languages/ga\": 34,\n\t\"./languages/ga.js\": 34,\n\t\"./languages/he\": 35,\n\t\"./languages/he.js\": 35,\n\t\"./languages/hsb\": 36,\n\t\"./languages/hsb.js\": 36,\n\t\"./languages/hu\": 37,\n\t\"./languages/hu.js\": 37,\n\t\"./languages/hy\": 38,\n\t\"./languages/hy.js\": 38,\n\t\"./languages/la\": 39,\n\t\"./languages/la.js\": 39,\n\t\"./languages/ml\": 40,\n\t\"./languages/ml.js\": 40,\n\t\"./languages/os\": 41,\n\t\"./languages/os.js\": 41,\n\t\"./languages/ru\": 42,\n\t\"./languages/ru.js\": 42,\n\t\"./languages/sl\": 43,\n\t\"./languages/sl.js\": 43,\n\t\"./languages/uk\": 44,\n\t\"./languages/uk.js\": 44\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 50;","var content = require(\"!!../node_modules/css-loader/dist/cjs.js!./style.css\");\n\nif (typeof content === 'string') {\n  content = [[module.id, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\")(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n","exports = module.exports = require(\"../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"body {\\r\\n    width: 100%;\\r\\n    height: 100vh;\\r\\n    overflow: hidden;\\r\\n    position: absolute;\\r\\n}\\r\\n\\r\\n.landscape-notice {\\r\\n    display: none;\\r\\n    width: 100%;\\r\\n    height: 100%;\\r\\n    background-color: white;\\r\\n    z-index: 5;\\r\\n    position: relative;\\r\\n    padding: 12%;\\r\\n    font-weight: bold;\\r\\n}\\r\\n\\r\\n/* Toast */\\r\\n\\r\\n.toast-stack-container {\\r\\n    position: absolute;\\r\\n    top: 0;\\r\\n    right: 0;\\r\\n    width: 100%;\\r\\n}\\r\\n\\r\\n#gtw-toast-stack {\\r\\n    position: absolute;\\r\\n    top: 0;\\r\\n    right: 0;\\r\\n    margin: 1rem;\\r\\n    z-index: 3;\\r\\n}\\r\\n\\r\\n/* Startup DIV CSS */\\r\\n\\r\\n.startup {\\r\\n    position: absolute;\\r\\n    top: 0;\\r\\n    background-color: white;\\r\\n    width: 100%;\\r\\n    height: 100%;\\r\\n    overflow: hidden;\\r\\n    z-index: 4;\\r\\n}\\r\\n\\r\\n.startup .container {\\r\\n    display: none;\\r\\n    position: relative;\\r\\n}\\r\\n\\r\\n.startup .progress-panel {\\r\\n    position: absolute;\\r\\n    text-align: center;\\r\\n    width: 100%;\\r\\n    bottom: 0px;\\r\\n}\\r\\n\\r\\n.request-progress-panel {\\r\\n    position: absolute;\\r\\n    text-align: center;\\r\\n    width: 100%;\\r\\n    left: 0px;\\r\\n    bottom: 0px;\\r\\n    display: none;\\r\\n}\\r\\n\\r\\n.startup .overlay {\\r\\n    position: absolute;\\r\\n    top: 0;\\r\\n    height: 100%;\\r\\n    width: 100%;\\r\\n    background-color: white;\\r\\n    opacity: 0.5;\\r\\n    z-index: 1;\\r\\n}\\r\\n\\r\\n.startup .progress-panel {\\r\\n    display: none;\\r\\n}\\r\\n\\r\\n/* Getting Started Panel */\\r\\n.getting-started-panel {\\r\\n    display: none;\\r\\n    padding: 1rem;\\r\\n    position: absolute;\\r\\n    z-index: 1;\\r\\n    width: 100%;\\r\\n    height: 100%;\\r\\n}\\r\\n\\r\\n.getting-started-panel p.app-title {\\r\\n    margin-top: 0.8125rem;\\r\\n    margin-left: 1rem;\\r\\n    margin-bottom: 0.8125rem;\\r\\n    white-space: nowrap;\\r\\n    line-height: inherit;\\r\\n    font-size: 1.25rem;\\r\\n}\\r\\n\\r\\n#gettingStartedWizard {\\r\\n    margin-top: 2rem;\\r\\n    background-color: white;\\r\\n    padding: 1rem;\\r\\n    width: 100%;\\r\\n}\\r\\n\\r\\n#gettingStartedWizard ul {\\r\\n    flex-wrap: nowrap;\\r\\n    overflow-x: auto;\\r\\n    overflow-y: hidden;\\r\\n}\\r\\n\\r\\n.getting-started-progress-panel {\\r\\n    display: none;\\r\\n}\\r\\n\\r\\n.getting-started-progress-panel .progress-panel {\\r\\n    text-align: center;\\r\\n}\\r\\n\\r\\n.getting-started-plugin-error-panel{\\r\\n    display: none;\\r\\n}\\r\\n\\r\\n/* ETA CSS */\\r\\n.bg-trans {\\r\\n    background-color: unset;\\r\\n}\\r\\n\\r\\n.half-map-container {\\r\\n    display: none;\\r\\n    width: 100%;\\r\\n    position: absolute;\\r\\n    overflow-x: hidden;\\r\\n    overflow-y: scroll;\\r\\n    z-index: 2;\\r\\n}\\r\\n\\r\\n.container {\\r\\n    padding: 0px;\\r\\n}\\r\\n\\r\\n.content-panel-container {\\r\\n\\r\\n}\\r\\n\\r\\n.item-list {\\r\\n    height: inherit;\\r\\n}\\r\\n\\r\\n.item-list .list-group {\\r\\n    width: 100%;\\r\\n    height: inherit;\\r\\n    overflow-x: hidden;\\r\\n    overflow-y: scroll;\\r\\n    z-index: 1;\\r\\n}\\r\\n\\r\\n.item-list .list-group li {\\r\\n    min-height: 100px;\\r\\n}\\r\\n\\r\\n.all-route-list {\\r\\n    display: none;\\r\\n}\\r\\n\\r\\n.stop-eta tr.active {\\r\\n    font-size: 18px;\\r\\n    font-weight: bold;\\r\\n}\\r\\n\\r\\n/* Map CSS */\\r\\n\\r\\n#gtw-map {\\r\\n    width: 100vw;\\r\\n    height: 100vh;\\r\\n    top: 0px;\\r\\n    left: 0px;\\r\\n    position: fixed;\\r\\n    overflow: hidden;\\r\\n}\\r\\n\\r\\n/* Search panel CSS */\\r\\n\\r\\n.top-panel {\\r\\n    padding: 8px;\\r\\n    margin-bottom: 0px;\\r\\n    background-color: unset;\\r\\n}\\r\\n\\r\\n.top-panel .tabs, .hori-scroll {\\r\\n    overflow: auto;\\r\\n    white-space: nowrap;\\r\\n    display: block;\\r\\n    padding: 4px;\\r\\n}\\r\\n\\r\\n.top-panel .tabs .ui-tab, .hori-scroll button {\\r\\n    display: inline-block;\\r\\n}\\r\\n\\r\\n#loc-status-btn {\\r\\n    position: fixed;\\r\\n    z-index: 3;\\r\\n    right: 4px;\\r\\n    bottom: 4px;\\r\\n}\\r\\n\\r\\n/* Header, footer CSS */\\r\\n\\r\\n.gtw-container {\\r\\n    position: fixed;\\r\\n    top: 0;\\r\\n    width: 100%;\\r\\n    z-index: 1;\\r\\n}\\r\\n\\r\\n/*\\r\\n.header nav {\\r\\n    background-color: #343a40\\r\\n}\\r\\n*/\\r\\n\\r\\n.footer {\\r\\n    padding-top: 8px;\\r\\n    padding-bottom: 0px;\\r\\n    position: fixed;\\r\\n    bottom: 0;\\r\\n    z-index: 2;\\r\\n    width: 100%;\\r\\n}\\r\\n\\r\\n.map-overlay {\\r\\n    position: fixed;\\r\\n    width: 100%;\\r\\n    height: 100%;\\r\\n    top: 0;\\r\\n    left: 0;\\r\\n    right: 0;\\r\\n    bottom: 0;\\r\\n    background-color: rgba(233,236,239,0.8);\\r\\n    z-index: 1;\\r\\n    cursor: pointer;\\r\\n}\\r\\n\\r\\n/* Loading Overlay CSS */\\r\\n\\r\\n.loading-overlay {\\r\\n    position: fixed;\\r\\n    display: none;\\r\\n    width: 100%;\\r\\n    height: 100%;\\r\\n    top: 0;\\r\\n    left: 0;\\r\\n    right: 0;\\r\\n    bottom: 0;\\r\\n    background-color: rgba(0,0,0,0.3);\\r\\n    z-index: 3;\\r\\n    opacity: 100;\\r\\n    cursor: pointer;\\r\\n}\\r\\n\\r\\n.loading-overlay .spinner-border {\\r\\n    width: 3rem;\\r\\n    height: 3rem;\\r\\n}\\r\\n\\r\\n/* Route selection */\\r\\n\\r\\n.route-selection .route-id {\\r\\n    padding-right: 16px;\\r\\n    font-weight: bold;\\r\\n}\\r\\n\\r\\n.route-selection .stop-info {\\r\\n    margin-left: 8px;\\r\\n    margin-right: 8px;\\r\\n}\\r\\n\\r\\n.route-selection .stop-info .badge {\\r\\n\\r\\n}\\r\\n\\r\\n.route-selection .stop-info .col-sm-12{\\r\\n    white-space: nowrap;\\r\\n    overflow: hidden;\\r\\n    text-overflow: ellipsis; \\r\\n    width: inherit;\\r\\n}\\r\\n\\r\\n/* Half-map Panel */\\r\\n.half-map-panel {\\r\\n    display: none;\\r\\n    background-color: unset;\\r\\n    padding: 8px;\\r\\n    margin-bottom: 0px;\\r\\n    position: relative;\\r\\n    z-index: 1;\\r\\n}\\r\\n\\r\\n/* Media Query */\\r\\n@media only screen and (min-width: 768px) {\\r\\n    .top-panel {\\r\\n        /*width: 25%;*/\\r\\n    }\\r\\n\\r\\n    .half-map-panel {\\r\\n        /*width: 25%;*/\\r\\n    }\\r\\n\\r\\n    .half-map-container {\\r\\n        /*width: 25%;*/\\r\\n        margin-left: 0;\\r\\n    }\\r\\n\\r\\n    .content-panel-container {\\r\\n        /*width: 25%;*/\\r\\n        margin-left: 0;\\r\\n    }\\r\\n\\r\\n    .request-progress-panel {\\r\\n        width: 25%;\\r\\n    }\\r\\n\\r\\n    #gtw-map {\\r\\n        width: 100vw;\\r\\n        /*width: 75%;\\r\\n        margin-left: 25%;*/\\r\\n    }\\r\\n\\r\\n    .gtw-container {\\r\\n        width: 25%;\\r\\n    }\\r\\n\\r\\n    .map-overlay {\\r\\n        width: 25%;\\r\\n        /*display: none;*/\\r\\n    }\\r\\n\\r\\n    .getting-started-panel {\\r\\n        /*width: 25%;*/\\r\\n    }\\r\\n\\r\\n    .desktop.half-map-panel.gtw-half-map {\\r\\n        display: block;\\r\\n    }\\r\\n\\r\\n    .desktop.half-map-container.gtw-half-map {\\r\\n        display: block;\\r\\n    }\\r\\n\\r\\n    .mobile.half-map-panel.gtw-half-map {\\r\\n        display: none;\\r\\n    }\\r\\n\\r\\n    .mobile.half-map-container.gtw-half-map {\\r\\n        display: none;\\r\\n    }\\r\\n}\\r\\n\\r\\n@media only screen and (max-width: 768px) {\\r\\n    .gtw-container nav {\\r\\n        margin-top: env(safe-area-inset-top);\\r\\n        background-color: unset;\\r\\n    }\\r\\n\\r\\n    .toast-stack-container {\\r\\n        margin-top: env(safe-area-inset-top);\\r\\n        margin-bottom: env(safe-area-inset-bottom);\\r\\n    }\\r\\n\\r\\n    .getting-started-panel {\\r\\n        margin-top: env(safe-area-inset-top);\\r\\n        margin-bottom: env(safe-area-inset-bottom);\\r\\n    }\\r\\n\\r\\n    .modal {\\r\\n        margin-top: env(safe-area-inset-top);\\r\\n        margin-bottom: env(safe-area-inset-bottom);\\r\\n    }\\r\\n\\r\\n    .mobile-split-container {\\r\\n        margin-top: 50vh;\\r\\n        padding: 0px;\\r\\n    }\\r\\n\\r\\n    .startup .progress-panel {\\r\\n        margin-bottom: env(safe-area-inset-bottom);\\r\\n    }\\r\\n\\r\\n    /*\\r\\n    body.gtw-half-map {\\r\\n        overflow-y: scroll;\\r\\n    }\\r\\n\\r\\n    #gtw-map {\\r\\n        display: none;\\r\\n    }\\r\\n    */\\r\\n\\r\\n    .map-overlay.gtw-half-map {\\r\\n        /*display: none;*/\\r\\n        margin-top: 50vh;\\r\\n        height: 50vh;\\r\\n    }\\r\\n\\r\\n    /*\\r\\n    #gtw-map.gtw-half-map {\\r\\n        height: 50vh;\\r\\n        display: block;\\r\\n    }\\r\\n    */\\r\\n\\r\\n    .desktop.half-map-panel.gtw-half-map {\\r\\n        display: none;\\r\\n    }\\r\\n\\r\\n    .desktop.half-map-container.gtw-half-map {\\r\\n        display: none;\\r\\n    }\\r\\n\\r\\n    .mobile.half-map-panel.gtw-half-map {\\r\\n        display: block;\\r\\n        height: 20vh;\\r\\n    }\\r\\n\\r\\n    .mobile.half-map-container.gtw-half-map {\\r\\n        display: block;\\r\\n        height: 30vh;\\r\\n    }\\r\\n}\\r\\n\\r\\n/*\\r\\n@media only screen and (max-height: 768px) and (orientation: landscape) {\\r\\n    .landscape-notice {\\r\\n        display: block;\\r\\n    }\\r\\n}\\r\\n*/\\r\\n\\r\\n@media screen and (max-width: 470px) {\\r\\n    .startup h1 {\\r\\n        font-size: 10vw;\\r\\n    }\\r\\n}\", \"\"]);\n","var content = require(\"!!../node_modules/css-loader/dist/cjs.js!./timeline.css\");\n\nif (typeof content === 'string') {\n  content = [[module.id, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\")(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n","exports = module.exports = require(\"../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"\\r\\nimg {\\r\\n    vertical-align: middle;\\r\\n}\\r\\n\\r\\n.img-responsive {\\r\\n    display: block;\\r\\n    height: auto;\\r\\n    max-width: 100%;\\r\\n}\\r\\n\\r\\n.img-rounded {\\r\\n    border-radius: 3px;\\r\\n}\\r\\n\\r\\n.img-thumbnail {\\r\\n    background-color: #fff;\\r\\n    border: 1px solid #ededf0;\\r\\n    border-radius: 3px;\\r\\n    display: inline-block;\\r\\n    height: auto;\\r\\n    line-height: 1.428571429;\\r\\n    max-width: 100%;\\r\\n    moz-transition: all .2s ease-in-out;\\r\\n    o-transition: all .2s ease-in-out;\\r\\n    padding: 2px;\\r\\n    transition: all .2s ease-in-out;\\r\\n    webkit-transition: all .2s ease-in-out;\\r\\n}\\r\\n\\r\\n.img-circle {\\r\\n    border-radius: 50%;\\r\\n}\\r\\n\\r\\n.timeline-centered {\\r\\n    position: relative;\\r\\n    margin-bottom: 30px;\\r\\n}\\r\\n\\r\\n    .timeline-centered:before, .timeline-centered:after {\\r\\n        content: \\\" \\\";\\r\\n        display: table;\\r\\n    }\\r\\n\\r\\n    .timeline-centered:after {\\r\\n        clear: both;\\r\\n    }\\r\\n\\r\\n    .timeline-centered:before, .timeline-centered:after {\\r\\n        content: \\\" \\\";\\r\\n        display: table;\\r\\n    }\\r\\n\\r\\n    .timeline-centered:after {\\r\\n        clear: both;\\r\\n    }\\r\\n\\r\\n    .timeline-centered:before {\\r\\n        content: '';\\r\\n        position: absolute;\\r\\n        display: block;\\r\\n        width: 4px;\\r\\n        background: #f5f5f6;\\r\\n        /*left: 50%;*/\\r\\n        top: 20px;\\r\\n        bottom: 20px;\\r\\n        margin-left: 30px;\\r\\n    }\\r\\n\\r\\n    .timeline-centered .timeline-entry {\\r\\n        position: relative;\\r\\n        /*width: 50%;\\r\\n        float: right;*/\\r\\n        margin-top: 5px;\\r\\n        margin-left: 30px;\\r\\n        margin-bottom: 10px;\\r\\n        clear: both;\\r\\n    }\\r\\n\\r\\n        .timeline-centered .timeline-entry:before, .timeline-centered .timeline-entry:after {\\r\\n            content: \\\" \\\";\\r\\n            display: table;\\r\\n        }\\r\\n\\r\\n        .timeline-centered .timeline-entry:after {\\r\\n            clear: both;\\r\\n        }\\r\\n\\r\\n        .timeline-centered .timeline-entry:before, .timeline-centered .timeline-entry:after {\\r\\n            content: \\\" \\\";\\r\\n            display: table;\\r\\n        }\\r\\n\\r\\n        .timeline-centered .timeline-entry:after {\\r\\n            clear: both;\\r\\n        }\\r\\n\\r\\n        .timeline-centered .timeline-entry.begin {\\r\\n            margin-bottom: 0;\\r\\n        }\\r\\n\\r\\n        .timeline-centered .timeline-entry.left-aligned {\\r\\n            float: left;\\r\\n        }\\r\\n\\r\\n            .timeline-centered .timeline-entry.left-aligned .timeline-entry-inner {\\r\\n                margin-left: 0;\\r\\n                margin-right: -18px;\\r\\n            }\\r\\n\\r\\n                .timeline-centered .timeline-entry.left-aligned .timeline-entry-inner .timeline-time {\\r\\n                    left: auto;\\r\\n                    right: -100px;\\r\\n                    text-align: left;\\r\\n                }\\r\\n\\r\\n                .timeline-centered .timeline-entry.left-aligned .timeline-entry-inner .timeline-icon {\\r\\n                    float: right;\\r\\n                }\\r\\n\\r\\n                .timeline-centered .timeline-entry.left-aligned .timeline-entry-inner .timeline-label {\\r\\n                    margin-left: 0;\\r\\n                    margin-right: 70px;\\r\\n                }\\r\\n\\r\\n                    .timeline-centered .timeline-entry.left-aligned .timeline-entry-inner .timeline-label:after {\\r\\n                        left: auto;\\r\\n                        right: 0;\\r\\n                        margin-left: 0;\\r\\n                        margin-right: -9px;\\r\\n                        -moz-transform: rotate(180deg);\\r\\n                        -o-transform: rotate(180deg);\\r\\n                        -webkit-transform: rotate(180deg);\\r\\n                        -ms-transform: rotate(180deg);\\r\\n                        transform: rotate(180deg);\\r\\n                    }\\r\\n\\r\\n        .timeline-centered .timeline-entry .timeline-entry-inner {\\r\\n            position: relative;\\r\\n            margin-left: -20px;\\r\\n        }\\r\\n\\r\\n            .timeline-centered .timeline-entry .timeline-entry-inner:before, .timeline-centered .timeline-entry .timeline-entry-inner:after {\\r\\n                content: \\\" \\\";\\r\\n                display: table;\\r\\n            }\\r\\n\\r\\n            .timeline-centered .timeline-entry .timeline-entry-inner:after {\\r\\n                clear: both;\\r\\n            }\\r\\n\\r\\n            .timeline-centered .timeline-entry .timeline-entry-inner:before, .timeline-centered .timeline-entry .timeline-entry-inner:after {\\r\\n                content: \\\" \\\";\\r\\n                display: table;\\r\\n            }\\r\\n\\r\\n            .timeline-centered .timeline-entry .timeline-entry-inner:after {\\r\\n                clear: both;\\r\\n            }\\r\\n\\r\\n            .timeline-centered .timeline-entry .timeline-entry-inner .timeline-time {\\r\\n                position: absolute;\\r\\n                left: -100px;\\r\\n                text-align: right;\\r\\n                padding: 10px;\\r\\n                -webkit-box-sizing: border-box;\\r\\n                -moz-box-sizing: border-box;\\r\\n                box-sizing: border-box;\\r\\n            }\\r\\n\\r\\n                .timeline-centered .timeline-entry .timeline-entry-inner .timeline-time > span {\\r\\n                    display: block;\\r\\n                }\\r\\n\\r\\n                    .timeline-centered .timeline-entry .timeline-entry-inner .timeline-time > span:first-child {\\r\\n                        font-size: 15px;\\r\\n                        font-weight: bold;\\r\\n                    }\\r\\n\\r\\n                    .timeline-centered .timeline-entry .timeline-entry-inner .timeline-time > span:last-child {\\r\\n                        font-size: 12px;\\r\\n                    }\\r\\n\\r\\n            .timeline-centered .timeline-entry .timeline-entry-inner .timeline-icon {\\r\\n                background: #fff;\\r\\n                color: #737881;\\r\\n                display: block;\\r\\n                width: 40px;\\r\\n                height: 40px;\\r\\n                -webkit-background-clip: padding-box;\\r\\n                -moz-background-clip: padding;\\r\\n                background-clip: padding-box;\\r\\n                -webkit-border-radius: 20px;\\r\\n                -moz-border-radius: 20px;\\r\\n                border-radius: 20px;\\r\\n                text-align: center;\\r\\n                -moz-box-shadow: 0 0 0 5px #f5f5f6;\\r\\n                -webkit-box-shadow: 0 0 0 5px #f5f5f6;\\r\\n                box-shadow: 0 0 0 5px #f5f5f6;\\r\\n                line-height: 40px;\\r\\n                font-size: 15px;\\r\\n                float: left;\\r\\n            }\\r\\n\\r\\n                .timeline-centered .timeline-entry .timeline-entry-inner .timeline-icon.bg-primary {\\r\\n                    background-color: #303641;\\r\\n                    color: #fff;\\r\\n                }\\r\\n\\r\\n                .timeline-centered .timeline-entry .timeline-entry-inner .timeline-icon.bg-secondary {\\r\\n                    background-color: #ee4749;\\r\\n                    color: #fff;\\r\\n                }\\r\\n\\r\\n                .timeline-centered .timeline-entry .timeline-entry-inner .timeline-icon.bg-success {\\r\\n                    background-color: #00a651;\\r\\n                    color: #fff;\\r\\n                }\\r\\n\\r\\n                .timeline-centered .timeline-entry .timeline-entry-inner .timeline-icon.bg-info {\\r\\n                    background-color: #21a9e1;\\r\\n                    color: #fff;\\r\\n                }\\r\\n\\r\\n                .timeline-centered .timeline-entry .timeline-entry-inner .timeline-icon.bg-warning {\\r\\n                    background-color: #fad839;\\r\\n                    color: #fff;\\r\\n                }\\r\\n\\r\\n                .timeline-centered .timeline-entry .timeline-entry-inner .timeline-icon.bg-danger {\\r\\n                    background-color: #cc2424;\\r\\n                    color: #fff;\\r\\n                }\\r\\n\\r\\n            .timeline-centered .timeline-entry .timeline-entry-inner .timeline-label {\\r\\n                position: relative;\\r\\n                background: #f5f5f6;\\r\\n                padding: 1em;\\r\\n                margin-left: 60px;\\r\\n                -webkit-background-clip: padding-box;\\r\\n                -moz-background-clip: padding;\\r\\n                background-clip: padding-box;\\r\\n                -webkit-border-radius: 3px;\\r\\n                -moz-border-radius: 3px;\\r\\n                border-radius: 3px;\\r\\n            }\\r\\n\\r\\n                .timeline-centered .timeline-entry .timeline-entry-inner .timeline-label:after {\\r\\n                    content: '';\\r\\n                    display: block;\\r\\n                    position: absolute;\\r\\n                    width: 0;\\r\\n                    height: 0;\\r\\n                    border-style: solid;\\r\\n                    border-width: 9px 9px 9px 0;\\r\\n                    border-color: transparent #f5f5f6 transparent transparent;\\r\\n                    left: 0;\\r\\n                    top: 10px;\\r\\n                    margin-left: -9px;\\r\\n                }\\r\\n\\r\\n                .timeline-centered .timeline-entry .timeline-entry-inner .timeline-label h2, .timeline-centered .timeline-entry .timeline-entry-inner .timeline-label p {\\r\\n                    color: #737881;\\r\\n                    font-family: \\\"Noto Sans\\\",sans-serif;\\r\\n                    font-size: 12px;\\r\\n                    margin: 0;\\r\\n                    line-height: 1.428571429;\\r\\n                }\\r\\n\\r\\n                    .timeline-centered .timeline-entry .timeline-entry-inner .timeline-label p + p {\\r\\n                        margin-top: 15px;\\r\\n                    }\\r\\n\\r\\n                .timeline-centered .timeline-entry .timeline-entry-inner .timeline-label h2 {\\r\\n                    font-size: 16px;\\r\\n                }\\r\\n\\r\\n                    .timeline-centered .timeline-entry .timeline-entry-inner .timeline-label h2 button {\\r\\n                        color: #303641;\\r\\n                    }\\r\\n\\r\\n                    .timeline-centered .timeline-entry .timeline-entry-inner .timeline-label h2 span {\\r\\n                        -webkit-opacity: .6;\\r\\n                        -moz-opacity: .6;\\r\\n                        opacity: .6;\\r\\n                        -ms-filter: alpha(opacity=60);\\r\\n                        filter: alpha(opacity=60);\\r\\n                    }\\r\\n\", \"\"]);\n","var map = {\n\t\"./categories\": [\n\t\t12,\n\t\t3\n\t],\n\t\"./categories.json\": [\n\t\t12,\n\t\t3\n\t],\n\t\"./gtwp-ctbnwfb\": [\n\t\t20,\n\t\t9,\n\t\t0\n\t],\n\t\"./gtwp-ctbnwfb/\": [\n\t\t20,\n\t\t9,\n\t\t0\n\t],\n\t\"./gtwp-ctbnwfb/LICENCE\": [\n\t\t75,\n\t\t7,\n\t\t25\n\t],\n\t\"./gtwp-ctbnwfb/index\": [\n\t\t20,\n\t\t9,\n\t\t0\n\t],\n\t\"./gtwp-ctbnwfb/index.js\": [\n\t\t20,\n\t\t9,\n\t\t0\n\t],\n\t\"./gtwp-hktransit\": [\n\t\t21,\n\t\t9,\n\t\t1\n\t],\n\t\"./gtwp-hktransit/\": [\n\t\t21,\n\t\t9,\n\t\t1\n\t],\n\t\"./gtwp-hktransit/LICENCE\": [\n\t\t76,\n\t\t7,\n\t\t26\n\t],\n\t\"./gtwp-hktransit/index\": [\n\t\t21,\n\t\t9,\n\t\t1\n\t],\n\t\"./gtwp-hktransit/index.js\": [\n\t\t21,\n\t\t9,\n\t\t1\n\t],\n\t\"./gtwp-kmb\": [\n\t\t22,\n\t\t9,\n\t\t2\n\t],\n\t\"./gtwp-kmb/\": [\n\t\t22,\n\t\t9,\n\t\t2\n\t],\n\t\"./gtwp-kmb/LICENCE\": [\n\t\t77,\n\t\t7,\n\t\t27\n\t],\n\t\"./gtwp-kmb/index\": [\n\t\t22,\n\t\t9,\n\t\t2\n\t],\n\t\"./gtwp-kmb/index.js\": [\n\t\t22,\n\t\t9,\n\t\t2\n\t],\n\t\"./repository\": [\n\t\t2,\n\t\t3\n\t],\n\t\"./repository.json\": [\n\t\t2,\n\t\t3\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(2).map(__webpack_require__.e)).then(function() {\n\t\treturn __webpack_require__.t(id, ids[1])\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 69;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./gtw-map-googlemap\": [\n\t\t48,\n\t\t3\n\t],\n\t\"./gtw-map-googlemap.js\": [\n\t\t48,\n\t\t3\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 70;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./modal-about-header.html\": [\n\t\t78,\n\t\t9\n\t],\n\t\"./modal-errorplugins-header.html\": [\n\t\t79,\n\t\t12\n\t],\n\t\"./modal-pluginclosedapi-header.html\": [\n\t\t80,\n\t\t15\n\t],\n\t\"./modal-pluginmanager-header.html\": [\n\t\t81,\n\t\t18\n\t],\n\t\"./modal-settings-header.html\": [\n\t\t82,\n\t\t21\n\t],\n\t\"./modal-viewplugin-header.html\": [\n\t\t83,\n\t\t24\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 7);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 71;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./modal-about-body.html\": [\n\t\t84,\n\t\t7\n\t],\n\t\"./modal-errorplugins-body.html\": [\n\t\t85,\n\t\t10\n\t],\n\t\"./modal-pluginclosedapi-body.html\": [\n\t\t86,\n\t\t13\n\t],\n\t\"./modal-pluginmanager-body.html\": [\n\t\t87,\n\t\t16\n\t],\n\t\"./modal-settings-body.html\": [\n\t\t88,\n\t\t19\n\t],\n\t\"./modal-viewplugin-body.html\": [\n\t\t89,\n\t\t22\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 7);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 72;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./modal-about-footer.html\": [\n\t\t90,\n\t\t8\n\t],\n\t\"./modal-errorplugins-footer.html\": [\n\t\t91,\n\t\t11\n\t],\n\t\"./modal-pluginclosedapi-footer.html\": [\n\t\t92,\n\t\t14\n\t],\n\t\"./modal-pluginmanager-footer.html\": [\n\t\t93,\n\t\t17\n\t],\n\t\"./modal-settings-footer.html\": [\n\t\t94,\n\t\t20\n\t],\n\t\"./modal-viewplugin-footer.html\": [\n\t\t95,\n\t\t23\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 7);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 73;\nmodule.exports = webpackAsyncContext;","//GTW Logging\r\n\r\nvar maxEntries = 1000;\r\n\r\nvar logEntries = [];\r\n\r\nvar jsTrace = console.trace;\r\nconsole.trace = function (msg) {\r\n    log(\"console\", msg, -1);\r\n};\r\n\r\nvar jsDebug = console.debug;\r\nconsole.debug = function (msg) {\r\n    log(\"console\", msg, -2);\r\n};\r\n\r\nvar jsInfo = console.log;\r\nconsole.log = function (msg) {\r\n    log(\"console\", msg, 0);\r\n};\r\n\r\nvar jsWarn = console.warn;\r\nconsole.warn = function (msg) {\r\n    log(\"console\", msg, 1);\r\n};\r\n\r\nvar jsError = console.error;\r\nconsole.error = function (msg) {\r\n    log(\"console\", msg, 2);\r\n};\r\n\r\nexport var printObject = true;\r\n\r\nexport function toConsole(msg, level) {\r\n    if (level === -2) {\r\n        jsTrace(msg);\r\n    } else if (level === -1) {\r\n        jsDebug(msg);\r\n    } else if (level === 0) {\r\n        jsInfo(msg);\r\n    } else if (level === 1) {\r\n        jsWarn(msg);\r\n    } else if (level === 2) {\r\n        jsError(msg);\r\n    }\r\n}\r\n\r\nexport function toLogger(tag, msg, time, level) {\r\n    if (logEntries.length >= maxEntries) {\r\n        logEntries.shift();\r\n    }\r\n    logEntries.push({\r\n        time: time,\r\n        msg: msg,\r\n        level: level\r\n    });\r\n\r\n    showToast(logEntries.length, tag, msg, time, level);\r\n}\r\n\r\nvar lastMsg = 0;\r\nvar lastTag = 0;\r\nvar lastLevel = 0;\r\nvar lastTime = 0;\r\n\r\nexport function showToast(id, tag, msg, time, level) {\r\n    if (level <= 0) {\r\n        return;\r\n    }\r\n\r\n    if (lastMsg === msg && lastTag === tag && lastLevel === level && time - lastTime < 7500) {\r\n        return;\r\n    }\r\n\r\n    lastTime = time;\r\n    lastMsg = msg;\r\n    lastTag = tag;\r\n    lastLevel = level;\r\n\r\n    var node = $(\"#gtw-toast-stack\");\r\n    var levelName = \"Unknown\";\r\n    var className = \"\";\r\n\r\n    if (level === -2) {\r\n        levelName = \"Trace\";\r\n    } else if (level === -1) {\r\n        levelName = \"Debug\";\r\n    } else if (level === 0) {\r\n        levelName = \"Info\";\r\n        className = \" text-primary\";\r\n    } else if (level === 1) {\r\n        levelName = \"Warning\";\r\n        className = \" text-warning\";\r\n    } else if (level === 2) {\r\n        levelName = \"Error\";\r\n        className = \" text-danger\";\r\n    }\r\n\r\n    var html =\r\n        \"<div class=\\\"toast\\\" role=\\\"alert\\\" log-entry-id=\\\"\" + id + \"\\\">\" +\r\n        \"    <div class=\\\"toast-header\\\">\" +\r\n        \"        <strong class=\\\"mr-auto\" + className + \"\\\">\" + levelName + \" (\" + tag + \")</strong>\" +\r\n        \"        <small class=\\\"text-muted\\\">\" + new Date(time).toLocaleString() + \"</small>\" +\r\n        \"        <button type=\\\"button\\\" class=\\\"ml-2 mb-1 close\\\" data-dismiss=\\\"toast\\\" aria-label=\\\"Close\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\" +\r\n        \"    </div>\" +\r\n        \"    <div class=\\\"toast-body\\\">\" + msg +\r\n        \"    </div>\" +\r\n        \"</div>\"\r\n        ;\r\n\r\n    if (node.children().length >= 3) {\r\n        node.children().each(function (i) {\r\n            if (i >= 2) {\r\n                $(this).toast('hide');\r\n            }\r\n        });\r\n    }\r\n\r\n    node.prepend(html);\r\n\r\n    var key = \".toast[log-entry-id='\" + id + \"']\";\r\n    $(key).on('hidden.bs.toast', function () {\r\n        $(this).remove();\r\n    });\r\n    $(key).toast({\r\n        animation: true,\r\n        autohide: true,\r\n        delay: 5000\r\n    });\r\n    $(key).toast('show');\r\n}\r\n\r\nexport function getEntries() {\r\n    return logEntries;\r\n}\r\n\r\nexport function log(tag = \"unknown\", msg, level = 0) {\r\n    var time = Date.now();\r\n\r\n    if (typeof msg === \"object\") {\r\n        if (printObject) {\r\n            toConsole(\"[\" + new Date(time).toLocaleString() + \"] [\" + tag + \"]\", level);\r\n            toConsole(msg, level);\r\n        } else {\r\n            var pmsg = JSON.stringify(msg);\r\n            toConsole(\"[\" + new Date(time).toLocaleString() + \"] [\" + tag + \"] \" + pmsg, level);\r\n        }\r\n    } else {\r\n        toConsole(\"[\" + new Date(time).toLocaleString() + \"] [\" + tag + \"] \" + msg, level);\r\n    }\r\n\r\n    toLogger(tag, msg, time, level);\r\n}\r\n\r\nexport function trace(tag, msg) {\r\n    log(tag, msg, -2);\r\n}\r\n\r\nexport function debug(tag, msg) {\r\n    log(tag, msg, -1);\r\n}\r\n\r\nexport function info(tag, msg) {\r\n    log(tag, msg, 0);\r\n}\r\n\r\nexport function warn(tag, msg) {\r\n    log(tag, msg, 1);\r\n}\r\n\r\nexport function error(tag, msg) {\r\n    log(tag, msg, 2);\r\n}"],"sourceRoot":""}