{"version":3,"sources":["webpack:///./src/gtw-ui-gettingstarted.js"],"names":["gettingStarted","$","css","smartWizard","useURLhash","showStepURLhash","html","lang","Lang","languages","on","changeLanguage","this","val","byRegion","key","repos","region","push","regionOptionsHtml","i18n","removeAttr","byCategory","pluginKey","category","calcInstallCount","categoryCount","node","totalCount","allCount","categoryKey","cates","id","each","prop","attr","length","removeClass","addClass","installCountNode","pluginHtml","plugin","installCount","closedApi","package","fullName","name","change","checked","showModal","hasClass","pkgs","pkg","errors","PluginLoader","install","i","setTimeout","window","location","reload"],"mappings":"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","file":"38.8ac1796810dac3afd000.js","sourcesContent":["export function gettingStarted() {\r\n    $(\".header nav\").css(\"display\", \"none\");\r\n    $(\"#gettingStartedWizard\").smartWizard({\r\n        useURLhash: false,\r\n        showStepURLhash: false\r\n    });\r\n    $(\".top-panel\").css(\"display\", \"none\");\r\n    $(\".content-panel-container\").css(\"display\", \"none\");\r\n    $(\".getting-started-panel\").css(\"display\", \"block\");\r\n\r\n    var html = \"\";\r\n    for (var lang in Lang.languages) {\r\n        html += \"<option value=\\\"\" + lang + \"\\\">\" + Lang.languages[lang] + \" (\" + lang + \")</option>\";\r\n    }\r\n    $(\"#langSelect\").html(html);\r\n    $(\"#langSelect\").on(\"change\", function () {\r\n        Lang.changeLanguage($(this).val());\r\n    });\r\n\r\n    var byRegion = {};\r\n    for (var key in repos) {\r\n        if (!byRegion[repos[key].region]) {\r\n            byRegion[repos[key].region] = [];\r\n        }\r\n        byRegion[repos[key].region].push(repos[key]);\r\n    }\r\n\r\n    $(\"#regionSelect\").html(\"\");\r\n    var regionOptionsHtml = \"<option value=\\\"notselected\\\">-- \" + $.i18n(\"getting-started-wizard-step-plugins-select\") + \" --</option>\";\r\n    for (var region in byRegion) {\r\n        regionOptionsHtml += \"<option value=\\\"\" + region + \"\\\"> \" + region + \"</option>\";\r\n    }\r\n    $(\"#regionSelect\").removeAttr(\"disabled\");\r\n    $(\"#regionSelect\").html(regionOptionsHtml);\r\n\r\n    var byCategory = {};\r\n    for (var pluginKey in repos) {\r\n        if (!byCategory[repos[pluginKey].category]) {\r\n            byCategory[repos[pluginKey].category] = [];\r\n        }\r\n        byCategory[repos[pluginKey].category].push(repos[pluginKey]);\r\n    }\r\n\r\n    var calcInstallCount = function () {\r\n        var totalCount = 0;\r\n        var categoryCount;\r\n        var node;\r\n        var allCount = 0;\r\n        var category;\r\n\r\n        for (var categoryKey in byCategory) {\r\n            category = cates[categoryKey];\r\n\r\n            categoryCount = 0;\r\n            $(\".plugin-switch[category-id='\" + category.id + \"']\").each(function () {\r\n                if ($(this).prop(\"checked\")) {\r\n                    categoryCount++;\r\n                }\r\n            });\r\n            node = $(\".category-btn[category-id='\" + category.id + \"']\");\r\n            node.html(node.attr(\"category-name\") + \" (\" + categoryCount + \"/\" + byCategory[categoryKey].length + \")\");\r\n            totalCount += categoryCount;\r\n            allCount += byCategory[categoryKey].length;\r\n        }\r\n\r\n        $(\"#pluginsToInstallCount\").html($.i18n(\"getting-started-wizard-step-plugins-install-count\", totalCount, allCount));\r\n        $(\"#installCount\").html($.i18n(\"getting-started-wizard-step-finish-press-button\", totalCount));\r\n        $(\".need-to-install\").css(\"display\", totalCount > 0 ? \"none\" : \"block\");\r\n        if (totalCount > 0) {\r\n            $(\"#getStartedBtn\").removeClass(\"disabled\");\r\n        } else {\r\n            $(\"#getStartedBtn\").addClass(\"disabled\");\r\n        }\r\n    };\r\n\r\n    $(\"#regionSelect\").on(\"change\", function () {\r\n        var val = $(this).val();\r\n        var node = $(\"#pluginsToInstallAccordion\");\r\n        var installCountNode = $(\"#pluginsToInstallCount\");\r\n        if (val === \"notselected\") {\r\n            node.html(\"\");\r\n            installCountNode.html(\"\");\r\n            calcInstallCount();\r\n            return;\r\n        }\r\n\r\n        var html = \"\";\r\n        var pluginHtml;\r\n        var category;\r\n        for (var categoryKey in byCategory) {\r\n            category = cates[categoryKey];\r\n\r\n            installCount = 0;\r\n            pluginHtml = \"\";\r\n            for (var plugin of byCategory[categoryKey]) {\r\n                pluginHtml +=\r\n                    \"            <div class=\\\"custom-control custom-switch\\\">\" +\r\n                    \"                <input type=\\\"checkbox\\\" class=\\\"custom-control-input plugin-switch\" + (plugin.closedApi ? \" plugin-closed-api\" : \"\") + \"\\\" category-id=\\\"\" + category.id + \"\\\" package=\\\"\" + plugin.package + \"\\\" id=\\\"switch-\" + plugin.package + \"\\\"\" + (plugin.closedApi ? \"\" : \"checked\") + \">\" +\r\n                    \"                <label class=\\\"custom-control-label\\\" for=\\\"switch-\" + plugin.package + \"\\\">\" + plugin.fullName;\r\n                if (plugin.closedApi) {\r\n                    pluginHtml +=\r\n                        \"<br /><i class=\\\"fas fa-exclamation-triangle\\\"></i> \" + $.i18n(\"getting-started-wizard-step-plugins-closed-api\");\r\n                }\r\n                pluginHtml +=\r\n                    \"</label>\" +\r\n                    \"            </div>\"\r\n                    ;\r\n            }\r\n\r\n            html +=\r\n                \"<div class=\\\"card\\\">\" +\r\n                \"    <div class=\\\"card-header\\\" id=\\\"category-\" + category.id + \"-heading\\\">\" +\r\n                \"        <h2 class=\\\"mb-0\\\">\" +\r\n                \"            <button class=\\\"btn btn-link category-btn\\\" type=\\\"button\\\" data-toggle=\\\"collapse\\\" data-target=\\\"#collapse-category-\" + category.id + \"\\\" aria-expanded=\\\"true\\\" aria-controls=\\\"collapse-category-\" + category.id + \"\\\" category-id=\\\"\" + category.id + \"\\\" category-name=\\\"\" + category.name + \"\\\">\" + category.name + \"</button>\" +\r\n                \"        </h2>\" +\r\n                \"    </div>\" +\r\n                \"    <div id=\\\"collapse-category-\" + category.id + \"\\\" class=\\\"collapse\\\" aria-labelledby=\\\"category-\" + category.id + \"-heading\\\" data-parent=\\\"#pluginsToInstallAccordion\\\">\" +\r\n                \"        <div class=\\\"card-body\\\">\" + pluginHtml +\r\n                \"        </div>\" +\r\n                \"    </div>\" +\r\n                \"</div>\"\r\n                ;\r\n        }\r\n        node.html(html);\r\n        calcInstallCount();\r\n\r\n        $(\".plugin-closed-api\").change(function () {\r\n            if (this.checked) {\r\n                showModal(\"pluginclosedapi\", $(this), calcInstallCount);\r\n                //$(this).prop(\"checked\", returnVal);\r\n            }\r\n        });\r\n\r\n        $(\".plugin-switch\").change(function () {\r\n            calcInstallCount();\r\n        });\r\n\r\n        $(\"#getStartedBtn\").on(\"click\", function () {\r\n            if ($(this).hasClass(\"disabled\")) {\r\n                return;\r\n            }\r\n\r\n            $(\"#gettingStartedWizard\").css(\"display\", \"none\");\r\n            $(\".getting-started-progress-panel\").css(\"display\", \"block\");\r\n\r\n            var pkgs = [];\r\n            $(\".plugin-switch\").each(function () {\r\n                if ($(this).prop(\"checked\")) {\r\n                    var pkg = $(this).attr(\"package\");\r\n                    pkgs.push(pkg);\r\n                }\r\n            });\r\n            var errors = [];\r\n            var p;\r\n            for (var pkg of pkgs) {\r\n                PluginLoader.install(pkg);\r\n            }\r\n            $(\"#gs-plugin-progress\").css(\"width\", \"100%\");\r\n\r\n            if (errors.length === 0) {\r\n                setTimeout(function () {\r\n                    window.location.reload();\r\n                }, 500);\r\n                return;\r\n            }\r\n\r\n            $(\".getting-started-progress-panel\").css(\"display\", \"none\");\r\n            $(\".getting-started-plugin-error-panel\").css(\"display\", \"block\");\r\n\r\n            var html = \"<p>\" + $.i18n(\"getting-started-error-plugin-network-error\") + \"</p><button class=\\\"btn btn-block btn-warning\\\" onclick=\\\"window.location.reload()\\\" type=\\\"button\\\">\" + $.i18n(\"getting-started-error-refresh-btn\") + \"</button><hr /><p><b>\" + $.i18n(\"getting-started-error-affected-plugins\") + \"</b><br />\";\r\n            var i;\r\n            for (i = 0; i < errors.length; i++) {\r\n                html += errors[i];\r\n                if (i !== errors.length - 1) {\r\n                    html += \", \";\r\n                }\r\n            }\r\n            html += \"</p>\";\r\n\r\n            $(\".getting-started-plugin-error-panel .desc\").html(html);\r\n        });\r\n    });\r\n}"],"sourceRoot":""}