{"version":3,"sources":["webpack:///./src/gtw-map-googlemap.js"],"names":["markerInc","markers","lockedMarkers","infoWindowInc","infoWindows","polylineInc","polylines","lockedPolylines","map","init","Promise","resolve","reject","$","html","window","initMap","google","maps","Map","document","getElementById","center","zoom","disableDefaultUI","apiKey","googleMapApiKey","location","origin","startsWith","console","warn","element","createElement","src","head","appendChild","setCenter","coords","setZoom","addMarker","position","options","onClickFunc","marker","Marker","label","title","icon","addListener","setMarkerPosition","markerId","setPosition","getMarker","lockMarker","indexOf","push","unlockMarker","i","splice","removeMarker","includes","setMap","removeAllMarkers","key","parseInt","addInfoWindow","content","open","egetMarker","infowindow","InfoWindow","addPolyline","strokeColor","strokeWeight","strokeOpacity","geodesic","polyline","Polyline","path","lockPolyline","polylineId","unlockPolyline","removePolyline","removeAllPolylines","fitBounds","bounds","out","LatLngBounds","bound","extend"],"mappings":"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","file":"2.6fec8ca471c60e44eafd.js","sourcesContent":["//GTW Map source code\r\n\r\nimport config from './gtw-config';\r\nimport * as loc from './gtw-location';\r\n\r\nvar markerInc = 1;\r\nvar markers = {};\r\nvar lockedMarkers = [];\r\n\r\nvar infoWindowInc = 1;\r\nvar infoWindows = {};\r\n\r\nvar polylineInc = 1;\r\nvar polylines = {};\r\nvar lockedPolylines = [];\r\n\r\nexport var map = false;\r\n\r\nexport function init() {\r\n    return new Promise((resolve, reject) => {\r\n        $(\"#gtw-map\").html(\"<div id=\\\"gmap\\\" style=\\\"width: 100%; height: 100%;\\\"></div>\");\r\n        //Required callback function from the API\r\n        window.initMap = function () {\r\n            map = new google.maps.Map(document.getElementById(\"gmap\"), {\r\n                center: loc.getCurrentPosition(),\r\n                zoom: 12,\r\n                disableDefaultUI: true\r\n            });\r\n            resolve();\r\n            delete window.initMap;\r\n        };\r\n\r\n        var apiKey = config.googleMapApiKey;\r\n\r\n        if (!window.location.origin || window.location.origin === \"\" || window.location.origin === \"file://\" || window.location.origin.startsWith(\"http://localhost\") || window.location.origin.startsWith(\"https://localhost\")) {\r\n            apiKey = \"\";\r\n            console.warn(\"gtw-map-googlemap: You are running the application in local/no-origin mode. The API key has been removed now.\");\r\n        }\r\n\r\n        var element = document.createElement(\"script\");\r\n        element.src = \"https://maps.googleapis.com/maps/api/js?callback=initMap&key=\" + apiKey;\r\n        document.head.appendChild(element);\r\n    });\r\n}\r\n\r\nexport function setCenter(coords) {\r\n    return map.setCenter(coords);\r\n}\r\n\r\nexport function setZoom(zoom) {\r\n    return map.setZoom(zoom);\r\n}\r\n\r\nexport function addMarker(position, options, onClickFunc) {\r\n    var marker = new google.maps.Marker({\r\n        position: position,\r\n        label: options.label,\r\n        title: options.title,\r\n        icon: options.icon,\r\n        map: map\r\n    });\r\n    markers[markerInc] = marker;\r\n\r\n    if (onClickFunc) {\r\n        marker.addListener(\"click\", function () {\r\n            onClickFunc();\r\n        });\r\n    }\r\n\r\n    return markerInc++;\r\n}\r\n\r\nexport function setMarkerPosition(markerId, position) {\r\n    if (!markerId || !markers[markerId]) {\r\n        return false;\r\n    }\r\n    markers[markerId].setPosition(position);\r\n}\r\n\r\nexport function getMarker(markerId) {\r\n    if (!markerId || !markers[markerId]) {\r\n        return false;\r\n    }\r\n    return markers[markerId];\r\n}\r\n\r\nexport function lockMarker(markerId) {\r\n    if (!markerId || !markers[markerId]) {\r\n        return false;\r\n    }\r\n    if (lockedMarkers.indexOf(markerId) === -1) {\r\n        lockedMarkers.push(markerId);\r\n    }\r\n    return true;\r\n}\r\n\r\nexport function unlockMarker(markerId) {\r\n    var i = lockedMarkers.indexOf(markerId);\r\n    if (i === -1) {\r\n        return false;\r\n    }\r\n    lockedMarkers.splice(i, 1);\r\n    return true;\r\n}\r\n\r\nexport function removeMarker(markerId) {\r\n    if (!markerId || !markers[markerId]) {\r\n        return false;\r\n    }\r\n    if (lockedMarkers.includes(markerId)) {\r\n        return false;\r\n    }\r\n    markers[markerId].setMap(null);\r\n    delete markers[markerId];\r\n    return true;\r\n}\r\n\r\nexport function removeAllMarkers() {\r\n    for (var key in markers) {\r\n        if (!lockedMarkers.includes(parseInt(key))) {\r\n            markers[key].setMap(null);\r\n        }\r\n    }\r\n    markers = {};\r\n    return true;\r\n}\r\n\r\nexport function addInfoWindow(markerId, content, open = false) {\r\n    var marker = egetMarker(markerId);\r\n    if (!marker) {\r\n        return false;\r\n    }\r\n\r\n    var infowindow = new google.maps.InfoWindow({\r\n        content: content\r\n    });\r\n\r\n    marker.addListener(\"click\", function () {\r\n        infowindow.open(map, marker);\r\n    });\r\n\r\n    if (open) {\r\n        infowindow.open(map, marker);\r\n    }\r\n\r\n    infoWindows[infoWindowInc] = infowindow;\r\n    return infoWindowInc++;\r\n}\r\n\r\nexport function addPolyline(coords, strokeColor, strokeWeight, strokeOpacity = 1.0, geodesic = true) {\r\n    var polyline = new google.maps.Polyline({\r\n        path: coords,\r\n        geodesic: geodesic,\r\n        strokeColor: strokeColor,\r\n        strokeOpacity: strokeOpacity,\r\n        strokeWeight: strokeWeight\r\n    });\r\n\r\n    polyline.setMap(map);\r\n\r\n    polylines[polylineInc] = polyline;\r\n    return polylineInc++;\r\n}\r\n\r\nexport function lockPolyline(polylineId) {\r\n    if (!polyline || !polylines[polylineId]) {\r\n        return false;\r\n    }\r\n    if (lockedPolylines.indexOf(polylineId) === -1) {\r\n        lockedPolylines.push(polylineId);\r\n    }\r\n    return true;\r\n}\r\n\r\nexport function unlockPolyline(polylineId) {\r\n    var i = lockedPolylines.indexOf(polylineId);\r\n    if (i === -1) {\r\n        return false;\r\n    }\r\n    lockedPolylines.splice(i, 1);\r\n    return true;\r\n}\r\n\r\nexport function removePolyline(polylineId) {\r\n    if (!polylineId || !polylines[polylineId]) {\r\n        return false;\r\n    }\r\n    if (lockedPolylines.includes(polylineId)) {\r\n        return false;\r\n    }\r\n    polylines[polylineId].setMap(null);\r\n    delete polylines[polylineId];\r\n    return true;\r\n}\r\n\r\nexport function removeAllPolylines() {\r\n    for (var key in polylines) {\r\n        if (!lockedPolylines.includes(key)) {\r\n            polylines[key].setMap(null);\r\n        }\r\n    }\r\n    polylines = {};\r\n    return true;\r\n}\r\n\r\nexport function fitBounds(bounds) {\r\n    var out = new google.maps.LatLngBounds();\r\n    for (var bound of bounds) {\r\n        out.extend(bound);\r\n    }\r\n    map.fitBounds(out);\r\n}"],"sourceRoot":""}