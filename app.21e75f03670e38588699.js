(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{107:function(n,e,r){"use strict";r.r(e);var t=r(0),i=r.n(t),a=r(44),o=r.n(a),s=r(69),l=r.n(s),c=(r(147),r(149),r(151),r(153),r(155),r(156),r(158),r(159),r(160),r(161),r(22)),u=r(16),d=r(9),p=r(33),f=r(2),g=r(30),h=r(21),m=r(7),v=r(43),b=(r(190),r(32)),w=(r(31),r(6),r(41));window.jQuery=i.a,window.$=i.a,window.JSZip=o.a,window.JSZipUtils=l.a;var y=r(146);["js","messagestore","fallbacks","parser","emitter","language"].forEach((function(n){y("./jquery.i18n."+n)})),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(n=>{console.log("SW registered: ",n)}).catch(n=>{console.log("SW registration failed: ",n)})});var k=['<i class="fas fa-map-marked-alt"></i> 去邊㗎 GoToWhere','<i class="fas fa-map-marked-alt"></i> GoToWhere<small>.ga</small>','<i class="fas fa-map-marked-alt"></i> HeuiBin<small>.ga</small>'],_=!1;i()(document).ready((function(){adjustMargin(),i()(".startup .progress-panel").fadeIn(5e3),i()(".startup .container").fadeIn(2e3,(function(){!function n(e){_||((void 0===e||e>2)&&(e=0),i()(".startup h1").html(k[e]),i()(".startup h1").fadeIn(2e3,(function(){i()(".startup h1").fadeOut(2e3,(function(){n(e+1)}))})))}()})),console.log("GoToWhere (c) 2019. Licensed under the MIT License."),i()("#startup-status").html("Loading GoToWhere scripts...")})),i()(window).resize((function(){adjustMargin()})),window.adjustMargin=function(){var n=0;i()(".numeric-keypad .btn-group").each((function(){n+=i()(this).height()})),i()(".letter-keypad").css("height",n);var e=i()(".header").height(),r=i()(window).height();i()(".desktop.half-map-container").css("height",r-e),i()(".content-panel-container").css("height",r-e-n);var t=i()(".mobile-split-container").height(),a=i()(".mobile.half-map-panel").height();i()(".mobile.half-map-container").css("height",t-a)},window.p=p,i()(".build-version").html("1.1.2"),w.a.defs("EPSG:2326","+proj=tmerc +lat_0=22.31213333333334 +lon_0=114.1785555555556 +k=1 +x_0=836694.05 +y_0=819069.8 +ellps=intl +towgs84=-162.619,-276.959,-161.764,0.067753,-2.24365,-1.15883,-1.09425 +units=m +no_defs"),w.a.defs("EPSG:4326","+proj=longlat +datum=WGS84 +no_defs"),m.load(),b.changeLanguage(m.get("preferred_language","en")),v.d(),c.register("www.gotowhere.ga",!0),c.register("plugins.gotowhere.ga",!0);var x=["agency","calendar","calendar_dates","frequencies","routes","trips","stops","stop_time_paths","stop_times","fare_attributes","fare_rules"];window.indexedDB&&window.localStorage?(i()("#startup-progress").css("width","0%"),i()("#startup-status").html(i.a.i18n("startup-status-loading-plugins")),u.c((function(n){i()("#startup-progress").css("width",n/5+"%")})).then((function(){return i()("#startup-status").html(i.a.i18n("startup-status-fetching-reference-db")),p.fetchAllDatabase((function(n){i()("#startup-progress").css("width",n/5+20+"%")}))})).then((function(){return i()("#startup-status").html(i.a.i18n("startup-status-obtaining-db-version")),d.e((function(n){i()("#startup-progress").css("width",n/5+40+"%")}))})).then((function(){return i()("#startup-status").html(i.a.i18n("startup-status-checking-db-update")),d.a((function(n){i()("#startup-progress").css("width",n/5+60+"%")}))})).then((function(){return i()("#startup-status").html(i.a.i18n("startup-status-validating-db")),d.j((function(n){i()("#startup-progress").css("width",n/5+80+"%")}))})).then((function(){if(d.c()){d.d();var n="<b>"+i.a.i18n("startup-status-load-db-take-some-time")+"</b><br />";return i()("#startup-status").html(n+i.a.i18n("startup-status-downloading-db")),d.b((function(n){console.log(n),i()("#startup-progress").css("width",n/8+"%")})).then((function(){return i()("#startup-status").html(n+i.a.i18n("startup-status-preparing-update")),d.f((function(n){console.log(n),i()("#startup-progress").css("width",n/8+12.5+"%")}))})).then((function e(r){"number"!=typeof r&&(r=0);var t=x[r];return i()("#startup-status").html(n+i.a.i18n("startup-status-loading-"+t)),d.g(t,(function(n){console.log(n),i()("#startup-progress").css("width",(n/2/x.length+100*r/x.length)/100*75+25+"%")})).then((function(){return i()("#startup-status").html(n+i.a.i18n("startup-status-updating-"+t)),d.k((function(n){console.log(n),i()("#startup-progress").css("width",((n/2+50)/x.length+100*r/x.length)/100*75+25+"%")}))})).then((function(){if(r!=x.length-1)return e(r+1);d.i()}))}))}})).then((function(){return i()("#startup-progress").css("width","100%"),i()("#startup-status").html(i.a.i18n("startup-status-init-map")),f.c()})).then((function(){i()("#startup-status").html(i.a.i18n("startup-status-finish")),i()(".build-version").fadeOut(2e3);var n=localStorage.getItem("gtw-lastversion");n&&"1.1.2"!==n&&(console.log("Application updated to 1.1.2. Showing change-log."),h.d("updated","1.1.2")),localStorage.setItem("gtw-lastversion","1.1.2"),h.c();var e,r=[];for(var t in u.d)(e=u.d[t]).status<0&&r.push(e);console.log(r),r.length&&h.d("errorplugins",r),g.e((function(){i()("#loc-status-btn").addClass("btn-success"),i()("#loc-status-btn").removeClass("btn-warning"),setTimeout((function(){i()("#loc-status-btn").fadeOut(500)}),2e3)}),(function(){i()("#loc-status-btn").addClass("btn-danger"),i()("#loc-status-btn").removeClass("btn-warning"),i()("#loc-status-btn").append(" <span> "+i.a.i18n("location-error")+"</span>"),setTimeout((function(){i()("#loc-status-btn span").fadeOut(500)}),5e3)})),setTimeout((function(){i()(".footer").animate({height:0,opacity:0},1e3,(function(){i()(".footer").css("display","none")}))}),2e3),i()(".startup").fadeOut(1e3,(function(){_=!0}))}))):(i()("#startup-status").attr("style","color: red"),i()("#startup-status").html(i.a.i18n("startup-status-not-supported")))},112:function(n,e){},114:function(n,e){},146:function(n,e,r){var t={"./jquery.i18n":70,"./jquery.i18n.emitter":71,"./jquery.i18n.emitter.bidi":72,"./jquery.i18n.emitter.bidi.js":72,"./jquery.i18n.emitter.js":71,"./jquery.i18n.fallbacks":73,"./jquery.i18n.fallbacks.js":73,"./jquery.i18n.js":70,"./jquery.i18n.language":74,"./jquery.i18n.language.js":74,"./jquery.i18n.messagestore":75,"./jquery.i18n.messagestore.js":75,"./jquery.i18n.parser":76,"./jquery.i18n.parser.js":76,"./languages/bs":77,"./languages/bs.js":77,"./languages/dsb":78,"./languages/dsb.js":78,"./languages/fi":79,"./languages/fi.js":79,"./languages/ga":80,"./languages/ga.js":80,"./languages/he":81,"./languages/he.js":81,"./languages/hsb":82,"./languages/hsb.js":82,"./languages/hu":83,"./languages/hu.js":83,"./languages/hy":84,"./languages/hy.js":84,"./languages/la":85,"./languages/la.js":85,"./languages/ml":86,"./languages/ml.js":86,"./languages/os":87,"./languages/os.js":87,"./languages/ru":88,"./languages/ru.js":88,"./languages/sl":89,"./languages/sl.js":89,"./languages/uk":90,"./languages/uk.js":90};function i(n){var e=a(n);return r(e)}function a(n){if(!r.o(t,n)){var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}return t[n]}i.keys=function(){return Object.keys(t)},i.resolve=a,n.exports=i,i.id=146},151:function(n,e,r){var t=r(152);"string"==typeof t&&(t=[[n.i,t,""]]);var i={insert:"head",singleton:!1};r(29)(t,i);t.locals&&(n.exports=t.locals)},152:function(n,e,r){(n.exports=r(28)(!1)).push([n.i,"body {\r\n    width: 100%;\r\n    height: 100vh;\r\n    /* overflow: hidden; */\r\n    position: absolute;\r\n}\r\n\r\n.landscape-notice {\r\n    display: none;\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: white;\r\n    z-index: 5;\r\n    position: relative;\r\n    padding: 12%;\r\n    font-weight: bold;\r\n}\r\n\r\n/* Update Change-log */\r\n\r\n.build-version {\r\n    position: absolute;\r\n    top: 0;\r\n    right: 0;\r\n    z-index: 5;\r\n    padding-top: env(safe-area-inset-top);\r\n    margin: 1rem;\r\n}\r\n\r\n#updated-changelog {\r\n    white-space: normal;\r\n}\r\n\r\n/* Toast */\r\n\r\n.toast-stack-container {\r\n    position: absolute;\r\n    top: 0;\r\n    right: 0;\r\n    width: 100%;\r\n}\r\n\r\n#gtw-toast-stack {\r\n    position: absolute;\r\n    top: 0;\r\n    right: 0;\r\n    margin: 1rem;\r\n    z-index: 3;\r\n}\r\n\r\n/* Startup DIV CSS */\r\n\r\n.startup {\r\n    position: absolute;\r\n    top: 0;\r\n    background-color: white;\r\n    width: 100%;\r\n    height: 100%;\r\n    overflow: hidden;\r\n    z-index: 4;\r\n}\r\n\r\n.startup .container {\r\n    display: none;\r\n    position: relative;\r\n}\r\n\r\n.progress-panel {\r\n    position: absolute;\r\n    text-align: center;\r\n    width: 100%;\r\n    bottom: 0px;\r\n    z-index: 2;\r\n}\r\n\r\n.bg-loaddb-panel {\r\n    display: none;\r\n}\r\n\r\n.request-progress-panel {\r\n    position: absolute;\r\n    text-align: center;\r\n    width: 100%;\r\n    left: 0px;\r\n    bottom: 0px;\r\n    display: none;\r\n}\r\n\r\n.startup .overlay {\r\n    position: absolute;\r\n    top: 0;\r\n    height: 100%;\r\n    width: 100%;\r\n    background-color: white;\r\n    opacity: 0.5;\r\n    z-index: 1;\r\n}\r\n\r\n.startup .progress-panel {\r\n    display: none;\r\n}\r\n\r\n/* Getting Started Panel */\r\n.getting-started-panel {\r\n    display: none;\r\n    padding: 1rem;\r\n    position: absolute;\r\n    z-index: 1;\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n\r\n.getting-started-panel p.app-title {\r\n    margin-top: 0.8125rem;\r\n    margin-left: 1rem;\r\n    margin-bottom: 0.8125rem;\r\n    white-space: nowrap;\r\n    line-height: inherit;\r\n    font-size: 1.25rem;\r\n}\r\n\r\n#gettingStartedWizard {\r\n    margin-top: 2rem;\r\n    background-color: white;\r\n    padding: 1rem;\r\n    width: 100%;\r\n}\r\n\r\n#gettingStartedWizard ul {\r\n    flex-wrap: nowrap;\r\n    overflow-x: auto;\r\n    overflow-y: hidden;\r\n}\r\n\r\n.getting-started-progress-panel {\r\n    display: none;\r\n}\r\n\r\n.getting-started-progress-panel .progress-panel {\r\n    text-align: center;\r\n}\r\n\r\n.getting-started-plugin-error-panel{\r\n    display: none;\r\n}\r\n\r\n/* ETA CSS */\r\n.bg-trans {\r\n    background-color: unset;\r\n}\r\n\r\n.half-map-container {\r\n    display: none;\r\n    width: 100%;\r\n    position: absolute;\r\n    overflow-x: hidden;\r\n    overflow-y: scroll;\r\n    z-index: 2;\r\n}\r\n\r\n.container {\r\n    padding: 0px;\r\n}\r\n\r\n.content-panel-container {\r\n\r\n}\r\n\r\n.item-list {\r\n    height: inherit;\r\n}\r\n\r\n.item-list .list-group {\r\n    width: 100%;\r\n    height: inherit;\r\n    overflow-x: hidden;\r\n    overflow-y: scroll;\r\n    z-index: 1;\r\n}\r\n\r\n.item-list .list-group li {\r\n    min-height: 100px;\r\n}\r\n\r\n.all-route-list {\r\n    display: none;\r\n}\r\n\r\n.stop-eta tr.active {\r\n    font-size: 18px;\r\n    font-weight: bold;\r\n}\r\n\r\n/* Map CSS */\r\n\r\n#gtw-map {\r\n    width: 100vw;\r\n    height: 100vh;\r\n    top: 0px;\r\n    left: 0px;\r\n    position: fixed;\r\n    overflow: hidden;\r\n}\r\n\r\n/* Search panel CSS */\r\n\r\n.top-panel {\r\n    padding: 8px;\r\n    margin-bottom: 0px;\r\n    background-color: unset;\r\n}\r\n\r\n.top-panel .tabs, .hori-scroll {\r\n    overflow: auto;\r\n    white-space: nowrap;\r\n    display: block;\r\n    padding: 4px;\r\n}\r\n\r\n.top-panel .tabs .ui-tab, .hori-scroll button {\r\n    display: inline-block;\r\n}\r\n\r\n#loc-status-btn {\r\n    margin-top: env(safe-area-inset-top);\r\n    margin-bottom: env(safe-area-inset-bottom);\r\n    position: fixed;\r\n    z-index: 3;\r\n    right: 4px;\r\n    bottom: 4px;\r\n}\r\n\r\n/* Header, footer CSS */\r\n\r\n.gtw-container {\r\n    position: fixed;\r\n    top: 0;\r\n    width: 100%;\r\n    z-index: 1;\r\n}\r\n\r\n/*\r\n.header nav {\r\n    background-color: #343a40\r\n}\r\n*/\r\n\r\n.footer {\r\n    padding-top: 8px;\r\n    padding-bottom: 0px;\r\n    position: fixed;\r\n    bottom: 0;\r\n    z-index: 2;\r\n    width: 100%;\r\n}\r\n\r\n.map-overlay {\r\n    position: fixed;\r\n    width: 100%;\r\n    height: 100%;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    background-color: rgba(233,236,239,0.8);\r\n    z-index: 1;\r\n    cursor: pointer;\r\n}\r\n\r\n/* Loading Overlay CSS */\r\n\r\n.loading-overlay {\r\n    position: fixed;\r\n    display: none;\r\n    width: 100%;\r\n    height: 100%;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    background-color: rgba(0,0,0,0.3);\r\n    z-index: 3;\r\n    opacity: 100;\r\n    cursor: pointer;\r\n}\r\n\r\n.loading-overlay .loading-spinner {\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n\r\n.loading-overlay .spinner-border {\r\n    width: 3rem;\r\n    height: 3rem;\r\n}\r\n\r\n/* Touch Keypad */\r\n\r\n.touch-keypad {\r\n    position: fixed;\r\n    left: 0;\r\n    bottom: 0;\r\n    width: 100%;\r\n    margin: 0px;\r\n    padding: 0px;\r\n    z-index: 2;\r\n    background: rgba(255, 255, 255, 0.4);\r\n    display: none;\r\n    padding-bottom: env(safe-area-inset-bottom);\r\n}\r\n\r\n.touch-keypad .numeric-keypad {\r\n    width: 75%;\r\n}\r\n\r\n.touch-keypad .letter-keypad {\r\n    width: 25%;\r\n    overflow-x: hidden;\r\n    overflow-y: auto;\r\n    white-space: nowrap;\r\n    justify-content: flex-start;\r\n}\r\n\r\n.touch-keypad-key {\r\n    min-height: 58px;\r\n}\r\n\r\n/* Route selection */\r\n\r\n.route-selection .route-id {\r\n    padding-right: 16px;\r\n    font-weight: bold;\r\n}\r\n\r\n.route-selection .stop-info {\r\n    margin-left: 8px;\r\n    margin-right: 8px;\r\n}\r\n\r\n.route-selection .stop-info .badge {\r\n\r\n}\r\n\r\n.route-selection .stop-info .col-sm-12{\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis; \r\n    width: inherit;\r\n}\r\n\r\n/* Search Transit Field */\r\n\r\n#search-transit-text {\r\n    background-color: #fff;\r\n}\r\n\r\n/* Half-map Panel */\r\n.half-map-panel {\r\n    display: none;\r\n    background-color: unset;\r\n    padding: 8px;\r\n    margin-bottom: 0px;\r\n    position: relative;\r\n    z-index: 1;\r\n}\r\n\r\n.mobile-split-container {\r\n    /*margin-top: 50vh;*/\r\n    display: none;\r\n    position: fixed;\r\n    left: 0;\r\n    bottom: 0;\r\n    width: 100%;\r\n    height: 80%;\r\n    padding: 0px;\r\n    background-color: rgba(233,236,239,0.8);\r\n}\r\n\r\n/* Route list */\r\n\r\n.view-alert-btn {\r\n    font-size: inherit;\r\n    padding: 0px;\r\n}\r\n\r\n/* Media Query */\r\n@media only screen and (min-width: 768px) {\r\n    .top-panel {\r\n        /*width: 25%;*/\r\n    }\r\n\r\n    .half-map-panel {\r\n        /*width: 25%;*/\r\n    }\r\n\r\n    .half-map-container {\r\n        /*width: 25%;*/\r\n        margin-left: 0;\r\n    }\r\n\r\n    .content-panel-container {\r\n        /*width: 25%;*/\r\n        margin-left: 0;\r\n    }\r\n\r\n    .request-progress-panel {\r\n        width: 25%;\r\n    }\r\n\r\n    #gtw-map {\r\n        width: 100vw;\r\n        /*width: 75%;\r\n        margin-left: 25%;*/\r\n    }\r\n\r\n    .gtw-container {\r\n        width: 25%;\r\n    }\r\n\r\n    .map-overlay {\r\n        width: 25%;\r\n        /*display: none;*/\r\n    }\r\n\r\n    .touch-keypad {\r\n        width: 25%;\r\n    }\r\n\r\n    .getting-started-panel {\r\n        /*width: 25%;*/\r\n    }\r\n\r\n    .desktop.half-map-panel.gtw-half-map {\r\n        display: block;\r\n    }\r\n\r\n    .desktop.half-map-container.gtw-half-map {\r\n        display: block;\r\n    }\r\n\r\n    .mobile.half-map-panel.gtw-half-map {\r\n        display: none;\r\n    }\r\n\r\n    .mobile.half-map-container.gtw-half-map {\r\n        display: none;\r\n    }\r\n}\r\n\r\n@media only screen and (max-width: 768px) {\r\n    .gtw-container nav {\r\n        margin-top: env(safe-area-inset-top);\r\n        background-color: unset;\r\n    }\r\n\r\n    .toast-stack-container {\r\n        margin-top: env(safe-area-inset-top);\r\n        margin-bottom: env(safe-area-inset-bottom);\r\n    }\r\n\r\n    .getting-started-panel {\r\n        padding-top: env(safe-area-inset-top);\r\n        padding-bottom: env(safe-area-inset-bottom);\r\n    }\r\n\r\n    .modal {\r\n        padding-top: env(safe-area-inset-top);\r\n        padding-bottom: env(safe-area-inset-bottom);\r\n    }\r\n\r\n    .mobile-split-container.gtw-half-map {\r\n        display: block;\r\n    }\r\n\r\n    .startup .progress-panel {\r\n        padding-bottom: env(safe-area-inset-bottom);\r\n    }\r\n\r\n    /*\r\n    body.gtw-half-map {\r\n        overflow-y: scroll;\r\n    }\r\n\r\n    #gtw-map {\r\n        display: none;\r\n    }\r\n    */\r\n\r\n    .map-overlay.gtw-half-map {\r\n        display: none;\r\n        /*margin-top: 50vh;\r\n        height: 50vh;*/\r\n    }\r\n\r\n    /*\r\n    #gtw-map.gtw-half-map {\r\n        height: 50vh;\r\n        display: block;\r\n    }\r\n    */\r\n\r\n    .desktop.half-map-panel.gtw-half-map {\r\n        display: none;\r\n    }\r\n\r\n    .desktop.half-map-container.gtw-half-map {\r\n        display: none;\r\n    }\r\n\r\n    .mobile.half-map-panel.gtw-half-map {\r\n        display: block;\r\n        /*height: 20vh;*/\r\n    }\r\n\r\n    .mobile.half-map-container.gtw-half-map {\r\n        display: block;\r\n        /*height: 30vh;*/\r\n        height: inherit;\r\n    }\r\n}\r\n\r\n/*\r\n@media only screen and (max-height: 768px) and (orientation: landscape) {\r\n    .landscape-notice {\r\n        display: block;\r\n    }\r\n}\r\n*/\r\n\r\n@media screen and (max-width: 470px) {\r\n    .startup h1 {\r\n        font-size: 10vw;\r\n    }\r\n}",""])},153:function(n,e,r){var t=r(154);"string"==typeof t&&(t=[[n.i,t,""]]);var i={insert:"head",singleton:!1};r(29)(t,i);t.locals&&(n.exports=t.locals)},154:function(n,e,r){(n.exports=r(28)(!1)).push([n.i,'\r\nimg {\r\n    vertical-align: middle;\r\n}\r\n\r\n.img-responsive {\r\n    display: block;\r\n    height: auto;\r\n    max-width: 100%;\r\n}\r\n\r\n.img-rounded {\r\n    border-radius: 3px;\r\n}\r\n\r\n.img-thumbnail {\r\n    background-color: #fff;\r\n    border: 1px solid #ededf0;\r\n    border-radius: 3px;\r\n    display: inline-block;\r\n    height: auto;\r\n    line-height: 1.428571429;\r\n    max-width: 100%;\r\n    moz-transition: all .2s ease-in-out;\r\n    o-transition: all .2s ease-in-out;\r\n    padding: 2px;\r\n    transition: all .2s ease-in-out;\r\n    webkit-transition: all .2s ease-in-out;\r\n}\r\n\r\n.img-circle {\r\n    border-radius: 50%;\r\n}\r\n\r\n.timeline-centered {\r\n    position: relative;\r\n    margin-bottom: 30px;\r\n}\r\n\r\n    .timeline-centered:before, .timeline-centered:after {\r\n        content: " ";\r\n        display: table;\r\n    }\r\n\r\n    .timeline-centered:after {\r\n        clear: both;\r\n    }\r\n\r\n    .timeline-centered:before, .timeline-centered:after {\r\n        content: " ";\r\n        display: table;\r\n    }\r\n\r\n    .timeline-centered:after {\r\n        clear: both;\r\n    }\r\n\r\n    .timeline-centered:before {\r\n        content: \'\';\r\n        position: absolute;\r\n        display: block;\r\n        width: 4px;\r\n        background: #f5f5f6;\r\n        /*left: 50%;*/\r\n        top: 20px;\r\n        bottom: 20px;\r\n        margin-left: 30px;\r\n    }\r\n\r\n    .timeline-centered .timeline-entry {\r\n        position: relative;\r\n        /*width: 50%;\r\n        float: right;*/\r\n        margin-top: 5px;\r\n        margin-left: 30px;\r\n        margin-bottom: 10px;\r\n        clear: both;\r\n    }\r\n\r\n        .timeline-centered .timeline-entry:before, .timeline-centered .timeline-entry:after {\r\n            content: " ";\r\n            display: table;\r\n        }\r\n\r\n        .timeline-centered .timeline-entry:after {\r\n            clear: both;\r\n        }\r\n\r\n        .timeline-centered .timeline-entry:before, .timeline-centered .timeline-entry:after {\r\n            content: " ";\r\n            display: table;\r\n        }\r\n\r\n        .timeline-centered .timeline-entry:after {\r\n            clear: both;\r\n        }\r\n\r\n        .timeline-centered .timeline-entry.begin {\r\n            margin-bottom: 0;\r\n        }\r\n\r\n        .timeline-centered .timeline-entry.left-aligned {\r\n            float: left;\r\n        }\r\n\r\n            .timeline-centered .timeline-entry.left-aligned .timeline-entry-inner {\r\n                margin-left: 0;\r\n                margin-right: -18px;\r\n            }\r\n\r\n                .timeline-centered .timeline-entry.left-aligned .timeline-entry-inner .timeline-time {\r\n                    left: auto;\r\n                    right: -100px;\r\n                    text-align: left;\r\n                }\r\n\r\n                .timeline-centered .timeline-entry.left-aligned .timeline-entry-inner .timeline-icon {\r\n                    float: right;\r\n                }\r\n\r\n                .timeline-centered .timeline-entry.left-aligned .timeline-entry-inner .timeline-label {\r\n                    margin-left: 0;\r\n                    margin-right: 70px;\r\n                }\r\n\r\n                    .timeline-centered .timeline-entry.left-aligned .timeline-entry-inner .timeline-label:after {\r\n                        left: auto;\r\n                        right: 0;\r\n                        margin-left: 0;\r\n                        margin-right: -9px;\r\n                        -moz-transform: rotate(180deg);\r\n                        -o-transform: rotate(180deg);\r\n                        -webkit-transform: rotate(180deg);\r\n                        -ms-transform: rotate(180deg);\r\n                        transform: rotate(180deg);\r\n                    }\r\n\r\n        .timeline-centered .timeline-entry .timeline-entry-inner {\r\n            position: relative;\r\n            margin-left: -20px;\r\n        }\r\n\r\n            .timeline-centered .timeline-entry .timeline-entry-inner:before, .timeline-centered .timeline-entry .timeline-entry-inner:after {\r\n                content: " ";\r\n                display: table;\r\n            }\r\n\r\n            .timeline-centered .timeline-entry .timeline-entry-inner:after {\r\n                clear: both;\r\n            }\r\n\r\n            .timeline-centered .timeline-entry .timeline-entry-inner:before, .timeline-centered .timeline-entry .timeline-entry-inner:after {\r\n                content: " ";\r\n                display: table;\r\n            }\r\n\r\n            .timeline-centered .timeline-entry .timeline-entry-inner:after {\r\n                clear: both;\r\n            }\r\n\r\n            .timeline-centered .timeline-entry .timeline-entry-inner .timeline-time {\r\n                position: absolute;\r\n                left: -100px;\r\n                text-align: right;\r\n                padding: 10px;\r\n                -webkit-box-sizing: border-box;\r\n                -moz-box-sizing: border-box;\r\n                box-sizing: border-box;\r\n            }\r\n\r\n                .timeline-centered .timeline-entry .timeline-entry-inner .timeline-time > span {\r\n                    display: block;\r\n                }\r\n\r\n                    .timeline-centered .timeline-entry .timeline-entry-inner .timeline-time > span:first-child {\r\n                        font-size: 15px;\r\n                        font-weight: bold;\r\n                    }\r\n\r\n                    .timeline-centered .timeline-entry .timeline-entry-inner .timeline-time > span:last-child {\r\n                        font-size: 12px;\r\n                    }\r\n\r\n            .timeline-centered .timeline-entry .timeline-entry-inner .timeline-icon {\r\n                background: #fff;\r\n                color: #737881;\r\n                display: block;\r\n                width: 40px;\r\n                height: 40px;\r\n                -webkit-background-clip: padding-box;\r\n                -moz-background-clip: padding;\r\n                background-clip: padding-box;\r\n                -webkit-border-radius: 20px;\r\n                -moz-border-radius: 20px;\r\n                border-radius: 20px;\r\n                text-align: center;\r\n                -moz-box-shadow: 0 0 0 5px #f5f5f6;\r\n                -webkit-box-shadow: 0 0 0 5px #f5f5f6;\r\n                box-shadow: 0 0 0 5px #f5f5f6;\r\n                line-height: 40px;\r\n                font-size: 15px;\r\n                float: left;\r\n            }\r\n\r\n                .timeline-centered .timeline-entry .timeline-entry-inner .timeline-icon.bg-primary {\r\n                    background-color: #303641;\r\n                    color: #fff;\r\n                }\r\n\r\n                .timeline-centered .timeline-entry .timeline-entry-inner .timeline-icon.bg-secondary {\r\n                    background-color: #ee4749;\r\n                    color: #fff;\r\n                }\r\n\r\n                .timeline-centered .timeline-entry .timeline-entry-inner .timeline-icon.bg-success {\r\n                    background-color: #00a651;\r\n                    color: #fff;\r\n                }\r\n\r\n                .timeline-centered .timeline-entry .timeline-entry-inner .timeline-icon.bg-info {\r\n                    background-color: #21a9e1;\r\n                    color: #fff;\r\n                }\r\n\r\n                .timeline-centered .timeline-entry .timeline-entry-inner .timeline-icon.bg-warning {\r\n                    background-color: #fad839;\r\n                    color: #fff;\r\n                }\r\n\r\n                .timeline-centered .timeline-entry .timeline-entry-inner .timeline-icon.bg-danger {\r\n                    background-color: #cc2424;\r\n                    color: #fff;\r\n                }\r\n\r\n            .timeline-centered .timeline-entry .timeline-entry-inner .timeline-label {\r\n                position: relative;\r\n                background: #f5f5f6;\r\n                padding: 1em;\r\n                margin-left: 60px;\r\n                -webkit-background-clip: padding-box;\r\n                -moz-background-clip: padding;\r\n                background-clip: padding-box;\r\n                -webkit-border-radius: 3px;\r\n                -moz-border-radius: 3px;\r\n                border-radius: 3px;\r\n            }\r\n\r\n                .timeline-centered .timeline-entry .timeline-entry-inner .timeline-label:after {\r\n                    content: \'\';\r\n                    display: block;\r\n                    position: absolute;\r\n                    width: 0;\r\n                    height: 0;\r\n                    border-style: solid;\r\n                    border-width: 9px 9px 9px 0;\r\n                    border-color: transparent #f5f5f6 transparent transparent;\r\n                    left: 0;\r\n                    top: 10px;\r\n                    margin-left: -9px;\r\n                }\r\n\r\n                .timeline-centered .timeline-entry .timeline-entry-inner .timeline-label h2, .timeline-centered .timeline-entry .timeline-entry-inner .timeline-label p {\r\n                    color: #737881;\r\n                    font-family: "Noto Sans",sans-serif;\r\n                    font-size: 12px;\r\n                    margin: 0;\r\n                    line-height: 1.428571429;\r\n                }\r\n\r\n                    .timeline-centered .timeline-entry .timeline-entry-inner .timeline-label p + p {\r\n                        margin-top: 15px;\r\n                    }\r\n\r\n                .timeline-centered .timeline-entry .timeline-entry-inner .timeline-label h2 {\r\n                    font-size: 16px;\r\n                }\r\n\r\n                    .timeline-centered .timeline-entry .timeline-entry-inner .timeline-label h2 button {\r\n                        color: #303641;\r\n                    }\r\n\r\n                    .timeline-centered .timeline-entry .timeline-entry-inner .timeline-label h2 span {\r\n                        -webkit-opacity: .6;\r\n                        -moz-opacity: .6;\r\n                        opacity: .6;\r\n                        -ms-filter: alpha(opacity=60);\r\n                        filter: alpha(opacity=60);\r\n                    }\r\n',""])},16:function(n,e,r){"use strict";(function(n){r.d(e,"d",(function(){return o})),r.d(e,"b",(function(){return c})),r.d(e,"e",(function(){return u})),r.d(e,"a",(function(){return d})),r.d(e,"c",(function(){return f}));var t=r(8),i=r(6),a=r(42),o={},s=[],l=["gtwp-kmb"];function c(n,e){return!function(n){for(var e of s)if(e===n)return!0;return!1}(n)&&(s.push(n),!1!==e&&p(),!0)}async function u(n,e){var r;for(await i.b(n),r=0;r<s.length;r++)if(s[r]===n)return s.splice(r,1),!1!==e&&p(),!0;return!1}function d(n){return o[n]}function p(){return window.localStorage.setItem("gtw-plugins",JSON.stringify(s)),!0}function f(e){if(localStorage){var i=localStorage.getItem("gtw-plugins");i&&(s=JSON.parse(i)),s&&"number"==typeof s.length||(console.warn("Warning: Installed plugins JSON string is invalid. Resetting as empty."),p());var c=[];for(var d of s){if(l.includes(d)){alert(n.i18n("plugin-deprecated-auto-uninstall",d)),u(d);continue}const e={package:d,status:1,msg:"Not Enabled"};a[d]?c.push(new Promise((t,i)=>{r(165)(`./${d}/index.js`).then((function(r){var a;if(r)if(r.onload&&"function"==typeof r.onload){new Promise((n,e)=>{var t=r.onload();t instanceof Promise?t.then(n).catch(e):n(t)}).then((function(r){if(r)e.status=0,delete e.msg;else{var i=n.i18n("plugin-error-onload-function-error",d);console.error(i),e.status=-4,e.msg=i}t()})).catch(i)}else a=n.i18n("plugin-error-no-onload-function",d),console.error(a),e.status=-3,e.msg=a;else a=n.i18n("plugin-error-no-module-returned",d),console.error(a),e.status=-2,e.msg=a}))})):(e.status=-1,e.msg="This plugin is not available in this version of GoToWhere."),o[d]=e}return t.a(c,e)}console.error("Error: LocalStorage is not supported in this browser.")}}).call(this,r(0))},162:function(n,e,r){var t={"./en.json":[191,43],"./zh.json":[192,44]};function i(n){if(!r.o(t,n))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=t[n],i=e[0];return r.e(e[1]).then((function(){return r.t(i,3)}))}i.keys=function(){return Object.keys(t)},i.id=162,n.exports=i},163:function(n,e,r){n.exports=r.p+"1.3143549eae1b49940de8.worker.js"},164:function(n,e,r){n.exports=r.p+"2.b6dfd31411fea68be1fe.worker.js"},165:function(n,e,r){var t={"./gtwp-ctbnwfb/index.js":[193,45],"./gtwp-hktransit/index.js":[194,46],"./gtwp-kmblwb/index.js":[195,47]};function i(n){if(!r.o(t,n))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=t[n],i=e[0];return r.e(e[1]).then((function(){return r(i)}))}i.keys=function(){return Object.keys(t)},i.id=165,n.exports=i},166:function(n,e,r){n.exports=r.p+"0.b185689476e31a877f94.worker.js"},184:function(n,e,r){var t={"./gtw-map-googlemap":[96,2],"./gtw-map-googlemap.js":[96,2]};function i(n){if(!r.o(t,n))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=t[n],i=e[0];return r.e(e[1]).then((function(){return r(i)}))}i.keys=function(){return Object.keys(t)},i.id=184,n.exports=i},185:function(n,e,r){var t={"./gtw-ui-modal-about":[97,3],"./gtw-ui-modal-about.js":[97,3],"./gtw-ui-modal-errorplugins":[98,4],"./gtw-ui-modal-errorplugins.js":[98,4],"./gtw-ui-modal-loading":[99,5],"./gtw-ui-modal-loading.js":[99,5],"./gtw-ui-modal-pluginclosedapi":[100,6],"./gtw-ui-modal-pluginclosedapi.js":[100,6],"./gtw-ui-modal-pluginmanager":[101,0],"./gtw-ui-modal-pluginmanager.js":[101,0],"./gtw-ui-modal-settings":[102,7],"./gtw-ui-modal-settings.js":[102,7],"./gtw-ui-modal-updated":[103,8],"./gtw-ui-modal-updated.js":[103,8],"./gtw-ui-modal-viewgtfsalerts":[104,9],"./gtw-ui-modal-viewgtfsalerts.js":[104,9],"./gtw-ui-modal-viewplugin":[105,10],"./gtw-ui-modal-viewplugin.js":[105,10]};function i(n){if(!r.o(t,n))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=t[n],i=e[0];return r.e(e[1]).then((function(){return r(i)}))}i.keys=function(){return Object.keys(t)},i.id=185,n.exports=i},186:function(n,e,r){var t={"./modal-about-header.html":[197,17],"./modal-errorplugins-header.html":[198,20],"./modal-loading-header.html":[199,23],"./modal-pluginclosedapi-header.html":[200,26],"./modal-pluginmanager-header.html":[201,29],"./modal-settings-header.html":[202,32],"./modal-updated-header.html":[203,35],"./modal-viewgtfsalerts-header.html":[204,38],"./modal-viewplugin-header.html":[205,41]};function i(n){if(!r.o(t,n))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=t[n],i=e[0];return r.e(e[1]).then((function(){return r.t(i,7)}))}i.keys=function(){return Object.keys(t)},i.id=186,n.exports=i},187:function(n,e,r){var t={"./modal-about-body.html":[206,15],"./modal-errorplugins-body.html":[207,18],"./modal-loading-body.html":[208,21],"./modal-pluginclosedapi-body.html":[209,24],"./modal-pluginmanager-body.html":[210,27],"./modal-settings-body.html":[211,30],"./modal-updated-body.html":[212,33],"./modal-viewgtfsalerts-body.html":[213,36],"./modal-viewplugin-body.html":[214,39]};function i(n){if(!r.o(t,n))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=t[n],i=e[0];return r.e(e[1]).then((function(){return r.t(i,7)}))}i.keys=function(){return Object.keys(t)},i.id=187,n.exports=i},188:function(n,e,r){var t={"./modal-about-footer.html":[215,16],"./modal-errorplugins-footer.html":[216,19],"./modal-loading-footer.html":[217,22],"./modal-pluginclosedapi-footer.html":[218,25],"./modal-pluginmanager-footer.html":[219,28],"./modal-settings-footer.html":[220,31],"./modal-updated-footer.html":[221,34],"./modal-viewgtfsalerts-footer.html":[222,37],"./modal-viewplugin-footer.html":[223,40]};function i(n){if(!r.o(t,n))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=t[n],i=e[0];return r.e(e[1]).then((function(){return r.t(i,7)}))}i.keys=function(){return Object.keys(t)},i.id=188,n.exports=i},189:function(n,e,r){var t={"./gtw-ui-tab-transit":[106,1],"./gtw-ui-tab-transit.js":[106,1]};function i(n){if(!r.o(t,n))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=t[n],i=e[0];return r.e(e[1]).then((function(){return r(i)}))}i.keys=function(){return Object.keys(t)},i.id=189,n.exports=i},190:function(n,e,r){"use strict";(function(n){var e=r(7),t=1e3,i=[],a=console.trace;console.trace=function(n){v("console",n,-1)};var o=console.debug;console.debug=function(n){v("console",n,-2)};var s=console.log;console.log=function(n){v("console",n,0)};var l=console.warn;console.warn=function(n){v("console",n,1)};var c=console.error;console.error=function(n){v("console",n,2)};var u=!0;function d(n,e){-2===e?a(n):-1===e?o(n):0===e?s(n):1===e?l(n):2===e&&c(n)}function p(r,a,o,s){i.length>=t&&i.shift(),i.push({time:o,msg:a,level:s}),e.get("show_debug_msg",!1)&&function(e,r,t,i,a){if(a<=0)return;if(f===t&&g===r&&h===a&&i-m<7500)return;m=i,f=t,g=r,h=a;var o=n("#gtw-toast-stack"),s="Unknown",l="";-2===a?s="Trace":-1===a?s="Debug":0===a?(s="Info",l=" text-primary"):1===a?(s="Warning",l=" text-warning"):2===a&&(s="Error",l=" text-danger");var c='<div class="toast" role="alert" log-entry-id="'+e+'">    <div class="toast-header">        <strong class="mr-auto'+l+'">'+s+" ("+r+')</strong>        <small class="text-muted">'+new Date(i).toLocaleString()+'</small>        <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close"><span aria-hidden="true">&times;</span></button>    </div>    <div class="toast-body">'+t+"    </div></div>";o.children().length>=3&&o.children().each((function(e){e>=2&&n(this).toast("hide")}));o.prepend(c);var u=".toast[log-entry-id='"+e+"']";n(u).on("hidden.bs.toast",(function(){n(this).remove()})),n(u).toast({animation:!0,autohide:!0,delay:5e3}),n(u).toast("show")}(i.length,r,a,o,s)}var f=0,g=0,h=0,m=0;function v(n="unknown",e,r=0){var t=Date.now();if("object"==typeof e)if(u)d("["+new Date(t).toLocaleString()+"] ["+n+"]",r),d(e,r);else{var i=JSON.stringify(e);d("["+new Date(t).toLocaleString()+"] ["+n+"] "+i,r)}else d("["+new Date(t).toLocaleString()+"] ["+n+"] "+e,r);p(n,e,t,r)}}).call(this,r(0))},2:function(n,e,r){"use strict";r.d(e,"c",(function(){return a})),r.d(e,"g",(function(){return o})),r.d(e,"i",(function(){return s})),r.d(e,"a",(function(){return l})),r.d(e,"h",(function(){return c})),r.d(e,"d",(function(){return u})),r.d(e,"e",(function(){return d})),r.d(e,"b",(function(){return p})),r.d(e,"f",(function(){return f}));var t=r(93),i=!1;function a(){return new Promise((n,e)=>{r(184)(`./gtw-map-${t.a.mapApi}`).then((function(e){(i=e).init().then((function(){n()}))}))})}function o(n){return i.setCenter(n)}function s(n){return i.setZoom(n)}function l(n,e){return i.addMarker(n,e)}function c(n,e){return i.setMarkerPosition(n,e)}function u(n){return i.lockMarker(n)}function d(){return i.removeAllMarkers()}function p(n,e,r,t=1,a=!0){return i.addPolyline(n,e,r,t,a)}function f(){return i.removeAllPolylines()}},21:function(n,e,r){"use strict";(function(n){r.d(e,"c",(function(){return u})),r.d(e,"b",(function(){return p})),r.d(e,"d",(function(){return f})),r.d(e,"a",(function(){return g}));var t=r(2),i=r(16),a=r(30),o=r(5),s=!1,l=!1;n(document).ready((function(){n(".header-links-plugins").on("click",(function(){f("pluginmanager")})),n(".header-links-settings").on("click",(function(){f("settings")})),n(".header-links-about").on("click",(function(){f("about")})),n(".feedback-btn").on("click",(function(){window.open("https://forms.gle/nP9cp1V2rqhdqybv5")}))})),n(".ui-tab").on("click",(function(){if(!n(this).hasClass("btn-primary")){n(".ui-tab").removeClass("btn-primary"),n(".ui-tab").removeClass("btn-link");var e=n(this).attr("gtw-tab");n(this).addClass("btn-primary"),n(".ui-tab:not([gtw-tab='"+e+"'])").addClass("btn-link"),v(e)}})),n(".btn").on("click",(function(){n(this).blur()})),n(".ui-half-map-back-btn").on("click",(function(){o.c(o.a.EVENT_UI_BACK),t.g(a.a()),t.i(16),t.e(),t.f(),d()}));var c=50;function u(){0===Object.keys(i.d).length&&(m(),h(),r.e(14).then(r.bind(null,196)).then((function(n){n.enable()}))),v("transit"),adjustMargin(),d()}function d(){n(".content-panel-container").css("display","inline-block"),n(".top-panel").css("display","block"),n(".header nav").removeClass("gtw-half-map"),n("body").removeClass("gtw-half-map"),n("#gtw-map").removeClass("gtw-half-map"),n(".map-overlay").removeClass("gtw-half-map"),n(".half-map-panel").removeClass("gtw-half-map"),n(".half-map-container").removeClass("gtw-half-map"),n(".mobile-split-container").removeClass("gtw-half-map"),adjustMargin()}function p(){n(".top-panel").css("display","none"),n(".content-panel-container").css("display","none"),n(".header nav").addClass("gtw-half-map"),n("#gtw-map").addClass("gtw-half-map"),n(".map-overlay").addClass("gtw-half-map"),n(".half-map-panel").addClass("gtw-half-map"),n(".half-map-container").addClass("gtw-half-map"),n(".mobile-split-container").addClass("gtw-half-map"),adjustMargin()}function f(e,...t){h(),function(e,t={}){const i="modal-"+e;!0===t&&((t={}).backdrop="static",t.keyboard=!1);var a=[];a.push(r(186)(`./${i}-header.html`).then((function(e){n(".modal-header").html(e.default)}))),a.push(r(187)(`./${i}-body.html`).then((function(e){n(".modal-body").html(e.default)}))),a.push(r(188)(`./${i}-footer.html`).then((function(e){n(".modal-footer").html(e.default)})));var o=Promise.all(a);return o.then((function(){n(".modal").modal(t)})),o}(e,!0).then((function(){n(".modal").i18n(),r(185)(`./gtw-ui-modal-${e}`).then((function(n){l=n,n.enable.apply(this,t)}))}))}function g(){n(".modal").modal("hide"),h()}function h(){l&&(l.disable(),l=!1)}function m(){s&&(s.disable(),s=!1)}function v(n){m(),r(189)(`./gtw-ui-tab-${n}`).then((function(n){s=n,n.enable()}))}n(".ui-pull-up-btn").on("click",(function(){c>=90||(c+=10,n(".mobile-split-container").css("height",c+"%"),adjustMargin())})),n(".ui-pull-down-btn").on("click",(function(){c<=10||(c-=10,n(".mobile-split-container").css("height",c+"%"),adjustMargin())}))}).call(this,r(0))},22:function(n,e,r){"use strict";r.r(e),r.d(e,"domains",(function(){return a})),r.d(e,"register",(function(){return o})),r.d(e,"extractHost",(function(){return s})),r.d(e,"isCors",(function(){return l}));var t=r(95);const i="https://";var a={};function o(n,e=!1){var r={};r.allowCors=e,a[n]=r}function s(n){if(!n.includes("://"))return"___local___";if(n.startsWith("file://"))return"___file___";var e=n.indexOf("://"),r=n.substring(e+3);return-1===(e=r.indexOf("/"))&&(e=r.length()),r.substring(0,e)}function l(n){if(!n.startsWith(i))return!0;var e=s(n);return a[e]?!a[e].allowCors:window.location.host!==e}r.n(t).a.before((function(n,e){var t=r(22),i=r(7);if(i.get("cors_check_bypass",!1))e();else{if(t.isCors(n.url)){var a=t.extractHost(n.url);if(!a||""===a||"___local___"===a)return void e();var o=t.domains[a];if(!o)return console.error('gtw-cors: The request to "'+a+'" was dropped, because this cross-domain host was not registered before performing AJAX.'),void e({status:403,statusText:"The request is dropped by GoToWhere because this host was not registered before performing AJAX.",headers:{}});if(o.allowCors)return void e();if(!i.get("use_cors_proxy",!0))return console.error("gtw-cors: The request was dropped because there are no proxy available to handle CORS requests."),void e({status:403,statusText:"The request was dropped because there are no proxy available to handle CORS requests.",headers:{}});var s=i.get("cors_proxy_server","https://cp1.gotowhere.ga/");if(!s.startsWith("https://")||!s.endsWith("/"))return console.error("gtw-cors: The provided CORS Proxy server is invalid! Please check if the server URL in the settings is correct!"),void e({status:403,statusText:"The provided CORS Proxy server is invalid! Please check if the server URL in the settings is correct!.",headers:{}});var l=n.url.indexOf("http://"),c=n.url.indexOf("https://");if(-1!==l&&-1===c)n.url=s+n.url.substring(l+7);else{if(-1!==l||-1===c)return console.error("gtw-cors: Invalid URL: "+n.url),void e({status:403,statusText:"Invalid URL: "+n.url,headers:{}});n.url=s+n.url.substring(c+8)}}e()}}))},30:function(n,e,r){"use strict";r.d(e,"e",(function(){return c})),r.d(e,"d",(function(){return u})),r.d(e,"c",(function(){return d})),r.d(e,"b",(function(){return p})),r.d(e,"a",(function(){return f}));var t=r(2),i=r(5);var a=0,o={lat:22.2952296,lng:114.1766577},s=!1,l=!1;function c(n=function(){},e=function(){}){if(navigator.geolocation){navigator.geolocation.getCurrentPosition((function(e){s=!0,o={lat:e.coords.latitude,lng:e.coords.longitude},t.g(o),t.i(16),a=t.a(o,{icon:"img/star.png"}),t.d(a),navigator.geolocation.watchPosition(g,h,{enableHighAccuracy:!1,timeout:5e3,maximumAge:0}),i.c(i.a.EVENT_LOCATION_SUCCESS),n(o)}),(function(n){s=!1,l=n,i.c(i.a.EVENT_LOCATION_ERROR,n),e(n)}),{timeout:1e4})}else e(ERROR_NOT_SUPPORTED)}function u(){return s}function d(){return!1!==l}function p(){return l}function f(){return o}function g(n){o={lat:n.coords.latitude,lng:n.coords.longitude},s=!0,l=!1,t.h(a,o),i.c(i.a.EVENT_LOCATION_CHANGE,o)}function h(n){s=!1,l=n,i.c(i.a.EVENT_LOCATION_ERROR,n)}},31:function(n,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return a}));var t=new(r(20).a)("gtw-db");async function i(n,e){return await t.transitReference.where("[package+provider]").equals([n,e]).first()}async function a(n){if(n.package&&n.provider)return await t.transitReference.put(n);console.error("Error: Database missing package or provider parameter(s).")}t.version(2).stores({pluginStorage:"package",transitReference:"[package+provider]"})},32:function(n,e,r){"use strict";r.r(e),function(n){r.d(e,"languages",(function(){return i})),r.d(e,"translatedString",(function(){return a})),r.d(e,"localizedKey",(function(){return o})),r.d(e,"getLanguage",(function(){return s})),r.d(e,"getLocale",(function(){return l})),r.d(e,"changeLanguage",(function(){return c}));var t=r(7);const i={en:"English",zh:"繁體中文"};function a(n){var e=s(),r=l();for(var t of n.translation)if(t.language===e)return t.text;for(var t of n.translation)if(t.language===r||t.language.split("-")[0]===r)return t.text;for(var t of n.translation)if("en"===t.language)return t.text;return!1}function o(n,e){var r=e+"_"+s(),t=e+"_"+l(),i=e+"_en";return n[r]?n[r]:n[t]?n[t]:n[i]?n[i]:!!n[e]&&n[e]}function s(){return t.get("preferred_language","en")}function l(){return t.get("preferred_language","en").split("-")[0]}function c(e){var a=!1;for(var o in i)if(e===o){a=!0;break}return!!a&&(t.set("preferred_language",e),t.save(),n.i18n().locale=e,r(162)(`./${e}.json`).then((function(r){n.i18n().load(r.default,e),n("body").i18n()})))}}.call(this,r(0))},33:function(n,e,r){"use strict";r.r(e),r.d(e,"clearCache",(function(){return s})),r.d(e,"timeDifference",(function(){return l})),r.d(e,"registerProvider",(function(){return c})),r.d(e,"unregisterProvider",(function(){return u})),r.d(e,"getProviders",(function(){return d})),r.d(e,"getProvider",(function(){return p})),r.d(e,"getEtaProvider",(function(){return f})),r.d(e,"fetchAllDatabase",(function(){return g})),r.d(e,"fetchEta",(function(){return h})),r.d(e,"getCache",(function(){return m}));r(8);var t=r(31),i=r(40),a=[],o={};function s(){o={}}function l(n,e){return 60*n.hr+n.min-(60*e.hr+e.min)}function c(n,e,r,t){if(!t.fetchEta||"function"!=typeof t.fetchEta||!t.fetchDatabase||"function"!=typeof t.fetchDatabase||!t.checkDatabaseUpdate||"function"!=typeof t.checkDatabaseUpdate)throw new Error("Error: "+e+" does not contain fetchEta, fetchDatabase or checkDatabaseUpdate function!");if(t.pkg=n,t.id=e,t.etaProviders=r,t.db=!1,"object"==typeof name)for(var i in t.name=name.default,name)t["name_"+i]=name[i];else t.name=name;a.push(t)}function u(n,e){for(var r=-1,t=0;t<a.length;t++)a[t].pkg===n&&a[t].id===e&&(r=t);a.splice(r,1)}function d(){return a}function p(n,e){for(var r of a)if(r.pkg===n&&r.id===e)return r;return!1}function f(n){for(var e of a)if(e.etaProviders.includes(n))return e;return!1}async function g(n){var e;for(var r of a)(e=await t.a(r.pkg,r.id))&&(r.db=e);var i={};for(var r of a)if(r.db){console.log("has db "+r.id);try{var o=await new Promise((n,e)=>{r.checkDatabaseUpdate(n,e,r.db.version)});console.log("update: "+r.id+" "+o),i[r.id]=o}catch(n){console.error("Error: Database check update for "+r.id+" failed!"),i[r.id]=!1}}else console.log("No db found for "+r.id),i[r.id]=!0;for(var r of(console.log(i),a))if(i[r.id])try{var s=await new Promise((n,e)=>{r.fetchDatabase(n,e)});if(!s.package||!s.provider||!s.version)return void console.error("Error: Returned reference database is missing version, package or provider parameter(s) for "+(s.provider?s.provider:"unknown provider")+".");r.db=s,await t.b(s)}catch(n){console.error("Error: Database fetch for "+r.id+" failed!")}}function h(n){return n.agency&&n.route&&n.trip&&n.stopTimes&&n.stop?new Promise((e,r)=>{var t=[],a=0;for(var s of n.etaProviders)t.push(new Promise((e,r)=>{var t=f(s);if(!t)return e(),void console.log('Could not find registered Transit ETA provider with name "'+s+'"');a++;var l=s+"-"+n.route.route_id+"-"+n.trip.trip_id+"-"+n.stop.stop_id,c=o[l],u=new Date;if(c&&u-c.lastFetched>3e4&&(c=!1,delete o[l]),c)e(c.feed);else{new Promise((e,r)=>{t.fetchEta(e,r,n)}).then((function(n){var r=i.transit_realtime.FeedMessage.fromObject(n),t=i.transit_realtime.FeedMessage.verify(r);if(null===t){var a=new Date;o[l]={lastFetched:a.getTime(),feed:r},e(r)}else console.error("Error: Returned feed is invalid: "+t)})).catch((function(e){r(n,e)}))}}));Promise.all(t).then((function(r){if(a>0){var t=[];for(var i of r)i&&i.header&&i.entity&&t.push(i);e({feeds:t,options:n,code:0})}else n.etaProviders&&n.etaProviders.length>0?e({code:-2,options:n}):e({code:-1,options:n})})).catch(r)}):(console.error("Error: Fetch ETA missing agency, route, trip or stop parameter."),!1)}function m(){return o}},42:function(n){n.exports=JSON.parse('{"gtwp-hktransit":{"package":"gtwp-hktransit","name":"HKTransit","fullName":"Hong Kong Transit Data","desc":"Official transit data from data.gov.hk","author":"mob41","license":"https://github.com/mob41/GoToWhere/tree/master/src/plugins/gtwp-hktransit/LICENSE","closedApi":false,"github":"https://github.com/mob41/GoToWhere/tree/master/src/plugins/gtwp-hktransit","version":"0.0.1","targetApi":"0.0.1","region":"HK","category":"transit","dependencies":{}},"gtwp-kmblwb":{"package":"gtwp-kmblwb","name":"KMBLWB","fullName":"Kowloon Motor Bus and Long Win Bus Transit ETA","desc":"Providing closed transit data from KMB and LWB.","author":"mob41","license":"https://github.com/mob41/GoToWhere/tree/master/src/plugins/gtwp-kmblwb/LICENSE","closedApi":true,"github":"https://github.com/mob41/GoToWhere/tree/master/src/plugins/gtwp-kmblwb","version":"0.0.1","targetApi":"0.0.1","region":"HK","category":"transitEta","dependencies":{}},"gtwp-ctbnwfb":{"package":"gtwp-ctbnwfb","name":"CTBNWFB","fullName":"Citybus and New World First Bus Transit ETA","desc":"Providing publicized transit data from Citybus and New World First Bus.","author":"mob41","license":"https://github.com/mob41/GoToWhere/tree/master/src/plugins/gtwp-ctbnwfb/LICENSE","closedApi":false,"github":"https://github.com/mob41/GoToWhere/tree/master/src/plugins/gtwp-ctbnwfb","version":"0.0.1","targetApi":"0.0.1","region":"HK","category":"transitEta","dependencies":{}}}')},43:function(n,e,r){"use strict";r.d(e,"c",(function(){return t})),r.d(e,"b",(function(){return o})),r.d(e,"d",(function(){return s})),r.d(e,"a",(function(){return l}));var t=[],i=500,a=!1;function o(n,e){if("function"!=typeof n)throw new TypeError("The variable must be a 'function'.");return t.push([n,e]),n}function s(){a||(a=!0,function n(){var e=t.shift();e&&"function"==typeof e[0]&&e[0].apply(null,e[1]);a&&setTimeout((function(){n()}),i)}())}function l(){t=[]}},5:function(n,e,r){"use strict";r.d(e,"a",(function(){return t})),r.d(e,"c",(function(){return a})),r.d(e,"b",(function(){return o})),r.d(e,"d",(function(){return s}));const t={EVENT_UI_BACK:"EVENT_UI_BACK",EVENT_LOCATION_CHANGE:"EVENT_LOCATION_CHANGE",EVENT_LOCATION_SUCCESS:"EVENT_LOCATION_SUCCESS",EVENT_LOCATION_ERROR:"EVENT_LOCATION_ERROR"};var i={};function a(n,...e){if(i[n])for(var r of i[n])r?r.apply(this,e):s(r)}function o(n,e){i[n]||(i[n]=[]),i[n].push(e)}function s(n,e){if(i[n]){var r=i[n].indexOf(e);-1!==r&&i[n].splice(r,1)}}},6:function(n,e,r){"use strict";(function(n,t){r.d(e,"c",(function(){return o})),r.d(e,"v",(function(){return l})),r.d(e,"a",(function(){return c})),r.d(e,"b",(function(){return u})),r.d(e,"t",(function(){return d})),r.d(e,"i",(function(){return p})),r.d(e,"u",(function(){return f})),r.d(e,"p",(function(){return g})),r.d(e,"l",(function(){return h})),r.d(e,"j",(function(){return v})),r.d(e,"r",(function(){return b})),r.d(e,"g",(function(){return w})),r.d(e,"q",(function(){return y})),r.d(e,"s",(function(){return k})),r.d(e,"e",(function(){return _})),r.d(e,"f",(function(){return x})),r.d(e,"k",(function(){return j})),r.d(e,"o",(function(){return E})),r.d(e,"m",(function(){return O})),r.d(e,"h",(function(){return T})),r.d(e,"n",(function(){return C}));var i=r(20),a=r(8),o=new i.a("gtfs");o.version(1).stores({versions:"[package+provider],[package+provider+version],package",agency:"[package+provider+agency_id],[package+provider],[package+provider+version],package",calendar:"[package+provider+service_id],[package+provider],[package+provider+version],package",calendar_dates:"[package+provider+service_id+date],[package+provider],[package+provider+service_id],[package+provider+version],package",frequencies:"[package+provider+trip_id],[package+provider],[package+provider+version],package",routes:"[package+provider+route_id],[package+provider],route_short_name,[package+provider+version],package",trips:"[package+provider+trip_id],[package+provider],[package+provider+route_id],[package+provider+route_id+service_id],[package+provider+path_id],[package+provider+version],package",stops:"[package+provider+stop_id],[package+provider],[package+provider+version],package",stop_times:"++id, [package+provider+trip_id], [package+provider+stop_id], [package+provider],[package+provider+version],package",stop_time_paths:"++id, [package+provider+path_id], [package+provider+stop_id], [package+provider],[package+provider+version],package",fare_attributes:"[package+provider+fare_id],[package+provider],[package+provider+version],package",fare_rules:"[package+provider+fare_id],[package+provider],[package+provider+version],package",stop_times_raw:"[package+provider],[package+provider+version],package",fare_attributes_raw:"[package+provider],[package+provider+version],package",fare_rules_raw:"[package+provider],[package+provider+version],package"});var s=["versions","agency","calendar","calendar_dates","frequencies","routes","trips","stops","stop_times","stop_time_paths","fare_attributes","fare_rules","stop_times_raw","fare_attributes_raw","fare_rules_raw"];async function l(n,e,r,t){var i,a;for(var s in t)if("stop_times"!==s&&"fare_attributes"!==s&&"fare_rules"!==s&&(i=t[s],(a=await o[s].where("[package+provider+version]").equals([n,e,r]).count())!==i))return console.warn("Warning: "+n+","+e+" "+r+" version database invalid at "+s+" with different rows: "+a+" (Required: "+i+")"),!1;return!0}async function c(n,e){for(var r of s)await o[r].where("[package+provider]").equals([n,e]).delete()}async function u(n){for(var e of s)await o[e].where("package").equals(n).delete()}function d(n,e){e.startsWith('"')&&e.endsWith('"')&&(e=e.substr(1,e.length-2));for(var r=e.split("|"),t="["+n+"] ",i=0;i<r.length;i++)if(r[i].startsWith(t))return r[i].substr(t.length);var a=r[0],o=a.indexOf("] ");return-1===o?a:a.substr(o+2)}async function p(n,e,r){var t=await E(n,e,r);for(var i of t)if(m(n,e,i.trip_id))return i;return!1}function f(n){var e=n.split(":"),r=new Date;return r.setHours(e[0]),r.setMinutes(e[1]),r.setSeconds(e[2]),r}function g(n){var e=Date.now(),r=f(n.start_time),t=f(n.end_time);return e>=r.getTime()&&e<=t.getTime()}async function h(n,e,r,t){var i,a=await E(n,e,r),o=[];for(var s of a)if(s.path_id===t){var l=await v(n,e,s.trip_id);for(var c of l){for(var u of(i=!1,o))if(u.start_time===c.start_time&&u.end_time===c.end_time&&u.headway_secs===c.headway_secs){i=!0;break}i||o.push(c)}}return o}async function m(n,e,r){var t=await v(n,e,r);Date.now();for(var i of t)if(g(i))return i;return!1}async function v(n,e,r){return await o.frequencies.where("[package+provider+trip_id]").equals([n,e,r]).toArray()}async function b(n){return await o.routes.where("route_short_name").startsWithIgnoreCase(n).toArray()}async function w(n,e,r){return new Promise((t,i)=>{var a=[];o.routes.filter(e=>e.route_short_name.length>n).each(t=>{var i=t.route_short_name.substr(n,e);r&&a.includes(i)||a.push(i)}).then((function(){t(a)}))})}function y(n,e,r,t=!0){return new Promise((i,s)=>{var l=[];o.stops.each(t=>{var i=a.c(n,e,t.stop_lat,t.stop_lon);i<=r&&l.push({distance:i,stop:t})}).then((function(){t&&l.sort((function(n,e){return n.distance-e.distance})),i(l)}))})}function k(n,e,r){return new Promise((t,i)=>{var a=[],s=[],l={},c={},u={};return async function(n,e,r){return await o.stop_time_paths.where("[package+provider+stop_id]").equals([n,e,r]).sortBy("path_id")}(n,e,r).then((function(r){for(var t of r){var i=t.path_id;a.push([n,e,i]),c[i]=t}})).then((function(){o.trips.where("[package+provider+path_id]").anyOf(a).each(r=>{var t=r.route_id;u[t]=r,s.push([n,e,t])}).then((function(){o.routes.where("[package+provider+route_id]").anyOf(s).each(n=>{var e=n.route_id;l[e]=n}).then((function(){t({routes:l,trips:u,stopTimes:c})}))}))}))})}async function _(){return await o.agency.toArray()}async function x(n,e,r){return await o.agency.where("[package+provider+agency_id]").equals([n,e,r]).first()}async function j(n,e,r){return await o.routes.where("[package+provider+route_id]").equals([n,e,r]).first()}async function E(n,e,r){return await o.trips.where("[package+provider+route_id]").equals([n,e,r]).toArray()}async function O(n,e,r){return await o.stops.where("[package+provider+stop_id]").equals([n,e,r]).first()}async function T(n,e,r){return await o.calendar.where("[package+provider+service_id]").equals([n,e,r]).first()}async function C(n,e,r){return await o.stop_time_paths.where("[package+provider+path_id]").equals([n,e,r]).sortBy("stop_sequence")}}).call(this,r(163),r(164))},7:function(n,e,r){"use strict";r.r(e),function(n){r.d(e,"getDefaultSettings",(function(){return i})),r.d(e,"json",(function(){return a})),r.d(e,"get",(function(){return o})),r.d(e,"set",(function(){return s})),r.d(e,"load",(function(){return l})),r.d(e,"save",(function(){return c}));const t="gtw-settings";function i(){return[{key:"preferred_language",type:"string",name:n.i18n("settings-key-preferred-language"),desc:n.i18n("settings-key-preferred-language-desc"),def:"en",checkfunc:function(n){var e=r(32).languages,t=!1;for(var i in e)if(i===n){t=!0;break}return t}},{key:"show_debug_msg",type:"boolean",name:n.i18n("settings-key-show-debug-msg"),desc:n.i18n("settings-key-show-debug-msg-desc"),def:!1},{key:"min_nearby_transit_range",type:"number",name:n.i18n("settings-key-min-nearby-transit-search-range"),desc:n.i18n("settings-key-min-nearby-transit-search-range-desc"),def:200,checkfunc:function(n){var e=parseInt(n);return!Number.isNaN(e)&&e<1e4}},{key:"max_nearby_transit_to_display",type:"number",name:n.i18n("settings-key-max-nearby-transit-to-be-displayed"),desc:n.i18n("settings-key-max-nearby-transit-to-be-displayed-desc"),def:20,checkfunc:function(n){var e=parseInt(n);return!Number.isNaN(e)&&e<100}},{key:"use_cors_proxy",type:"boolean",name:n.i18n("settings-key-use-cors-proxy"),desc:n.i18n("settings-key-use-cors-proxy-desc"),def:!0},{key:"cors_proxy_server",type:"string",name:n.i18n("settings-key-cors-proxy-server"),desc:n.i18n("settings-key-cors-proxy-server-desc"),def:"https://cp1.gotowhere.ga/",checkfunc:function(n){return n.startsWith("https://")&&n.endsWith("/")}},{key:"cors_check_bypass",type:"boolean",name:n.i18n("settings-key-cors-check-bypass"),desc:n.i18n("settings-key-cors-check-bypass-desc"),def:!1}]}var a={};function o(n,e=!1){var r=a[n];return void 0===r?e:r}function s(n,e){return a[n]=e,!0}function l(){if(!localStorage)return!1;var n=localStorage.getItem(t);if(!n)return c();var e=JSON.parse(n);return!!e&&(a=e,!0)}function c(){return!!localStorage&&(localStorage.setItem(t,JSON.stringify(a)),!0)}}.call(this,r(0))},8:function(n,e,r){"use strict";function t(n,e,r,t){var i=.017453292519943295,a=Math.cos,o=.5-a((r-n)*i)/2+a(n*i)*a(r*i)*(1-a((t-e)*i))/2;return 12742*Math.asin(Math.sqrt(o))}function i(n,e){let r=0;e(0);for(const t of n)t.then(()=>{e(100*++r/n.length)});return Promise.all(n)}function a(n){return n<10?"0"+n:n}r.d(e,"c",(function(){return t})),r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return a}))},9:function(n,e,r){"use strict";(function(n){r.d(e,"h",(function(){return p})),r.d(e,"e",(function(){return f})),r.d(e,"a",(function(){return g})),r.d(e,"j",(function(){return h})),r.d(e,"c",(function(){return m})),r.d(e,"b",(function(){return v})),r.d(e,"f",(function(){return w})),r.d(e,"d",(function(){return k})),r.d(e,"i",(function(){return _})),r.d(e,"g",(function(){return x})),r.d(e,"k",(function(){return j}));var t=r(8),i=r(6),a=(r(20),r(167),r(168),[]),o=[],s={},l={},c={},u={},d={};function p(n,e,r){if(!r.fetchDatabase||"function"!=typeof r.fetchDatabase||!r.checkDatabaseUpdate||"function"!=typeof r.checkDatabaseUpdate)throw new Error("Error: "+name+" does not contain fetchDatabase or checkDatabaseUpdate function!");r.pkg=n,r.id=e,r.db=!1,a.push(r)}function f(n){console.log("Obtaining db version");var e=[];for(var r of a)window.x=i.c,e.push(i.c.versions.where("[package+provider]").equals([r.pkg,r.id]).first().then((function(n){if(n){var e=n.package+","+n.provider;s[e]=n.version,d[e]=n.map}})));return t.a(e,n)}function g(n){console.log("DBVersions:"),console.log(s);var e,r=[];for(var i of a){var o=i.pkg+","+i.id;s[o]?(e=new Promise((n,e)=>{i.checkDatabaseUpdate(n,e,s[o])}),r.push(e.then((function(n){u[o]=n})).catch((function(n){console.error("Error: Promise rejected when checking update for "+o+".")})))):u[o]=!0}return t.a(r,n)}async function h(){var n;for(var e of a){var r=e.pkg+","+e.id;(n=d[r])?await i.v(e.pkg,e.id,s[r],n)||(console.warn("Warning: Invalid GTFS database compared with map! Forcing to update!"),u[r]=!0):(console.error("Error: GTFS database does not contain a map to validate! Forcing it to update!"),u[r]=!0)}}function m(){for(var n in u)if(u[n])return!0;return!1}function v(n){console.log("DBUpdateNeeded:"),console.log(u);var e,r=[];for(var i of a){var o=i.pkg+","+i.id;u[o]&&(e=new Promise((n,e)=>{i.fetchDatabase(n,e)}),r.push(e.then((function(n){l[o]=n}))))}return t.a(r,n)}var b=["agency.json","calendar_dates.json","calendar.json","fare_attributes.json","fare_rules.json","frequencies.json","routes.json","stops.json","stop_time_paths.json","stop_times.json","trips.json"];function w(n){console.log("DBZips:"),console.log(l);var e,r=[];for(var o of a){var s=o.pkg+","+o.id;if(l[s]){if(e=l[s],console.log("Preparing for update for key: "+s),!e.files["version.json"]){console.error("Error: Database returned from "+s+" does not contain a version file.");continue}for(var u of(c[s]=[],b))e.files[u]&&r.push(e.files[u].async("string").then((function(n){var e=JSON.parse(n);e.pkg=o.pkg,e.id=o.id,console.log(e),c[s].push(e)})));r.push(e.file("version.json").async("string").then((function(n){var e=JSON.parse(n);e.package=o.pkg,e.provider=o.id,i.c.versions.put(e)}))),r.push(i.a(o.pkg,o.id))}}return t.a(r,n)}var y=!1;function k(){y=new Worker(n,{})}function _(){y.terminate()}function x(n,e){console.log("DBChunks:"),console.log(c);var r,i,o=[];for(var s of a){var u=s.pkg+","+s.id;if(i=l[u],c[u]){r=c[u];for(const e of r)n===e.dataType&&o.push(new Promise((n,r)=>{var t="";console.log("Loading "+e.dataType),i.file(e.dataType+"-chunk.json").internalStream("string").on("data",(function(n){t+=n})).on("error",(function(n){console.log("ERROR"),r(n)})).on("end",(function(){console.log("Chunk end"),y.postMessage({type:0,pkg:s.pkg,id:s.id,info:e,string:t}),n()})).resume()}))}}return t.a(o,e)}function j(n){return new Promise((e,r)=>{y.addEventListener("message",(function r(t){var a=t.data;if(0===a.type)console.log("Finish"),y.removeEventListener("message",r),e();else if(1===a.type)n(a.progress);else if(2===a.type){var s=t.data;o.push(i.c.putGtfs(s.pkg,s.id,s.info.dataType,s.result))}})),y.postMessage({type:1})})}}).call(this,r(166))},93:function(n,e,r){"use strict";e.a={mapApi:"googlemap",googleMapApiKey:"AIzaSyAhU7FqH46IdF4RaHrBlABfkoFlHZeudFg"}}},[[107,12,13]]]);
//# sourceMappingURL=app.21e75f03670e38588699.js.map