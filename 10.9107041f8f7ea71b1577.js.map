{"version":3,"sources":["webpack:///./src/gtw-ui-modal-viewplugin.js"],"names":["enable","pkg","$","on","packageJson","pkey","html","closedApi","i18n","name","fullName","author","version","github","package","desc","json","statusMsg","status","msg","window","location","reload","this","hasClass","addClass","then","disable"],"mappings":"2FAAA,8HAIO,SAASA,EAAOC,GACnBC,EAAE,iBAAiBC,GAAG,SAAS,WAC3B,IAAa,oBAGjB,IAAIC,EAAc,EAClB,IAAK,IAAIC,KAAQ,EACb,GAAIA,IAASJ,EAAK,CACdG,EAAc,EAAMC,GACpB,MAIR,GAAKD,EAAL,CAKA,IAAIE,EAAO,GAEPF,EAAYG,YACZD,GAAQ,6FAAqGJ,EAAEM,KAAK,6BAA+B,UAGvJF,GAAQ,OAASJ,EAAEM,KAAK,uBAAyB,QACjDF,GAAQ,SACRA,GAAQ,MAAQJ,EAAEM,KAAK,4BAA8B,KAAOJ,EAAYK,KAAO,SAC/EH,GAAQJ,EAAEM,KAAK,gCAAkC,KAAOJ,EAAYM,SAAW,SAC/EJ,GAAQJ,EAAEM,KAAK,8BAAgC,KAAOJ,EAAYO,OAAS,SAC3EL,GAAQJ,EAAEM,KAAK,+BAAiC,KAAOJ,EAAYQ,QAAU,SAC7EN,GAAQJ,EAAEM,KAAK,8BAAgC,cAAiBJ,EAAYS,OAAS,qBAA0BT,EAAYS,OAAS,aACpIP,GAAQJ,EAAEM,KAAK,+BAAiC,KAAOJ,EAAYU,QAAU,SAC7ER,GAAQJ,EAAEM,KAAK,mCAAqC,KAAOJ,EAAYW,KAAO,OAE9ET,GAAQ,OAASJ,EAAEM,KAAK,4BAA8B,QACtDF,GAAQ,SAER,IAAIU,EAAO,IAAuBZ,EAAYU,SAE1CG,EAAY,iCACXD,GAEuB,IAAjBA,EAAKE,OACZD,GAAa,gBAAmBf,EAAEM,KAAK,iDAChB,IAAhBQ,EAAKE,OACZD,GAAa,iBAAoBf,EAAEM,KAAK,8CACjB,IAAhBQ,EAAKE,OACZD,GAAa,mBAAsBf,EAAEM,KAAK,wCACnCQ,EAAKE,SAAW,GAAKF,EAAKE,SAAW,EAC5CD,GAAa,gBAAmBf,EAAEM,KAAK,8CAA+CQ,EAAKE,QAE3FD,GAAa,mBAAsBf,EAAEM,KAAK,+CAAgDQ,EAAKE,QAV/FD,GAAa,cAAiBf,EAAEM,KAAK,0CAYzCS,GAAa,UAEbX,GAAQ,MAAQJ,EAAEM,KAAK,mCAAqC,KAAOS,EAAY,SAE3ED,GAAQA,EAAKG,MACbb,GAAQJ,EAAEM,KAAK,oCAAsC,KAAOQ,EAAKG,IAAM,QAG3Eb,GAAQ,SAGJA,GADAU,EACQ,4EAAkFd,EAAEM,KAAK,sDAAwD,YAEjJ,2EAAiFN,EAAEM,KAAK,oDAAsD,YAG1JN,EAAE,eAAeI,KAAKA,GAEtBJ,EAAE,8BAA8BC,GAAG,SAAS,WACxC,IAAqBC,EAAYU,SACjCM,OAAOC,SAASC,YAGpBpB,EAAE,gCAAgCC,GAAG,SAAS,WAC1C,IAAID,EAAEqB,MAAMC,SAAS,YAArB,CAGA,IAAIlB,EAAOJ,EAAEqB,MAAMjB,OACnBJ,EAAEqB,MAAME,SAAS,YACjBvB,EAAEqB,MAAMjB,KAAK,2FAAmGA,GAChH,IAAuBF,EAAYU,SAASY,MAAK,WAC7CN,OAAOC,SAASC,qBAtEpBpB,EAAE,eAAeI,KAAKJ,EAAEM,KAAK,0CA2E9B,SAASmB,O","file":"10.9107041f8f7ea71b1577.js","sourcesContent":["import * as UI from './gtw-ui';\r\nimport * as PluginLoader from './gtw-pluginloader';\r\nimport repos from './plugins/repository.json';\r\n\r\nexport function enable(pkg) {\r\n    $(\".modal .close\").on(\"click\", function () {\r\n        UI.showModal(\"pluginmanager\");\r\n    });\r\n\r\n    var packageJson = 0;\r\n    for (var pkey in repos) {\r\n        if (pkey === pkg) {\r\n            packageJson = repos[pkey];\r\n            break;\r\n        }\r\n    }\r\n\r\n    if (!packageJson) {\r\n        $(\".modal-body\").html($.i18n(\"view-plugin-repos-cannot-find-package\"));\r\n        return;\r\n    }\r\n\r\n    var html = \"\";\r\n\r\n    if (packageJson.closedApi) {\r\n        html += \"<div class=\\\"alert alert-warning\\\" role=\\\"alert\\\"><i class=\\\"fas fa-exclamation-triangle\\\"></i> \" + $.i18n(\"plugin-closed-api-warning\") + \"</div>\";\r\n    }\r\n\r\n    html += \"<h3>\" + $.i18n(\"view-plugin-details\") + \"</h3>\";\r\n    html += \"<hr />\";\r\n    html += \"<p>\" + $.i18n(\"view-plugin-details-name\") + \": \" + packageJson.name + \"<br />\";\r\n    html += $.i18n(\"view-plugin-details-fullname\") + \": \" + packageJson.fullName + \"<br />\";\r\n    html += $.i18n(\"view-plugin-details-author\") + \": \" + packageJson.author + \"<br />\";\r\n    html += $.i18n(\"view-plugin-details-version\") + \": \" + packageJson.version + \"<br />\";\r\n    html += $.i18n(\"view-plugin-details-github\") + \": <a href=\\\"\" + packageJson.github + \"\\\" target=\\\"_blank\\\">\" + packageJson.github + \"</a><br />\";\r\n    html += $.i18n(\"view-plugin-details-package\") + \": \" + packageJson.package + \"<br />\";\r\n    html += $.i18n(\"view-plugin-details-description\") + \": \" + packageJson.desc + \"</p>\";\r\n\r\n    html += \"<h3>\" + $.i18n(\"view-plugin-installation\") + \"</h3>\";\r\n    html += \"<hr />\";\r\n\r\n    var json = PluginLoader.getPlugin(packageJson.package);\r\n\r\n    var statusMsg = \"<span class=\\\"font-weight-bold \";\r\n    if (!json) {\r\n        statusMsg += \"text-info\\\">\" + $.i18n(\"view-plugin-installation-not-installed\");\r\n    } else if (json.status === -1) {\r\n        statusMsg += \"text-danger\\\">\" + $.i18n(\"view-plugin-installation-plugin-not-available\");\r\n    } else if (json.status === 0) {\r\n        statusMsg += \"text-success\\\">\" + $.i18n(\"view-plugin-installation-installed-running\");\r\n    } else if (json.status === 1) {\r\n        statusMsg += \"text-secondary\\\">\" + $.i18n(\"view-plugin-installation-not-enabled\");\r\n    } else if (json.status <= -2 && json.status >= -4) {\r\n        statusMsg += \"text-danger\\\">\" + $.i18n(\"view-plugin-installation-plugin-load-errors\", json.status);\r\n    } else {\r\n        statusMsg += \"text-secondary\\\">\" + $.i18n(\"view-plugin-installation-unknown-status-code\", json.status);\r\n    }\r\n    statusMsg += \"</span>\";\r\n\r\n    html += \"<p>\" + $.i18n(\"view-plugin-installation-status\") + \": \" + statusMsg + \"<br />\";\r\n\r\n    if (json && json.msg) {\r\n        html += $.i18n(\"view-plugin-installation-message\") + \": \" + json.msg + \"</p>\";\r\n    }\r\n\r\n    html += \"<hr />\";\r\n\r\n    if (json) {\r\n        html += \"<button type=\\\"button\\\" class=\\\"btn btn-danger ui-btn-viewplugin-uninstall\\\">\" + $.i18n(\"view-plugin-installation-uninstall-and-restart-btn\") + \"</button>\";\r\n    } else {\r\n        html += \"<button type=\\\"button\\\" class=\\\"btn btn-success ui-btn-viewplugin-install\\\">\" + $.i18n(\"view-plugin-installation-install-and-restart-btn\") + \"</button>\";\r\n    }\r\n\r\n    $(\".modal-body\").html(html);\r\n\r\n    $(\".ui-btn-viewplugin-install\").on(\"click\", function () {\r\n        PluginLoader.install(packageJson.package);\r\n        window.location.reload();\r\n    });\r\n\r\n    $(\".ui-btn-viewplugin-uninstall\").on(\"click\", function () {\r\n        if ($(this).hasClass(\"disabled\")) {\r\n            return;\r\n        }\r\n        var html = $(this).html();\r\n        $(this).addClass(\"disabled\");\r\n        $(this).html(\"<span class=\\\"spinner-border spinner-border-sm\\\" role=\\\"status\\\" aria-hidden=\\\"true\\\"></span> \" + html);\r\n        PluginLoader.uninstall(packageJson.package).then(function () {\r\n            window.location.reload();\r\n        });\r\n    });\r\n}\r\n\r\nexport function disable() {\r\n\r\n}"],"sourceRoot":""}